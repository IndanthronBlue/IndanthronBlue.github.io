

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="阴丹士林蓝">
  <meta name="keywords" content="study note software">
  
    <meta name="description" content="不得不说是非常卖力了，可惜没有拿到理想的成绩">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络｜期末复习">
<meta property="og:url" content="http://example.com/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/computer-network/index.html">
<meta property="og:site_name" content="IndanthronBlue">
<meta property="og:description" content="不得不说是非常卖力了，可惜没有拿到理想的成绩">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120163906240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021012016215332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120163120514.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120163309132.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120164111607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120164958156.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120170107891.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120170514151.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120170640121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120170734581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120170557835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120172154989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120172803637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120173451811.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120174330514.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021012017512582.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120175629995.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120194807258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210121120154633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120203249547.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120223443885.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120203619190.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120203922893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210120204834696.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210122181039981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70,">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210123233744274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128151057941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128150820759.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2021012814564648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128150935106.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128145907931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_11,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128151315178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128151021347.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128151245633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128160922339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210128163916581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/qUAa1tnOEdfN2rH.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/g6GY3WOS2Twu5hJ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/qjtHuEV7S4InkRU.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/U3myY5c8pgHAzTR.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/bHzNT2R9ZmDV1Et.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/UydIWNrQ1bn9mvP.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/mGzMEU3gjVZQNF5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/kGhXliry3JpdxsK.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/x947mOE1Rq3pGw5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/dbsiCLBOxA8u1Vy.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/7radiwyMJfNGbjU.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/lXPnpWYDI6fvhC3.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/5f8TXgMBoZ6vq4G.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/UtlzH68mE3IjAuQ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/SVi2rgNIBzkbequ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/BPODYHfsw23Ap6j.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/o5biT6xJ4ya8zOB.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/Kx4aW9P76sLMGgN.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/XIzRWQ9GdsviESV.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/63fja9XuJlAgyQn.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/SErPD3ZpoaeMCjn.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/gHu67l8fOWs5IxJ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/vXRKPrNmsY5uwGp.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/UBQzvARDKafqort.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/HUVGQvkiaR42LPO.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/AKpiMg8SoZdaEJW.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/7fOCkTt6IpyJiYV.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/LglbW7vdqjtnQxz.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/n8ak6EIMiGYFRhe.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/FdTDwBVKNojc5Gi.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/3SY1lpPFuWbE2vd.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/s2HIT7k3gnUJwQ5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/rQJf5H4noDeCWGy.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/btiY1HkvrsxZCXp.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/cRyJVPL6mbFHGAq.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/FZsaPzr3NeKWIRH.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/s7Htdki3TZEgXox.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/gulYI2oa4bwtnKV.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/fzgbxS2KdN4D7k6.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/87oLN2Pt9sk5wGZ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/aFKsdtiJBup7h9w.jpg">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/vFda6fDnr7ib3OU.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/TSKkZ6GoHvLMNmp.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/bGQBAJ9uxzMXeC6.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/l7mBVF6cbsIfyXD.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/AKkNisEbFdD9SgP.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/ogzfnarvY1eWiBS.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/KlPQg6fnStCO4Za.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/W1EOP5g9Ryljvft.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/d28mePGhb9L3ryB.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/IJYHOlfq8QZB51y.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/26M7SWcVUmz5tQb.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/s5bf9wXHIBFuTZN.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/VRZ1ewdFfD3EvXH.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/UkWLTmvH6oR75zS.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/mye2WGR4bN9A7Pa.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/gjpzFvB4L2If1wD.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/gZqiOwlLU2eAVFG.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/fjk7VUSdtMFp24a.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/D4ZFNEQjioTHuJd.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/nYTLdkBc61DybUq.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/b8vHqCjVaOBgdAm.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/54s6L3mpJBdakcn.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/RE3v8p4elDcwTOJ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/uiCwHhj1sIADbyU.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/bBSyxo3KhJeNuQq.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/S9ZpdiErnDjFkC1.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/2DmIp5tadVxfXAP.jpg">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/rmegylVaTYQp74d.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/Y8KPAUN1pETdaDF.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/YvIpT1E4dGsSALV.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/6F9GQZKqvMbghI2.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/JUgfrD2wF1cKl6C.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/1sNmJH76ZkylpYG.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/7MSpoD2QGkF5vPs.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/dDNTc1YszSwnh3e.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/sF9rACiGt75c3Ym.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/mpH2saFwniEYzcG.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/gmM41iVladDFJH5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/lUpad8h6je2Z7yo.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/L4xyMESOGjoT92s.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/qdMbKtLJh4lBf1O.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/rjHSvBeFEDPUxoz.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/zFbR67M8YOAeouh.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/Kjh2nBpk3aUGXMe.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/E3sg5GKWFPdIn8c.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/sU8GYTJCpRyMzSI.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/u5PnN6FRJ13sdXv.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/jDtKeIFyU1JgVl8.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/BNqYt2Xr1mvjk5b.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/VPKRuWB2cGvU6yt.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/Jaomq2DgSA1LOkT.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/EIKoPxsX8aJHMyC.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/dnBmSjYkcO8paJM.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/zlfUu2A1ymnYkQo.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/mNC9cuROfZzDLVn.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/LrO1A5MZCFdjtTD.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/vkn8RlsWIHxp2uc.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/ENFxsXyIkZRO92c.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/UzvwhLV9srnb1Ry.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/N5vQIAHaxgKyzBf.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/b8yWnjSefmTOrE9.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/F6McJIWhtTZ1pLD.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/pNPzMFfVu3q8XJY.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/X8HOa3oYKIuUZFN.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/oPmWdhak6TFJ84G.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/i28lxuC5DQhYOKM.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/ElrwF7n8UsgNAvt.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/mpnj1wtzfX4TsZ8.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/NRgiPtTxenhrQK3.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/4wc8BkzKWneDtdR.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/z4DfXmMPeKuTCVL.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/AyMPJYItT3ERkG9.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/R3tJOEVg8anPfNq.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/BWASYH5pCIfs7Ui.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/nmzg2PiQkyYRH1o.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/iCjLyTwMHoeXJfD.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/zRTCoiNh4PGa7ZE.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/IowUaBC3dGqVeAF.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/05/VNZ3RfCqHQEM1c5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/DUowgBfNZE4ryKX.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/jnTM3Ytsfmb9vlR.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/UMacsE38BvYeVto.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/sh78qdCizjyrADV.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/qXFiAu9jGL8rE61.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/IrF8o7mxaCHgEOZ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/otZPaf4yGWDdc1M.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/ZPNrCnsFRjhY7tO.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/wQjPn6ZGmhV7I9z.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/w6BoWUi38JKZljg.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/p4alwOdeSCxBfW9.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/olscdy6UIfZ7EVH.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/7DdFxbjoqgWJraK.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/MSQbunK2ypxzr3E.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/7yKJTDMckjhNpx9.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/uwhZOAEdCbWJTyG.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/Sg3pzhCb2uHoTsD.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/Ag18bpsaLne4KMx.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/M7JObcuhz8rWKwE.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/W9svXgASr21KFql.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/hDwjvQSZEoFIb96.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/aJpcy5uswnIKzoS.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/tAD5oWMlHRI6ErF.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/8Lx6BcvmSj2uU5k.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/7K8utUhYWafTNIH.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/OJHPWYhzoXkG59g.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/Y2bVB7QZEu84GpO.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/i36PmuxYvfEWT8D.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/bJtd9CNzIcAHwmx.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/Vel3sf5vGZDFmRw.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/cQNBLprKuZM15xm.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/ztyS8ValE6bwxr2.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/LvA9zW4OGNcXpf5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/6gQzZG3SLdKvMlY.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/FovR4LdCrPubzVx.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/9BzAdgsK4Ca5nc2.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/haRtnNo8MEBy1Pi.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/8MhQGwelZqxRr43.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/KX738xHiIJQDZ5O.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/VFUfvomg1jQut9Z.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/sNEVyLeP9JHZTRM.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/vZ6EDWla1zSHbOP.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/ONkHrwItcCbZud2.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/zhstVvGiYxnwaCJ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/S7zl5OqtunjQ4pa.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/vIDOFA4Q6qTCRYK.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/kc8KVXhLxAw3WPl.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/i4FvJylOQYhTjxq.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/pdP4Tax5RDtqMJE.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/lEHgt4rs9o7RUMS.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/k9ThqVA8RnULFQy.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/YgfS3APRMKLZ4dJ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/9mQpxb8jvPnqyNh.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/LrZzwIAfEFWRBHg.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/iolMF1xwkvuQKyW.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/rkX3gsD7whWztJl.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/I75PatgenY4o1xC.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/npJ61zeOKYGAk3j.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/OUCdoghne1uNZxJ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/xAXHJhGcjlqtRr4.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/bB7KLAafiGhYuyc.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/gembHFkKoYX2LPZ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/ZtSPwy4RQDKsaBi.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/zUKJuGNeLgMXsvR.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/8iJTO3Vt45xyMYh.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/BKAt7HQDslVGNRd.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/j63vDW2RklCZdYA.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/XyEewlgI415HaQb.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/HWXSMl21xzIURhy.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/uno5dIgtFXh6MEb.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/DQ4jxwOIWiHdlAG.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/8KDhHUJV4vX5Sys.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/MtVir3hR9lL1pXO.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/uPByKRM738DW4qh.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/yWD8GLgZUOlVEdw.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/lFgupj3wzST4HLI.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/NtdyRblzrZWcDa5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/m8tMIhs947gXcEZ.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/lciNAMPjfdLSuyX.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/z8vZlctqyaTFprK.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/09/dbvK8OoeLEnjDuU.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/e9YaopGS8iuhzUK.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/CwXuyr2AT73QO18.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/gp3MVRGEx8tdWKi.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/TxoykWZw2VpgOtv.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/Ar2LeynZD57zJlB.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/tuEHVByGqobNDI5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/VoMFTADq5pI2Sma.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/lkKinphrNt5cxmI.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/zE6tMHgaTskv2Ax.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/G6OWTsRXeQ3H9U5.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/YiXhVKetkp5NGaW.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/lYLoqy4WjZIsExe.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/RD9KnpriQhcP3bL.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/87oxXgfvntFJMa4.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/WNZVSjx3eHc6pIm.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/gLdhT2GucCk1iHb.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/sAiPUX9VFBnaMTf.png">
<meta property="og:image" content="https://s2.loli.net/2022/01/06/P5CXZVgMHFQ6A2r.png">
<meta property="article:published_time" content="2022-01-09T13:31:00.000Z">
<meta property="article:modified_time" content="2022-03-11T16:48:31.593Z">
<meta property="article:author" content="阴丹士林蓝">
<meta property="article:tag" content="计算机网络">
<meta property="article:tag" content="期末复习">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20210120163906240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70">
  
  
  <title>计算机网络｜期末复习 - IndanthronBlue</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":10},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>IndanthronBlue</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/3.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="计算机网络｜期末复习">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      阴丹士林蓝
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-01-09 21:31" pubdate>
        2022年1月9日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      62k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      520 分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">计算机网络｜期末复习</h1>
            
            <div class="markdown-body">
              <h1 id="计算机网络概述"><a class="markdownIt-Anchor" href="#计算机网络概述"></a> 计算机网络概述</h1>
<p><img src="https://img-blog.csdnimg.cn/20210120163906240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="概念"><a class="markdownIt-Anchor" href="#概念"></a> 概念</h2>
<p>一般认为，计算机网络是一个将<code>分散的</code>、具有<code>独立</code>功能的计算机系统，通过<code>通信设备</code>(路由等)与<code>线路</code>(光纤等)连接起来，由功能完善的<code>软件</code>实现<code>资源共享</code>和<code>信息传递</code>的系统。是一些<code>互联的、自治的计算机系统的集合</code><br />
<img src="https://img-blog.csdnimg.cn/2021012016215332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="组成"><a class="markdownIt-Anchor" href="#组成"></a> 组成</h2>
<h3 id="从组成部分上看"><a class="markdownIt-Anchor" href="#从组成部分上看"></a> 从组成部分上看</h3>
<p>一个完整的计算机网络主要由<code>硬件、软件和协议</code>三大部分组成，缺一不可。</p>
<ol>
<li>硬件主要由<code>主机</code>（也称端系统），<code>通信链路</code>（如双绞线、光纤）、<code>交换设备</code>（如路由、交换机等）和<code>通信处理机</code>（如网卡）等组成</li>
<li>软件主要包括各种实现资源共享的软件和方便用户使用的各种工具软件（如网络操作系统、邮件收发程序、FTP程序、聊天程序等）。</li>
<li>协议是计算机网络的核心，<code>规定了网络传输数据时所遵循的规范</code>。</li>
</ol>
<h3 id="从工作方式上看"><a class="markdownIt-Anchor" href="#从工作方式上看"></a> 从工作方式上看</h3>
<p>计算机网络（主要指Internet）可分为边缘部分和核心部分。</p>
<ol>
<li>边缘部分由所有连接到因特网上、<code>供用户直接使用</code>的主机组成，用来进行通信（如传输数据、音频或视频）和资源共享。</li>
<li>核心部分由大量的网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20210120163120514.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h3 id="从功能组成来看"><a class="markdownIt-Anchor" href="#从功能组成来看"></a> 从功能组成来看</h3>
<p>计算机网络由<code>通信子网和资源子网</code>组成</p>
<ol>
<li>通信子网由各种传输介质、通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力，<code>实现计算机之间的数据通信</code></li>
<li>资源子网是<code>实现资源共享功能</code>的设备及其软件的集合，向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务<br />
<img src="https://img-blog.csdnimg.cn/20210120163309132.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
</ol>
<h2 id="功能"><a class="markdownIt-Anchor" href="#功能"></a> 功能</h2>
<h3 id="数据通信"><a class="markdownIt-Anchor" href="#数据通信"></a> 数据通信</h3>
<ul>
<li>数据通信是计算机网络<code>最基本和最重要</code>的功能，实现联网计算机之间的各种信息传输，并将分散在不同地理位置的计算机联系起来，进行统一的调配、控制和管理</li>
</ul>
<h3 id="资源共享"><a class="markdownIt-Anchor" href="#资源共享"></a> 资源共享</h3>
<ul>
<li>资源共享可以是软件共享、数据共享和硬件共享</li>
<li>使计算机网络中的资源互通有无，分工协作，从而极大地提高硬件资源、软件资源和数据资源的利用率</li>
</ul>
<h3 id="分布式处理"><a class="markdownIt-Anchor" href="#分布式处理"></a> 分布式处理</h3>
<ul>
<li>当计算机网络中的某个计算机系统负荷过重时，可以将其处理的某个复杂任务分配给网络中的其它计算机系统，从而利用空闲计算机资源以提高整个系统的利用率</li>
</ul>
<h3 id="提高可靠性"><a class="markdownIt-Anchor" href="#提高可靠性"></a> 提高可靠性</h3>
<ul>
<li>计算机网络中的各台计算机可以通过网络互为替代机</li>
</ul>
<h3 id="负载均衡"><a class="markdownIt-Anchor" href="#负载均衡"></a> 负载均衡</h3>
<ul>
<li>将工作任务均衡的分配给计算机网络中的各台计算机</li>
</ul>
<h2 id="分类"><a class="markdownIt-Anchor" href="#分类"></a> 分类</h2>
<h3 id="按分布范围分类"><a class="markdownIt-Anchor" href="#按分布范围分类"></a> 按分布范围分类</h3>
<ul>
<li>广域网（WAN）。也称远程网。关于网提供长距离通信，通常是<code>几十千米到几千千米</code>的区域，比如跨国通信。连接关于网的各结点交换机的链路一般都是高速链路，具有较大的通信容量。</li>
<li>城域网（MAN）。覆盖范围跨越几个街区甚至整个城市，覆盖范围约<code>5~50km</code>，城域网大多采用以太网技术，因此有时也常并入局域网的范围进行讨论。</li>
<li>局域网（LAN）。范围<code>几十米到几千米</code>的区域。一般用微机或工作站通过高速线路相连。传统上，<code>局域网使用广播技术，而广域网使用交换技术</code>。</li>
<li>个人区域网（PAN）。覆盖范围大约<code>十米</code>左右。指在个人工作的地方将消费电子设备（如平板电脑、智能手机等）用无线技术连接起来的网络，也常称为无线个人区域网（WPAN）<br />
<img src="https://img-blog.csdnimg.cn/20210120164111607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
</ul>
<h3 id="按传输技术分类"><a class="markdownIt-Anchor" href="#按传输技术分类"></a> 按传输技术分类</h3>
<ul>
<li>广播（boradcasting）式网络。<code>所有联网计算机都共享一个公共通信信道</code>。当一台计算机利用共享通信信道发送报文分组时，所有其他计算机都会收听到这个分组。接受到该分组的计算机将通过检查目的地之来决定是否接受该分组。</li>
<li>有些广播系统还支持给一组机器发送数据包的模式，这种传输模式称为组播（multicasting）。</li>
<li>点到点（point-to-point）链路<code>将一对单独的机器连接起来</code>。在一个由点到点链路组成的网络中，为了从源端到达接收方，短消息必须首先访问一个或多个中间机器，这种短消息在某些情况下称为数据包或包（packet）。</li>
<li>点-点传输只有一个发送方和一个接收方，有时候也称为单播（unicasting）。</li>
</ul>
<h3 id="按拓扑结构分类"><a class="markdownIt-Anchor" href="#按拓扑结构分类"></a> 按拓扑结构分类</h3>
<ul>
<li>网络拓扑结构是指网络总的结点（路由器、主机等）于通信线路（网线）之间的几何关系（如总线形、环形）表示的网路结构，主要指通信子网的拓扑结构。</li>
<li>分为四类：<code>总线形、星形、环形、网状形</code></li>
<li>总线形：用单根传输线把计算机连接起来。
<ul>
<li>优点是建网容易、 增减节点方便、节省线路。</li>
<li>缺点是重负载时通信效率不高、总线任意一处对故障敏感。</li>
</ul>
</li>
<li>星形：每个终端或计算机都以单独的线路和中央设备相连
<ul>
<li>星形网络便于集中控制和管理，因为端用户之间的通信必须经过中央设备</li>
<li>缺点是成本高、中心结点对故障敏感。</li>
</ul>
</li>
<li>环形：所有计算机接口设备连接成一个环</li>
<li>网状形：一般情况下，每个结点至少有两条路径与其他结点相连，<code>多用于广域网</code><br />
<img src="https://img-blog.csdnimg.cn/20210120164958156.png" srcset="/img/loading.gif" lazyload alt="" /></li>
</ul>
<h3 id="按使用者分"><a class="markdownIt-Anchor" href="#按使用者分"></a> 按使用者分</h3>
<ul>
<li>公用网（Public Network）。也称公众网。指电信公司出资建造的大型网络。</li>
<li>专用网（Private Network）。指某个部门为满足本单位特殊业务需要而建造的网络。这种网络不向本单位以外人提供服务。如铁路、典礼、军队等部门专用网络。</li>
</ul>
<h3 id="按交换技术分类"><a class="markdownIt-Anchor" href="#按交换技术分类"></a> 按交换技术分类</h3>
<ul>
<li><code>电路交换网络</code>。在源结点和目的结点之间建立起一条专用的通路用于传输数据，包括建立连接（占用通信资源）、传输数据（一直占用通信资源）和断开连接（释放通信资源）三个阶段。最典型的电路交换网是传统电话网络。</li>
<li>该类网络的特点是整个报文的比特流<code>连续的从源点直达终点</code>，好像在一条管道中传送。</li>
<li>电路交换的优点主要包括以下几个方面：
<ul>
<li>通信时延小。通信双方通过专用线路进行通信，数据可以直达。当数据传输量较大时，优点将十分显著。</li>
<li>线路独占，没有冲突。</li>
<li>实时性强。一旦通信线路建立，双方可以实时通信。</li>
</ul>
</li>
<li>电路交换的缺点主要包括以下几个方面：
<ul>
<li>线路独占，利用率太低。</li>
<li>连接建立时间过长。</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210120170107891.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<ul>
<li><code>报文交换网络</code>。也称<code>存储-转发网络</code>。用户数据加上源地址、目的地址、校验码等辅助信息，然后封装成报文、这个报文传送到相邻结点，全部存储后，再转发给下一个结点，重复这一过程直到到达目的结点，每个报文可以单独选择到达目的结点的路径。</li>
<li>报文交换的优点主要包括以下几个方面：
<ul>
<li>无需建立连接。</li>
<li>动态分配线路。</li>
<li>线路利用率高。</li>
</ul>
</li>
<li>报文交换的缺点主要包括以下几个方面：
<ul>
<li>报文交换对报文的大小没有限制，需要网络节点有足够的缓存空间。</li>
<li>报文交换在节点处要经历存储、转发等操作，从而引起一定时延。</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210120170514151.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<ul>
<li><code>分组交换网络</code>。也称<code>包交换网络</code>。其原理是将数据分成较短的固定长度的数据块，在每个数据块中加上目的地址、源地址等辅助信息组成分组（包），以<code>储存-转发</code>方式传输。</li>
<li>分组交换的优点主要包括以下几个方面：
<ul>
<li>无需建立连接。</li>
<li>线路利用率高。</li>
<li>相对报文交换，分组长度固定，缓冲区容易管理。</li>
<li>分组比报文小，因此传输时间更短。</li>
</ul>
</li>
<li>分组交换的缺点主要包括以下几个方面：
<ul>
<li>仍然存在时延。</li>
<li>需要传输包括源地址、目的地址、分组编号等额外信息。</li>
<li>分组可能遇到失序、丢失、重复等问题。<br />
<img src="https://img-blog.csdnimg.cn/20210120170640121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /><br />
<img src="https://img-blog.csdnimg.cn/20210120170734581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
</ul>
</li>
<li>存储转发<br />
报文交换与分组交换均采用存储-转发交换方式，区别是：
<ul>
<li>报文交换以完整报文进行“存储-转发”</li>
<li>分组交换以较小的分组进行“存储-转发</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210120170557835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h3 id="按传输介质分类"><a class="markdownIt-Anchor" href="#按传输介质分类"></a> 按传输介质分类</h3>
<ul>
<li>传输介质可分为有线和无线两大类</li>
<li>有线网络可分为双绞线网络、同轴电缆网络等</li>
<li>无线网络可分为蓝牙、微波、无线电等类型</li>
</ul>
<h2 id="性能指标"><a class="markdownIt-Anchor" href="#性能指标"></a> 性能指标</h2>
<p>性能指标从不同的方面来度量计算机网络的性能<br />
<img src="https://img-blog.csdnimg.cn/20210120172154989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h3 id="速率speed"><a class="markdownIt-Anchor" href="#速率speed"></a> 速率（Speed）</h3>
<ul>
<li>速率是指连接在计算机网络上的主机在数字信道上<code>传送数据的速率</code>。是计算机网络中最重要的一个性能指标。</li>
<li>又称为数据率(data rate)或比特率(bit rate) ，速率的单位是bit/s(比特每秒，有时也写作bps）。</li>
<li>Bit 来源于 binary digit，意思是一个“二进制数字”，因此<code>一个比特就是二进制数字中的一个 1 或 0</code>。</li>
<li>当数据率较高时，可以使用kb/s(k=10<sup>3</sup>=千)、Mb/s(M=10<sup>6</sup>=兆)、Gb/s(G=10<sup>9</sup>=吉)或者Tb/s(T=10<sup>12</sup>=太)</li>
</ul>
<h3 id="带宽bandwidth"><a class="markdownIt-Anchor" href="#带宽bandwidth"></a> 带宽（Bandwidth）</h3>
<ul>
<li>在计算机网络中，带宽用来表示网络的通信线路传送数据的能力，通常指单位时间内从网络中的某一个点到另外一个点所能通过的<code>最高数据率</code>（网络设备所支持的最高速度）,带宽的单位为bit/s。<br />
<img src="https://img-blog.csdnimg.cn/20210120172803637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
</ul>
<h3 id="吞吐量throughput"><a class="markdownIt-Anchor" href="#吞吐量throughput"></a> 吞吐量（Throughput）</h3>
<ul>
<li>吞吐量表示<code>单位时间</code>内通过某个网络（通信线路、接口）的实际的数据量。单位b/s，kb/s，Mb/s等。</li>
<li>吞吐量受到网络的带宽或网络的额定速率的限制。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210120173451811.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<blockquote>
<p>例如，PC机和交换机链路带宽100Mb/s，每秒最多传输100Mb的数据。因为两个服务器速率很慢，所以服务器传输数据给交换机，交换机然后传输数据给PC机一秒钟传输数据最大只能是30Mb/s。</p>
</blockquote>
<h3 id="时延delay"><a class="markdownIt-Anchor" href="#时延delay"></a> 时延（Delay）</h3>
<ul>
<li>指数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需要的总时间，它由4部分构成：<code>发送时延、传播时延、处理时延、排队时延</code>。</li>
<li><code>总时延=发送时延+传播时延+处理时延+排队时延</code></li>
</ul>
<h4 id="发送时延"><a class="markdownIt-Anchor" href="#发送时延"></a> 发送时延</h4>
<ul>
<li>发送时延是主机或路由器发送数据帧所需要的时间，也就是<code>从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕</code>所需时间。发送时延也可以称为传输时延。</li>
<li>发送时延=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">数</mi><mi mathvariant="normal">据</mi><mi mathvariant="normal">长</mi><mi mathvariant="normal">度</mi><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">信</mi><mi mathvariant="normal">道</mi><mi mathvariant="normal">带</mi><mi mathvariant="normal">宽</mi><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{数据长度(bit)}{信道带宽(bit/s)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">带</span><span class="mord cjk_fallback">宽</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">长</span><span class="mord cjk_fallback">度</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。<br />
<img src="https://img-blog.csdnimg.cn/20210120174330514.png" srcset="/img/loading.gif" lazyload alt="" /></li>
<li><code>发送时延发生在机器内部的发送器中，与传输信道的长度（或信号传送的距离）没有任何关系。</code></li>
</ul>
<h4 id="传播时延"><a class="markdownIt-Anchor" href="#传播时延"></a> 传播时延</h4>
<ul>
<li>电磁波在信道中传播一定的距离需要花费的时间。取决于<strong>电磁波传播速度</strong>和<strong>链路长度</strong>。</li>
<li>传播时延=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">信</mi><mi mathvariant="normal">道</mi><mi mathvariant="normal">长</mi><mi mathvariant="normal">度</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">电</mi><mi mathvariant="normal">磁</mi><mi mathvariant="normal">波</mi><mi mathvariant="normal">传</mi><mi mathvariant="normal">播</mi><mi mathvariant="normal">速</mi><mi mathvariant="normal">度</mi><mo stretchy="false">(</mo><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{信道长度(m)}{电磁波传播速度(m/s)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">电</span><span class="mord cjk_fallback">磁</span><span class="mord cjk_fallback">波</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">播</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">度</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">长</span><span class="mord cjk_fallback">度</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。</li>
<li><code>传播时延发生在机器外部的传输信道媒体上，与信号的发送速率无关</code>，信号传送的距离越远，传播时延就越大。</li>
<li>对于高速网络链路，提高的仅仅是数据的发送数率而不是比特在链路上的传播速率。</li>
</ul>
<h4 id="处理时延"><a class="markdownIt-Anchor" href="#处理时延"></a> 处理时延</h4>
<ul>
<li>主机或路由器在收到分组时需要花费一定的时间处理，分析分组首部、从分组中提取数据部分、进行差错检验、查到适当路由等</li>
</ul>
<h4 id="排队时延"><a class="markdownIt-Anchor" href="#排队时延"></a> 排队时延</h4>
<ul>
<li>分组在经过网络传输时，要经过许多的路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。</li>
<li>排队延时通常取决于网络当时的通信量。</li>
</ul>
<h3 id="时延带宽积"><a class="markdownIt-Anchor" href="#时延带宽积"></a> 时延带宽积</h3>
<ul>
<li>指发送端发送的第一个比特即将到达终点时，发送端已经发出了多少个比特。</li>
<li>时延带宽积又称为以比特为单位的链路长度，即“某段链路现在有多少比特”。</li>
<li>时延带宽积(bit) = 传播时延(s) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span></span></span></span> 带宽(bit/s)</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2021012017512582.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<h3 id="往返时延round-trip-timertt"><a class="markdownIt-Anchor" href="#往返时延round-trip-timertt"></a> 往返时延（Round-Trip Time，RTT）</h3>
<ul>
<li>表示从发送端发送数据开始，到发送端收到来自接收端的确认（接收端收到数据后立即发送确认），总共经历的时延。</li>
<li>它包括往返传播时延和末端处理时间等</li>
<li><code>RTT越大，在收到确认之前，可以发送的数据越多。</code></li>
</ul>
<h3 id="信道利用率"><a class="markdownIt-Anchor" href="#信道利用率"></a> 信道利用率</h3>
<p>利用率分为信道利用率和网络利用率。</p>
<ul>
<li><code>信道利用率</code>：信道有百分之几的时间是被利用的（有数据通过），空闲信道的利用率为零。</li>
<li>信道利用率 = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi mathvariant="normal">有</mi><mi mathvariant="normal">数</mi><mi mathvariant="normal">据</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">间</mi></mrow><mrow><mi mathvariant="normal">（</mi><mi mathvariant="normal">有</mi><mo>+</mo><mi mathvariant="normal">无</mi><mi mathvariant="normal">）</mi><mi mathvariant="normal">数</mi><mi mathvariant="normal">据</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">间</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{有数据通过时间}{（有+无）数据通过时间}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4463300000000001em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.677em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">（</span><span class="mord cjk_fallback">有</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">无</span><span class="mord cjk_fallback">）</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
<li><code>网络利用率</code>：全网络的信道利用率的加权平均值。</li>
</ul>
<blockquote>
<p><code>信道利用率并非是越高越好</code>，根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。当网络的利用率接近最大值1时，网络的时延就趋近于无穷大。<br />
<img src="https://img-blog.csdnimg.cn/20210120175629995.png" srcset="/img/loading.gif" lazyload alt="" /></p>
</blockquote>
<h1 id="计算机网络体系结构"><a class="markdownIt-Anchor" href="#计算机网络体系结构"></a> 计算机网络体系结构</h1>
<p>为了<code>降低网络设计的复杂性</code>，绝大多数网络都组织成一个层次栈（a stack of layer）或分级栈（a stack of level），每一层都建立在其下一层的基础之上。<br />
<img src="https://img-blog.csdnimg.cn/20210120194807258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="层次结构的要点"><a class="markdownIt-Anchor" href="#层次结构的要点"></a> 层次结构的要点</h2>
<ul>
<li>除了在物理媒体上进行的是实通信之外，其余各对等实体间进行的都是虚通信。</li>
<li>对等层的虚通信必须遵循该层的协议。</li>
<li>n层的虚通信是通过n/n-1层间接口处n-1层提供的服务以及n-1层的通信（通常也是虚通信）来实现的。</li>
</ul>
<h2 id="层次结构划分的原则"><a class="markdownIt-Anchor" href="#层次结构划分的原则"></a> 层次结构划分的原则</h2>
<ul>
<li>以功能作为划分层次的基础</li>
<li>各层之间相互独立，每层只能实现一种相对独立的功能</li>
<li>每层之间界面自然清晰，易于理解，相互交流少</li>
<li>结构上可分割开，每层都采用最合适的技术来实现</li>
<li>保持下层对上层的独立性，上层单层使用下层提供的服务</li>
<li>层数应适中。若层数太少，则造成每一层的协议太复杂；若层数太多，则体系结构过于复杂，使描述和实现各层功能变得困难。</li>
<li>整个分层结构应能促进标准化工作</li>
</ul>
<h2 id="分层结构中的相关概念"><a class="markdownIt-Anchor" href="#分层结构中的相关概念"></a> 分层结构中的相关概念</h2>
<h3 id="实体"><a class="markdownIt-Anchor" href="#实体"></a> 实体</h3>
<ul>
<li>第n层中的活动元素称为n层实体。同一层的实体称为<code>对等实体(peer)</code>。这些对等体可能是软件过程、硬件设备，或者甚至是人类。换句话说，正是这些对等体为了实现彼此沟通才使用协议来进行通信。</li>
</ul>
<h3 id="协议protocol"><a class="markdownIt-Anchor" href="#协议protocol"></a> 协议(protocol)</h3>
<ul>
<li>一台机器上的第 n 层与另一台机器上的第 n 层进行对话，该对话中使用的规则和约定统称为第 n 层协议。基本上，所谓协议是指通信双方就如何进行通信的一种约定。</li>
<li>为进行网络中的对等实体数据交换而建立的规则，标准或者约定称为网络协议。</li>
<li>协议是水平的,不对等实体之间不存在协议</li>
<li>协议由<code>语法、语义、同步</code>三部分组成
<ul>
<li>语法(Syntax)：规定传输数据与控制信息的结构或格式</li>
<li>语义(Semantics)：规定需要发出何种控制信息,完成何种动作或做出何种响应</li>
<li>同步(Timing)：规定事件实现顺序的详细说明</li>
</ul>
</li>
<li>一个特定的系统所使用的一组协议，即每一层一个协议，称为协议栈（protocol stack）。</li>
</ul>
<h3 id="接口interface"><a class="markdownIt-Anchor" href="#接口interface"></a> 接口（interface）</h3>
<ul>
<li>接口定义了下层向上层提供哪些原语操作和服务,是上层使用下层服务的入口。</li>
<li>每层只能为紧邻的层次之间定义接口,不能跨层定义接口。</li>
</ul>
<h3 id="服务"><a class="markdownIt-Anchor" href="#服务"></a> 服务</h3>
<ul>
<li>服务指下层为紧邻的上层提供的功能调用,它是垂直的。本层能为上一层服务,但要实现本层协议还需要下一层所提供的服务。</li>
<li>服务定义了该层准备代表其用户执行哪些操作，但是它并不涉及如何实现这些操作。服务与两层之间的接口有关，<code>低层是服务提供者，而上层是服务用户</code>。</li>
<li>注意：<code>在一层内完成的全部功能并非都称之为服务，只有那些能够被高一层实体“看得见”的功能才能称为服务</code>。</li>
</ul>
<h4 id="服务原语service-primitiv"><a class="markdownIt-Anchor" href="#服务原语service-primitiv"></a> 服务原语(Service Primitiv)</h4>
<ul>
<li>上层使用下层所提供的服务必须与下层交换一些指令，这些指令在OSI中被称为服务原语。</li>
<li>一个服务由一组原语（primitive）正式说明，用户进程通过这些原语（操作）来访问该服务。</li>
<li><code>与协议不同的是，服务原语用于服务提供者与服务用户，而协议是用于服务用户之间的通信</code>。</li>
<li>OSI将原语划分为4类：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">原语</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">请求(Request)</td>
<td style="text-align:left">由服务用户发往服务提供者，请求它完成某项工作</td>
</tr>
<tr>
<td style="text-align:left">指示(Indication)</td>
<td style="text-align:left">由服务提供者发往服务用户，指示发生了某些事件</td>
</tr>
<tr>
<td style="text-align:left">响应(Response)</td>
<td style="text-align:left">由服务用户发往服务提供者，对前面发生的指示的响应</td>
</tr>
<tr>
<td style="text-align:left">证实(Confirmation)</td>
<td style="text-align:left">由服务提供者发往服务用户，对前面发生的请求的证实</td>
</tr>
</tbody>
</table>
<ul>
<li>Request与Confirm是一对原语，用于上层向本层发起的服务请求；Indication与Response是一对原语，用于本层向上层发起的事件指示。</li>
<li>有应答服务包括全部4种原语，无应答服务则只有请求和指示。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210121120154633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<p><img src="https://img-blog.csdnimg.cn/20210120203249547.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<h4 id="服务与协议的关系"><a class="markdownIt-Anchor" href="#服务与协议的关系"></a> 服务与协议的关系</h4>
<ul>
<li>服务是各层向它上层提供的一组原语，定义了两层之间的接口。</li>
<li>协议是同层对等实体之间交换数据帧、分组和报文的格式及意义等信息的一组规则。</li>
<li>服务确定了能为上一层提供的操作。</li>
<li>协议实现为上一层提供服务的具体方法。</li>
<li>对等实体利用协议来实现它们的服务定义，它们可以自由地改变协议，只要不改变呈现给它们用户的服务即可。</li>
<li>只有本层协议的实现才能保证向上一层提供服务，本层的服务用户只能看见服务而无法看见下面的协议，即<code>下面的协议对上层的服务用户是透明的</code>。<br />
<img src="https://img-blog.csdnimg.cn/20210120223443885.png" srcset="/img/loading.gif" lazyload alt="" /></li>
</ul>
<h3 id="网络体系结构network-architecture"><a class="markdownIt-Anchor" href="#网络体系结构network-architecture"></a> 网络体系结构（network architecture）</h3>
<ul>
<li>层和协议的集合称为网络体系结构<br />
<img src="https://img-blog.csdnimg.cn/20210120203619190.png" srcset="/img/loading.gif" lazyload alt="" /><br />
<img src="https://img-blog.csdnimg.cn/20210120203922893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="##" /></li>
</ul>
<h2 id="网络体系结构的特点"><a class="markdownIt-Anchor" href="#网络体系结构的特点"></a> 网络体系结构的特点</h2>
<ul>
<li>以功能作为划分层次的基础。</li>
<li>n层的实体在实现自身定义的功能时，只能使用第n-1层提供的服务。</li>
<li>第n层在向第n+1层提供的服务时，此服务不仅包含第n层本身的功能，还包含由下层服务提供的功能。</li>
<li>仅在相邻层间有接口，且所提供服务的具体实现细节对上一层完全屏蔽。</li>
</ul>
<h2 id="封装"><a class="markdownIt-Anchor" href="#封装"></a> 封装</h2>
<ul>
<li>各个层次中数据单位都分为两部分，一是数据部分，即SDU；二是控制信息部分，即PCI，它们共同组成PDU</li>
<li>SDU服务数据单元：为完成用户所要求的功能而应传送的数据</li>
<li>PCI协议控制信息：控制协议操作的信息</li>
<li>PDU协议数据单元:对等层次之间传送的数据单位</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>−</mo><mi>S</mi><mi>D</mi><mi>U</mi><mo>+</mo><mi>n</mi><mo>−</mo><mi>P</mi><mi>C</mi><mi>I</mi><mo>=</mo><mi>n</mi><mo>−</mo><mi>P</mi><mi>D</mi><mi>U</mi><mo>=</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>−</mo><mi>S</mi><mi>D</mi><mi>U</mi></mrow><annotation encoding="application/x-tex">n-SDU + n-PCI = n-PDU = ( n - 1 )-SDU</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span><br />
<img src="https://img-blog.csdnimg.cn/20210120204834696.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
</ul>
<blockquote>
<p>发送端就是对应用层数据一层一层加头的过程，到接收端后，接收端再一层一层去掉头部信息，然后交给对应的应用程序</p>
</blockquote>
<h2 id="层次设计问题"><a class="markdownIt-Anchor" href="#层次设计问题"></a> 层次设计问题</h2>
<h3 id="检错与纠错"><a class="markdownIt-Anchor" href="#检错与纠错"></a> 检错与纠错</h3>
<ul>
<li>由于存在电气噪声、随机无线信号、硬件缺陷、<br />
软件错误等原因，其中的某些比特到达接收端时已经遭到了损坏（即被逆转了）</li>
<li>从接收到的信息中发现错误所用的一种机制是<strong>检错</strong>（error detection）编码；然后重新传输接收到的不正确信息，直到它被正确接收为止</li>
<li>更强大的编码不仅能检错，还能<strong>纠错</strong>（error correction），即从最初收到的可能不正确的比特中恢复正确的消息。</li>
<li>这两种机制的工作都需要在被传的信息中添加冗余信息。这些冗余信息被较低层次用来保障数据包在个别链路上的正确传输，也可被较高层次用来检测接收到的数据包是否包含了正确的内容。</li>
</ul>
<h3 id="路由routing"><a class="markdownIt-Anchor" href="#路由routing"></a> 路由（routing）</h3>
<ul>
<li>另一个可靠性问题是找到通过网络的工作路径。在源和目的地之间经常存在多条路径，而且在一个大型网络中可能有一些链路或路由器偶尔发生故障。</li>
<li>网络应该能自动做出这种路由决策。这个主题就是所谓的路由（routing）。</li>
</ul>
<h2 id="面向连接与无连接服务"><a class="markdownIt-Anchor" href="#面向连接与无连接服务"></a> 面向连接与无连接服务</h2>
<h3 id="面向连接的服务connection-oriented-service"><a class="markdownIt-Anchor" href="#面向连接的服务connection-oriented-service"></a> 面向连接的服务（connection-oriented service）</h3>
<ul>
<li>为了使用面向连接的网络服务，服务用户首先必须建立一个连接，然后使用该连接传输数据，最后释放该连接。</li>
<li><strong>特点</strong>
<ul>
<li>静态地分配资源，传输前需要建立连接，<code>适用于在一段时间内向一个目的地址发送大量的数据</code></li>
<li>在绝大多数情况下，数据位保持原来的顺序，所以数据位都会按照发送的顺序到达</li>
</ul>
</li>
<li><strong>参考模型</strong>：电话系统</li>
</ul>
<h3 id="无连接服务conncetionless-service"><a class="markdownIt-Anchor" href="#无连接服务conncetionless-service"></a> 无连接服务（conncetionless service）</h3>
<ul>
<li>不需要建立连接直接进行数据的传输，报文之间相互独立，每个报文（信件）都携带了完整的目标地址，每个报文都由系统中的中间节点路由，而且路由独立于后续报文。</li>
<li>报文（message）在不同的上下文中有不同的称呼；数据包/包（packet）是网络层的报文。</li>
<li><strong>存储-转发交换（store-and-forward switching）</strong>：中间节点只能在收到报文的全部内容之后再将该报文发送给下一个节点的处理方式</li>
<li><strong>直通式交换（cut-through switching）</strong>：在报文还没有被全部接收完毕之前就向下一个节点传输的处理方式</li>
<li>可能发生先发送的报文被延迟，因而后发送的报文比它先到达的情况。</li>
<li><strong>参考模型</strong>：邮政系统</li>
</ul>
<h3 id="服务质量quality-of-service"><a class="markdownIt-Anchor" href="#服务质量quality-of-service"></a> 服务质量（quality of service）</h3>
<ul>
<li>可靠与不可靠性是面向连接或者无连接服务的一种性质</li>
<li><strong>可靠服务</strong>：网络具有纠错、检错、应答机制，能保证数据正确、可靠地传送到目的地。</li>
<li>一般情况下，一个可靠服务是这样实现的：接收方向发送方确认收到的每个报文，因而发送方可以据此保证报文已经到达接收方。</li>
<li><strong>不可靠服务</strong>：尽量正确、可靠地传送，不能保证数据正确、可靠地传送到目的地。</li>
<li>对于不可靠服务，其网络的正确性、可靠性要靠用户或应用来保证</li>
</ul>
<h3 id="应答"><a class="markdownIt-Anchor" href="#应答"></a> 应答</h3>
<ul>
<li><strong>有应答服务</strong>是指接收方在收到数据后向发送方给出相相应的应答。</li>
<li>该应答由传输系统内部自动实现，所发送的应答既可以是肯定应答，也可以是否定应答，推收到的数据有错误时发送否定应答。</li>
<li>例如，文件传输服务就是种有应答服务。</li>
<li><strong>无应答服务</strong>是指接收方收到数据后不自动给出应答。若需要应答，则由高层实现。</li>
<li>例如，对于www服务，客户端收到服务器发送的页面文件后不给出应答。</li>
</ul>
<h3 id="面向连接服务的类型"><a class="markdownIt-Anchor" href="#面向连接服务的类型"></a> 面向连接服务的类型</h3>
<ul>
<li><strong>报文流</strong>：可靠的，报文的边界始终得到保持。</li>
<li><strong>字节流</strong>：可靠的，该连接只是一个字节流，没有任何报文边界。</li>
</ul>
<blockquote>
<p>对于报文流，发送两个 1024 字节的报文，收到的仍然是两个独立的长度为1024 字节的报文，而决不可能变成一个长度为 2048字节的报文。<br />
而对于字节流，当 2048 个字节到达接收方时，接收方无法判断发送方发出的是一个长度为 2048 字节的报文，还是两个长度为1024 字节的报文，或者是 2048个长度只有 1 字节的报文。</p>
</blockquote>
<ul>
<li><strong>不可靠的面向连接服务</strong> ：对于有些应用，因确认而引入的传输延迟是不可接受的。比如说<strong>IP 语音（voice over IP）</strong></li>
</ul>
<h3 id="无连接服务的类型"><a class="markdownIt-Anchor" href="#无连接服务的类型"></a> 无连接服务的类型</h3>
<ul>
<li><strong>数据报服务（datagram service）</strong>：不可靠的无连接服务，一般不会给发送方反馈任何确认消息。</li>
<li><strong>有确认的数据报服务（acknowledged datagram service）</strong>：对每一个接收到的报文都响应一个确认。</li>
<li><strong>请求-应答服务（request-reply service）</strong>：发送方传输一个包含了某个请求的数据报；接受方以<code>一个包含了请求结果的应答数据报</code>作为反馈。</li>
</ul>
<blockquote>
<p>请求-应答服务通常用在客户机-服务器模型中：客户机发出一个请求，然后服务器对此做出响应。例如，一个手机客户向地图服务器发出一个请求，要求查询其当前位置的地图数据。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20210122181039981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70," srcset="/img/loading.gif" lazyload alt="" /></p>
<h1 id="osi-参考模型open-systems-interconnection"><a class="markdownIt-Anchor" href="#osi-参考模型open-systems-interconnection"></a> OSI 参考模型（Open Systems Interconnection）</h1>
<ul>
<li>该模型基于国际标准化组织（ISO，International Standards Organization）的提案，作为各层协议迈向国际标准化的第一步（Day 和 Zimmermann，1983），并且于 1995 年进行了修订（Day，1995）。</li>
<li>它涉及如何连接开放的系统——即那些为了与其他系统通信而开放的系统</li>
<li>OSI 模型有 7 层。适用于这 7 层的基本原则简要概括如下。
<ul>
<li>应该在需要一个不同抽象体的地方创建一层。</li>
<li>每一层都应该执行一个明确定义的功能。</li>
<li>每一层功能的选择应该向定义国际标准化协议的目标看齐。</li>
<li>层与层边界的选择应该使跨越接口的信息流最小。</li>
<li>层数应该足够多，保证不同的功能不会被混杂在同一层中，但同时层数又不能太多，以免体系结构变得过于庞大。</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210123233744274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /><br />
<img src="https://img-blog.csdnimg.cn/20210128151057941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="物理层physical-layer"><a class="markdownIt-Anchor" href="#物理层physical-layer"></a> 物理层（physical layer）</h2>
<ul>
<li>物理层关注在一条通信信道上传输原始比特。</li>
<li>物理层的设计主要涉及物理接口的机械电气功能和过程特性，以及物理层接口连接的传输介质等问题。</li>
<li>物理层的主要任务是在物理媒体上实现比特流的<code>透明传输</code>。物理层的传输单位是比特。</li>
</ul>
<blockquote>
<p>透明传输：指不管所传数据是什么样的比特组合，都应当能够在链路上传送。</p>
</blockquote>
<ul>
<li>物理层的功能
<ul>
<li>定义接口特性</li>
<li>定义传输模式（单工、半双工、双工）</li>
<li>定义传输速率</li>
<li>比特同步</li>
<li>比特编码（用什么电压表示1，用什么电压表示0）</li>
</ul>
</li>
</ul>
<h2 id="数据链路层data-link-layer"><a class="markdownIt-Anchor" href="#数据链路层data-link-layer"></a> 数据链路层（data link layer）</h2>
<ul>
<li>数据链路层的主要任务是把网络层传下来的IP数据报组装成帧。数据链路层/链路层的传输单位是帧。</li>
<li>数据链路层的功能
<ul>
<li>成帧（定义帧的开始和结束）</li>
<li>差错控制（帧错和位错）</li>
<li>流量控制（避免快速发送方用数据“淹没”慢速接收方）</li>
<li>访问/接入控制（控制对信道的访问）</li>
</ul>
</li>
<li>广播式网络的数据链路层还有另一个问题：如何控制对共享信道的访问。数据链路层的一个特殊子层，即<code>介质访问控制子层</code>，就是专门处理这个问题的。</li>
<li>典型的数据链路层协议有SDLC、HDLC、PPP、STP和帧中继等</li>
</ul>
<h2 id="网络层network-layer"><a class="markdownIt-Anchor" href="#网络层network-layer"></a> 网络层（network layer）</h2>
<ul>
<li>网络层的传输单位是数据报。它的主要任务是把<code>分组从源端传到目的端</code>，为分组交换网上的不同主机提供通信服务。</li>
<li>网络层的功能
<ul>
<li>路由选择</li>
<li>流量控制</li>
<li>差错控制</li>
<li>拥塞控制</li>
<li>网际互连（允许异构网络相互连接成为互联网络）</li>
</ul>
</li>
<li>在广播式网络中，路由问题比较简单，所以网络层往往比较单薄，甚至根本不存在。</li>
<li>网络层的协议有IP、IPX、ICMP、IGMP、ARP、RARP和OSPF等</li>
</ul>
<h2 id="传输层transport-layer"><a class="markdownIt-Anchor" href="#传输层transport-layer"></a> 传输层（transport layer）</h2>
<ul>
<li>传输层也称运输层，传输单位是报文段或用户数据报，传输层负责主机中两个进程之间的通信，功能是<code>为端到端连接提供可靠的传输服务</code>，为端到端连接提供流量控制、差错控制、服务质量、数据传输管理等服务。</li>
<li>传输层的基本功能是接收来自上一层的数据，在必要的时候把这些数据分割成较小的单元，然后把这些数据单元传递给网络层，<code>并且确保这些数据单元正确地到达另一端</code>。</li>
<li>传输层是真正的<code>端-端</code>的层，它自始自终将数据从源端携带到接收方。换句话说，源机器上的一个程序利用报文头和控制信息与目标机器上的一个类似程序进行会话。</li>
<li><code>点到点</code>：可以理解为主机到主机之间的通信，一个点指一个硬件地址或IP地址，网络中参与通信的主机通过硬件地址或IP地址标识的；</li>
<li><code>端到端</code>：指运行在不同主机内的两个进程之间的通信，一个进程由一个端口号来标识，所以称端到端通信</li>
<li>第 1 层到第 3 层是链式连接的，而第 4层到第 7 层是端-端的</li>
</ul>
<h2 id="会话层session-layer"><a class="markdownIt-Anchor" href="#会话层session-layer"></a> 会话层（session layer）</h2>
<ul>
<li>会话层允许不同机器上的用户建立会话。</li>
<li>向表示层实体/用户进程（运行的程序）建立连接并在连接上有序地传输数据，称为会话，也是建立同步（SYN）。</li>
<li>会话层提供的服务
<ul>
<li>对话控制（dialog control）（记录该由谁来传递数据）</li>
<li>令牌管理（token management）（禁止双方同时执行同一个关键操作）</li>
<li>同步功能（synchronization）（在一个长传输过程中设置一些断点，以便在系统崩溃之后还能恢复到崩溃前的状态继续运行）</li>
</ul>
</li>
<li>会话层利用传输层提供的<code>端到端</code>的服务，向表示层提供它的增值服务。</li>
</ul>
<h2 id="表示层presentation-layer"><a class="markdownIt-Anchor" href="#表示层presentation-layer"></a> 表示层（presentation layer）</h2>
<ul>
<li>表示层以下的各层最关注的是如何传递数据位，而表示层关注的是<code>所传递信息的语法和语义</code>。</li>
<li>不同机器采用的编码和表示方法不同，使用的数据结构不同。为了使不同的数据和信息之间能够互相交换，表示层采用抽象的标准方法定义数据结构</li>
<li>表示层管理这些抽象的数据结构，并允许定义和交<br />
换更高层的数据结构。</li>
</ul>
<h2 id="应用层application-layer"><a class="markdownIt-Anchor" href="#应用层application-layer"></a> 应用层（application layer）</h2>
<ul>
<li>应用层包含了用户通常需要的各种各样的协议。</li>
<li>应用层为特定类型的网络应用提供访问OSI环境的手段。因为用户的实际应用多种多样，就要求应用层采用不同的协议来解决不同应用类型的需求。</li>
<li>典型的协议有：文件传输协议FTP、电子邮件协议SMTP、万维网HTTP等。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210128150820759.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<h1 id="tcpip-参考模型tcpip-reference-model"><a class="markdownIt-Anchor" href="#tcpip-参考模型tcpip-reference-model"></a> TCP/IP 参考模型（TCP/IP Reference Model）</h1>
<ul>
<li>该参考模型不仅被所有广域计算机网络的鼻祖 ARPANET 所采用，而且被其继任者——全球范围的 Internet 所使用。</li>
<li>该体系结构最初由（Cerf 和 Kahn，1974）描述，后来在（Leiner等，1989）中又被重新修订并得到 Internet 团体的标准化。TCP/IP 模型背后的设计思想在（Clark，1988）中进行了详细讨论。<br />
<img src="https://img-blog.csdnimg.cn/2021012814564648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
<li>设计目标
<ul>
<li>以无缝的方式将多个网络连接起来</li>
<li>是即使在损失子网硬件的情况下网络还能够继续工作，原有的会话不能被打断</li>
<li>这些要求导致本参考模型选择了<code>数据包交换网络</code>，它以一个<code>可运行在不同网络之上的无连接网络层</code>为基础。</li>
</ul>
</li>
</ul>
<h2 id="链路层"><a class="markdownIt-Anchor" href="#链路层"></a> 链路层</h2>
<ul>
<li>该层描述了链路必须完成什么功能才能满足无连接的互联网络层的需求，比如串行线和经典以太网链路。</li>
<li><code>这不是真正意义上的一个层，而是主机与传输线路之间的一个接口。</code></li>
</ul>
<h2 id="互联网层internet-layer"><a class="markdownIt-Anchor" href="#互联网层internet-layer"></a> 互联网层（internet layer）</h2>
<ul>
<li>互联网层是将整个网络体系结构贯穿在一起的关键层。它大致对应于OSI 的网络层。</li>
<li>该层的任务是允许主机将数据包注入到任何网络，并且让这些数据包独立地到达接收方（接收方可能在不同的网络上）。</li>
<li>互联网层定义了官方的数据包格式和协议，该协议称为		<code>因特网协议</code>（IP，Internet Protocol），与之相伴的还有一个辅助协议，称为<code>因特网控制报文协议</code>（ICMP，Internet Control Message Protocol）。</li>
<li>数据包的路由是该层最主要的问题，同时该层还要考虑拥塞控制问题。</li>
</ul>
<h2 id="传输层"><a class="markdownIt-Anchor" href="#传输层"></a> 传输层</h2>
<ul>
<li>它的设计目标是允许源主机和目标主机上的对等实体进行对话，犹如 OSI 的传输层一样。</li>
<li>这里定义了两个<code>端-端</code>的传输协议
<ul>
<li><code>传输控制协议</code>（TCP，Transport Control Protocol）
<ul>
<li>它是一个<code>可靠的、面向连接的协议</code>，允许从一台机器发出的字节流正确无误地交付到互联网上的另一台机器。</li>
<li>它把输入的字节流分割成离散的报文，并把每个报文传递给互联网层。</li>
<li>在目标机器，接收 TCP 进程把收到的报文重新装配到输出流中。</li>
<li>TCP 还负责处理流量控制。</li>
</ul>
</li>
<li><code>用户数据报协议</code>（UDP，User Datagram Protocol）
<ul>
<li>它是一个<code>不可靠的、无连接协议</code>，适用于那些不想要 TCP 的有序性或流量控制功能，而宁可自己提供这些功能的应用程序。</li>
<li>UDP 被广泛应用于那些一次性的基于客户机-服务器类型的<code>“请求应答”查询应用</code>，以及那些<code>及时交付比精确交付更加重要</code>的应用，比如传输语音或者视频。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="应用层"><a class="markdownIt-Anchor" href="#应用层"></a> 应用层</h2>
<ul>
<li>TCP/IP 模型并没有会话层和表示层，应用层简单包含了所需的任何会话和表示功能。</li>
<li>它包含了所有的高层协议。
<ul>
<li>虚拟终端协议（TELNET）</li>
<li>文件传输协议（FTP）</li>
<li>电子邮件协议（SMTP）</li>
<li>将主机名字映射到它们网络地址的域名系统（DNS，Domain NameSystem）</li>
<li>用于获取万维网页面的 HTTP</li>
<li>用于传送诸如语音或者电影等实时媒体的<br />
RTP</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210128150935106.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h1 id="五层混合模型"><a class="markdownIt-Anchor" href="#五层混合模型"></a> 五层混合模型</h1>
<p><img src="https://img-blog.csdnimg.cn/20210128145907931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_11,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /><br />
<img src="https://img-blog.csdnimg.cn/20210128151315178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="模型结构"><a class="markdownIt-Anchor" href="#模型结构"></a> 模型结构</h2>
<ul>
<li>物理层规定了如何在不同的介质上以电气（或其他模拟）信号传输比特。</li>
<li>链路层关注的是如何在两台直接相连的计算机之间发送有限长度的消息，并具有指定级别的可靠性。以太网和 802.11是链路层协议的例子。</li>
<li>网络层主要处理如何把多条链路结合到网络中，以及如何把网络与网络联结成互联网络，以便使我们可以在两个相隔遥远的计算机之间发送数据包。<code>网络层的任务包括找到传递数据包所走的路径</code>。IP 是我们将要学习的网络层主要协议案例。</li>
<li>传输层增强了网络层的传递保证，通常具有更高的可靠性，而且提供了数据交付的抽象，比如满足不同应用需求的可靠字节流。TCP 是传输层协议的一个重要实例。</li>
<li>应用层包含了使用网络的应用程序。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20210128151021347.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="数据传输"><a class="markdownIt-Anchor" href="#数据传输"></a> 数据传输</h2>
<p><img src="https://img-blog.csdnimg.cn/20210128151245633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h1 id="osi-参考模型与-tcpip-参考模型的比较"><a class="markdownIt-Anchor" href="#osi-参考模型与-tcpip-参考模型的比较"></a> OSI 参考模型与 TCP/IP 参考模型的比较</h1>
<p><img src="https://img-blog.csdnimg.cn/20210128160922339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></p>
<h2 id="相同点"><a class="markdownIt-Anchor" href="#相同点"></a> 相同点</h2>
<ul>
<li>两者都以协议栈概念为基础，并且协议栈中的协议彼此相互独立。</li>
<li>两个模型中各个层的功能也大致相似。例如，在两个模型中，<code>传输层以及传输层以上各层都为希望通信的进程提供了一种端-端的独立于网络的传输服务</code>。</li>
<li>在这两个模型中，传输层之上的各层都是传输服务的用户，并且是面向应用的。</li>
</ul>
<h2 id="不同点"><a class="markdownIt-Anchor" href="#不同点"></a> 不同点</h2>
<table>
<thead>
<tr>
<th style="text-align:left">OSI(Open System Interconnection)</th>
<th style="text-align:left">TCP/IP(Transmission Control Protocol / Internet Protocol)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">OSI模型中清晰地定义了服务,接口和各种协议. OSI模型是协议独立的</td>
<td style="text-align:left">TCP/IP模型中定义的服务,接口和各种协议并不能明确地区分. TCP/IP模型是协议独立的</td>
</tr>
<tr>
<td style="text-align:left">OSI 参考模型在协议发明之前就已经产生，这意味着 OSI 模型不会偏向于任何一组特定的协议，这个事实使得 OSI 模型更具有通用性。</td>
<td style="text-align:left">协议先出现，TCP/IP 模型只是已有协议的一个描述，所以协议与模型高度吻合。但是TCP/IP 模型并不适合任何其他协议栈。</td>
</tr>
<tr>
<td style="text-align:left">OSI参考模型最初只考虑到用一种标准的公用数据网将各种不同的系统互联</td>
<td style="text-align:left">TCP/IP 模型在设计之初就考虑到了多种异构网的互联问题，并将网际协议（IP）作为一个单独的重要层次</td>
</tr>
<tr>
<td style="text-align:left">OSI 模型的网络层同时支持无连接和面向连接的通信，但是传输层只支持面向连接的通信</td>
<td style="text-align:left">TCP/IP 模型在网络层只支持一种模式（无连接），但是在传输层同时支持两种通信模式</td>
</tr>
</tbody>
</table>
<h1 id="osi-模型和协议的评判"><a class="markdownIt-Anchor" href="#osi-模型和协议的评判"></a> OSI 模型和协议的评判</h1>
<h2 id="糟糕的时机"><a class="markdownIt-Anchor" href="#糟糕的时机"></a> 糟糕的时机</h2>
<ul>
<li>一个标准在什么时候建立对于该标准的成功与否绝对非常重要的。MIT 的 David Clark 有一个关于标准的理论，他称之为两头大象的启示<br />
<img src="https://img-blog.csdnimg.cn/20210128163916581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDAxMTU2,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload alt="" /></li>
<li>当 OSI 协议出现的时候，与之竞争的 TCP/IP 协议已经被广泛地应用于大学和科研机构。虽然几十亿美元的投资热潮尚未开始，但是，学术市场足够大，使得许多厂商开始谨慎地提供 TCP/IP 产品。当 OSI 出现的时候，这些厂商并不想支持第二个协议栈，除非他们被迫这样做，因此 OSI 没有得到初始的投入。</li>
</ul>
<h2 id="糟糕的技术"><a class="markdownIt-Anchor" href="#糟糕的技术"></a> 糟糕的技术</h2>
<ul>
<li>之所以选择 7 层的原因很大程度上是出于政策上的考虑，而非技术因素所决定。其中的两层（会话层和表示层）几乎是空的，而另外两层（数据链路层和网络层）又包含了太多内容。</li>
<li>OSI 模型以及相应的服务定义和协议都极其复杂。它们难以实现，而且操作起来也很低效。</li>
</ul>
<h2 id="糟糕的实现"><a class="markdownIt-Anchor" href="#糟糕的实现"></a> 糟糕的实现</h2>
<ul>
<li>由于 OSI 模型和协议过于复杂，最初的那些实现不仅庞大，而且很笨拙，效率也很慢。</li>
<li>相反，TCP/IP 的早期实现之一是作为 Berkeley UNIX 的一部分，运行非常好（更不用说它是免费的）。很快，人们就开始使用它，进而形成了一个庞大的用户群，这进一步促进了它的提高和改进，然后又导致了更大的用户群。这是螺旋式上升而不是下降。</li>
</ul>
<h2 id="糟糕的政策"><a class="markdownIt-Anchor" href="#糟糕的政策"></a> 糟糕的政策</h2>
<ul>
<li>由于 TCP/IP 最初的实现，很多人（特别在学术界）都把 TCP/IP 看作是 UNIX 的一部分，而 UNIX 在 20 世纪 80 年代的学术圈中盛极一时，备受宠爱。</li>
<li>相反，OSI 则被认为是欧洲电信部门、欧共体以及后来的美国政府的产物。尽管这种观点部分是正确的，但是政府官僚们试图把技术上不足的标准强加给那些实际开发计算机网络的可怜的研究人员和程序员，而政府部门的强制性对 OSI 无济于事。</li>
</ul>
<h1 id="tcpip-参考模型的评判"><a class="markdownIt-Anchor" href="#tcpip-参考模型的评判"></a> TCP/IP 参考模型的评判</h1>
<ul>
<li>该模型并没有明确区分服务、接口和协议的概念。因此，在使用新技术来设计新网络时，TCP/IP 模型并不是一个很好的参照物。</li>
<li>TCP/IP 模型一点也不通用，它并不适合于用来描述TCP/IP 之外的任何其他协议栈。例如，试图使用TCP/IP 模型来描述蓝牙（Bluetooth）是完全不可能的。</li>
<li>在分层协议的上下文中，<code>链路层并不是通常意义上的一层。它是一个接口</code>（位于网络层和数据链路层之间），而接口和层的区别非常重要。</li>
<li><code>TCP/IP 模型并没有区分物理层和数据链路层</code>。这是两个完全不同的层。物理层必须要考虑铜线、光纤和无线通信的传输特征；而数据链路层的任务则是确定帧的开始和结束，并且按照所需的可靠程度把帧从一边发送到另一边。一个正确的模型应该包括这两个独立的层，TCP/IP 模型没有这样做。</li>
</ul>
<hr />
<h1 id="物理层"><a class="markdownIt-Anchor" href="#物理层"></a> 物理层</h1>
<p><img src="https://s2.loli.net/2022/01/05/qUAa1tnOEdfN2rH.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<h2 id="基础概念"><a class="markdownIt-Anchor" href="#基础概念"></a> 基础概念</h2>
<ul>
<li>数据、信号、码元
<ul>
<li>
<p>数据是值传送信息的实体。信号是数据的电气或电磁表现，是数据传输过程中的存在形式。</p>
</li>
<li>
<p>数据和信号都可以用“模拟的”或“数字的”修饰</p>
<ul>
<li><code>连续变化</code>的数据或信号成为模拟数据或信号</li>
<li>取值仅允许为<code>有限的几个离散数值</code>的数据或信号成为数字数据或信号</li>
</ul>
</li>
<li>
<p>数据的传输方式可以分为串行传输和并行传输</p>
<ul>
<li>串行传输指<code>一个个比特按照时间顺序传输</code></li>
<li>并行传输指<code>多个比特通过多条信道同时传输</code></li>
</ul>
</li>
<li>
<p>码元是指<code>用一个固定时长的信号波形（数字脉冲）表示一位k进制数字</code>，代表不同离散数值的基本波形。这个时长内的信号称为k进制码元，该时长称为<code>码元宽度</code>。</p>
<ul>
<li>1码元可以携带多个比特的信息量，例如，在使用二进制编码时，有两种不同的码元：0状态和1状态</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/g6GY3WOS2Twu5hJ.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>速率、波特、带宽</p>
<ul>
<li>速率也叫数据率，是指数据的<code>传输速率</code>，表示单位时间内传输的数据量。可以用<code>码元传输速率</code>和<code>信息传输速率</code>来表示
<ul>
<li>码元传输速率/码元速率/波形速率/调制速率：表示单位时间内数字通信系统所传输的码元个数（也可称为<code>脉冲个数或信号变化的次数</code>），单位是<b>波特(Baud)</b>。
<ul>
<li>1波特表示数字通信系统每秒传输一个码元，码元可以是多进制的。</li>
</ul>
</li>
</ul>
</li>
<li>信息传输速率/信息速率/比特率：表示单位时间内数字通信系统传输的<code>二进制码元</code>个数（即比特数），单位是b/s</li>
</ul>
<blockquote>
<p>若一个码元携带n bit的信息量，则M Baud的码元传输速率所对应的信息传输速率为 n * M bit/s<br><br />
若一个码元为K进制码元，则M Baud的码元传输速率所对应的信息传输速率为 M * <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>K</mi></mrow><annotation encoding="application/x-tex">log_2K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span></span></span></span> bit/s</p>
</blockquote>
<ul>
<li>带宽：表示单位时间内从网络中某一点到另一点所能通过的<code>最高数据率</code>，单位是b/s</li>
</ul>
<hr />
</li>
<li>
<p>信源、信道、信宿</p>
<ul>
<li>
<p>信源时产生和发送数据的源头。信宿是接收数据的终点。</p>
</li>
<li>
<p>信道和电路不同，<code>信道是信号的传输媒介</code>。</p>
</li>
<li>
<p>模拟通信系统和数字通信系统</p>
<ul>
<li>普通的电话、广播、电视等都属于模拟通信系统</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/qjtHuEV7S4InkRU.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>计算机通信、数字电话以及数字电视都属于数字通信系统</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/U3myY5c8pgHAzTR.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>数据的同步技术
<ul>
<li>
<p>异步传输</p>
<ul>
<li>没有时钟，用户可以随时发送信号</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/bHzNT2R9ZmDV1Et.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>异步通信实现容易，但每传输一个字符要多使用2~3位，适用于低速通信</li>
</ul>
</li>
<li>
<p>同步传输</p>
<ul>
<li>在线路中嵌入时钟，强制用户基于时钟通信</li>
<li>不需要附加起始位和停止位，<code>在发送一组字符或数据块之前要发送一个同步字符</code>，用于接收方同步检测</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/UydIWNrQ1bn9mvP.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>信道的通信方式</p>
<ul>
<li>单工通信</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/mGzMEU3gjVZQNF5.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>半双工通信</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/kGhXliry3JpdxsK.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>全双工通信</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/x947mOE1Rq3pGw5.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
</li>
</ul>
<hr />
<ul>
<li>信号的传输方式
<ul>
<li>基带传输
<ul>
<li>数字信号是一个离散的方波，“0”代表低电平，“1”代表高电平，<code>这种方波固有的频带称为基带，方波信号称为基带信号</code></li>
<li><code>基带实际上就是数字信号所占用的基本频带</code></li>
<li>基带传输就是在信道直接传输数字信号。</li>
</ul>
</li>
<li>频带传输
<ul>
<li>频带传输是指<code>将数字信号调制成音频信号再发送和传输，到达接收端时再把音频信号解调成原来的数字信号</code></li>
<li>利用频带传输，可以实现多路复用，提高信道利用率</li>
</ul>
</li>
<li>宽带传输
<ul>
<li>宽带传输采用75 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ω</span></span></span></span> 的CATV电视同轴电缆或光纤作为传输媒体，带宽为300MHz。</li>
<li>使用时通常<code>将整个带宽划分为若干个子频带</code>，可以利用宽带传输实现声音、文字和图像的一体化传输。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="数据通信的理论基础"><a class="markdownIt-Anchor" href="#数据通信的理论基础"></a> 数据通信的理论基础</h2>
<h3 id="傅里叶变换"><a class="markdownIt-Anchor" href="#傅里叶变换"></a> 傅里叶变换</h3>
<p><img src="https://s2.loli.net/2022/01/05/dbsiCLBOxA8u1Vy.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>计算时，n取值越大（谐波数越大），计算值越接近真实值，但是谐波数越多，计算时间越长，信号传输越慢。</li>
</ul>
<hr />
<h3 id="信道的最大数据速率"><a class="markdownIt-Anchor" href="#信道的最大数据速率"></a> 信道的最大数据速率</h3>
<ul>
<li>Nyquist’s theorem
<ul>
<li>适用于无噪声信道</li>
<li>如果一个任意信号通过了一个带宽为B的低通滤波器，那么只要进行<code>每秒 2B 次（确切）采样（极限码元传输速率为2B Baud ）</code>，就可以完全重构出被过滤的信号。</li>
<li>如果信号包含了<code>V个离散等级</code>，则尼奎斯特的定理为：$$最大比特率,=,2B,log_2V,bits/sec$$</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>Shannon’s theorem
<ul>
<li>热噪声的数量可以用<code>信号功率与噪声功率的比值</code>来度量，这样的比值称为信噪比 <code>SNR, Signal-to-Noise Ratio ）</code></li>
<li>将信号功率记作S，噪声功率记作N，则信噪比为 S/N 。通常情况下为了适用很大的范围，该比率表示成对数形式<b> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>10</mn></msub><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">10log_{10}S/N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> </b>，对数的取值单位称为分贝(dB, decibel)。</li>
<li>对于一条带宽为BHz 、噪声比是 S/N 的有噪声信道，其最大数据速率或者容量(capacity)是$$最大比特率,=,B,log_2(1+S/N) $$</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/7radiwyMJfNGbjU.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<hr />
<h2 id="数据编码与调制"><a class="markdownIt-Anchor" href="#数据编码与调制"></a> 数据编码与调制</h2>
<ul>
<li>
<p>数据为了传输的目的都需要转变成信号。把数据变为模拟信号的过程称为<code>调制</code>，把数据变为数字信号的过程称为<code>编码</code></p>
</li>
<li>
<p>数字数据可以通过数字发送器转换为数字信号传输，也可以通过调制器转换成模拟信号传输；模拟数据可以通过PCM编码器转换成数字信号传输，也可以通过放大器调制器转换成模拟信号传输</p>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/lXPnpWYDI6fvhC3.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<hr />
<h3 id="数字数据编码为数字信号"><a class="markdownIt-Anchor" href="#数字数据编码为数字信号"></a> 数字数据编码为数字信号</h3>
<ul>
<li>数字信号<code>用于基带传输</code>，在基本不改变数字数据信号频率的情况下，直接传输数字信号。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/5f8TXgMBoZ6vq4G.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ol>
<li>
<p>归零编码(RZ)</p>
<ul>
<li>高电平代表1、低电平代表0，<code>每个时钟周期的中间都跳到低电平</code></li>
<li>接收方根据跳变调整时钟基准，从而实现同步。</li>
<li>归零要占用一部分带宽，传输效率受影响。</li>
</ul>
</li>
<li>
<p>非归零编码(NRZ)</p>
<ul>
<li>和归零编码的区别是<code>不用归零</code>，一个周期都可以用来传输数据</li>
<li>但是无法传输时钟信号，难以同步。</li>
</ul>
</li>
<li>
<p>反向非归零编码(NRZI)</p>
<ul>
<li>用信号的<code>翻转代表0</code>、信号保持不变代表1.</li>
<li>反转本身可以作为通知机制，既能传输时钟信号，又不损失带宽</li>
<li>NRZI编码会遇到一个严重问题，当连续发送多位&quot;0&quot;或&quot;1&quot;信号，会造成数据信号长时间不翻转，时读取的时序发生错误，因此需要执行位填充。</li>
</ul>
</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/UtlzH68mE3IjAuQ.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ol start="4">
<li>
<p>曼彻斯特编码(Manchester Encoding)</p>
<ul>
<li>将一个码元分成两个相等的间隔，<code>前一个间隔为高电平而后一个间隔为低电平代表码元1</code>；码元0则相反。</li>
<li>位中间的跳变既作为时钟信号，又作为数据信号，<code>但是它占用的频带带宽为原始基带带宽的两倍</code></li>
</ul>
</li>
<li>
<p>差分曼彻斯特编码</p>
<ul>
<li>码元为1，前半个码元的电平与上一码元的后半个码元电平相同；码元为0则相反。</li>
<li>每个码元中间有电平跳转，可实现自同步，抗干扰性好</li>
</ul>
</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/SVi2rgNIBzkbequ.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ol start="6">
<li>4B/5B映射
<ul>
<li>将要发送数据流的每4位作为一组，按照4B/5B编码规则转换为相应的5位码。</li>
</ul>
</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/BPODYHfsw23Ap6j.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<div class="code-wrapper"><pre><code class="hljs"> - 5位码共32种组合，只采用其中16种对应4位码，其他的16种作为控制码或保留
</code></pre></div>
<hr />
<h3 id="数字数据调制为模拟信号"><a class="markdownIt-Anchor" href="#数字数据调制为模拟信号"></a> 数字数据调制为模拟信号</h3>
<ul>
<li>根据信道中传输的信号是否经过调制，将系统分为基带传输系统和<code>通带</code>传输系统。即经过调制的数字传输系统就是数字带通传输系统，未经过调制的传输系统就是数字基带传输系统。</li>
<li>数字调制可<code>借助通带传输完成</code>，即针对通带内的载波信号进行调节或调制。我们可以调制载波信号的<code>振幅、频率或相位。</code></li>
</ul>
<hr />
<p><img src="https://s2.loli.net/2022/01/05/o5biT6xJ4ya8zOB.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ol>
<li>
<p>幅移键控ASK</p>
<ul>
<li>通过改变载波信号的<code>振幅</code>来表示数字信号0和1</li>
<li>比较容易实现，但是抗干扰能力差</li>
</ul>
</li>
<li>
<p>频移键控FSK</p>
<ul>
<li>通过改变载波信号的<code>频率</code>来表示数字信号0和1</li>
<li>容易实现，抗干扰能力强，应用广泛</li>
</ul>
</li>
<li>
<p>相移键控PSK / 二进制相移键控BPSK</p>
<ul>
<li>通过改变载波信号的<code>相位</code>来表示数字信号0和1</li>
</ul>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>正交振幅调制QAM</p>
<ul>
<li>频率和相位有关，即<code>频率是相位随时间的变化率</code>，所以一次只能调制频率和相位两个中的一个。</li>
<li>通常情况下，<code>振幅和相位可以结合起来一起调制</code>。可以把这些调制模式结合起来综合使用，以便使每个符号传输更多的比特。</li>
<li>在频率相同的前提下，将ASK和PSK结合起来，形成叠加信号。设波特率为<code>B</code>，采用<code>m</code>个相位，每个相位有<code>n</code>种振幅，则QAM技术的数据传输率<code>R</code>为 $$R = Blog_2(mn),b/s$$</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/Kx4aW9P76sLMGgN.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>这种类型的图称为星座图(constellation diagram)</li>
<li>一个点的<code>相位是以它为起点到原点的线与x正轴之间的角度</code>来表示，一个点的<code>振幅则是该点到原点的距离</code>。</li>
<li>图(b)采用了振幅和相位的16种组合，因此可用每个符号传输4个比特，这种调制方式称为 <code>QAM-16</code></li>
</ul>
</li>
</ol>
<hr />
<h3 id="模拟数据编码为数字编码"><a class="markdownIt-Anchor" href="#模拟数据编码为数字编码"></a> 模拟数据编码为数字编码</h3>
<ul>
<li>
<p>模拟传输</p>
<ul>
<li>
<p><code>调幅、调频、调相</code></p>
</li>
<li>
<p>脉冲编码调制PCM</p>
<p><img src="https://s2.loli.net/2022/01/05/XIzRWQ9GdsviESV.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li><code>采样定理</code>：<code>带宽是指信号最高频率与最低频率之差</code>，单位为Hz。因此，将模拟信号转换为数字信号时，假设原始信号中的最大频率为f，那么采样频率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mrow><mi mathvariant="normal">采</mi><mi mathvariant="normal">样</mi></mrow></msub></mrow><annotation encoding="application/x-tex">f_{采样}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.15em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">采</span><span class="mord cjk_fallback mtight">样</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> <code>必须大于等于最大频率f的两倍</code>，才能保证采样后的数字信号完整保留原始信息。（奈奎斯特定理）</li>
<li>脉码调制的过程又<b>取样、量化和编码</b>三步构成
<ul>
<li>取样：按照一定的时间间隔采样测量模拟信号幅值</li>
<li>量化：将取样点处测得的信号幅值分级取整的过程</li>
<li>编码：将量化后的整数值用二进制里表示。</li>
</ul>
</li>
</ul>
<blockquote>
<p>脉码调制中，分级取证量化时引进了误差。<code>分级越细，误差越小，但是每个样本点编码所需的比特数越多</code></p>
</blockquote>
<p><img src="https://s2.loli.net/2022/01/05/63fja9XuJlAgyQn.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<p><img src="https://s2.loli.net/2022/01/05/SErPD3ZpoaeMCjn.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="模拟数据调制为模拟信号"><a class="markdownIt-Anchor" href="#模拟数据调制为模拟信号"></a> 模拟数据调制为模拟信号</h3>
<ul>
<li>为了实现传输的有效性，可能需要较高的频率。这种调制方式还可以使用频分复用(FDM)技术，充分利用带宽资源</li>
<li>电话机和本地局交换机采用模拟信号传输模拟数据的编码方式：<code>模拟的声音数据是加载到模拟的载波信号中传输的</code></li>
</ul>
<hr />
<h2 id="多路复用技术"><a class="markdownIt-Anchor" href="#多路复用技术"></a> 多路复用技术</h2>
<ul>
<li>多路复用：技术就是把许多信号在单一的传输线路和用单一的传输设备来进行传输的技术</li>
</ul>
<hr />
<ul>
<li>
<p>频分复用(FDM，Frequency Division Multiplexing)</p>
<ul>
<li>将频谱分成几个频段，每个用户完全拥有其中的一个频段来发送自己的信号</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/gHu67l8fOWs5IxJ.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>比语音通信所需多出来的那部分频带称为<code>保护带(guardband)</code>，它使信道之间完全隔离。但是相邻信道之间仍然可能存在某种重叠。</li>
<li>采用频分多路复用时，每个信道的频率会得到不同程度的<code>提升</code></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/vXRKPrNmsY5uwGp.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>发送数字数据时完全有可能把频谱更有效率地划分成<code>没有保护带</code>。</li>
<li>在<code>正交频分复用</code>(OFDM, Orthogonal Frequency Division Multiplexing)中，信道带宽被分成许多独立发送数据的子载波（例如 QAM ）。</li>
<li>子载波在频域中被紧紧地包裹在一起。因此，从每个子载波发出的信号能扩散到相邻子载波。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>波分多路复用(WDM，Wavelength Division Multiplexing)</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/UBQzvARDKafqort.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>每条光纤的能量位于不同的波长处。四束光波被<code>组合到一条共享的光纤上</code>，然后传输给远处的接收方。</li>
<li>在远端，这束光又被分离到与输入端一样多的光纤上。</li>
</ul>
<hr />
<ul>
<li>
<p>时分多路复用(TDM, Time Division Multiplexing)</p>
<ul>
<li>用户以<code>循环</code>的方式轮流工作。每个用户<code>周期性地获得整个带宽非常短的一个时间</code>（类似单CPU多进程过程）</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/HUVGQvkiaR42LPO.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>基于 PCM 的 TDM 可在中继线上运送多路电话语音，<code>每 125 微秒</code>为每路电话发送一个语音样值。</li>
<li>北美和日本地区使用的是 Tl 载波 <code>Tl carrier</code> ，Tl 载波包含 <code>24 条被复用在一起的语音信道</code>，每个信道依次将8比特的样值插入到输出流中。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/AKpiMg8SoZdaEJW.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>每帧包含<code>24 * 8=192</code>个比特，再加上<code>额外一个比特用于控制</code>，因而<code>每 125 微秒产生 193个比特。</code></li>
<li>这样得到的数据传输率为 1.544 Mbps ，其中8 kbps 用于信令控制。第 193 个比特用于帧同步和信令。</li>
<li>时分多路复用允许将多个 Tl 载波复用到一个更高阶的载波中。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/7fOCkTt6IpyJiYV.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>在北美及日本以外地区，使用<code>2.048 Mbps</code>的<code>El 载波</code>代替 Tl 载波。 El 载波有 <code>32个8比特</code>数据样值被封装在<code>125 微秒</code>的帧中。</li>
<li>32 个信道中的 <code>30 个用于传输</code>信息，其余<code>2个信道用作信令</code>。每四个帧为一组，提供了 64 个信令比特，其中一半用于信令（是否信道相关或共同信道），另一半用于帧同步或各个国家保留使用。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>码分多路复用(CDM，Code Division Multiplexing )</p>
<ul>
<li>扩展频谱(spread spectrum)通信的一种形式，它<code>把一个窄带信号扩展到一个很宽的频带上</code>。这种方法更能容忍干扰。</li>
<li><code>码分多址(CDMA, Code Division Multiple Access)</code>：允许来自不同用户的多个信号共享相同的频带</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/LglbW7vdqjtnQxz.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>
<p>在CDMA中，每个比特时间再划分为m个短的间隔，成为码片，通常m值为64或128，一般m=8，规则如下：</p>
<ol>
<li>使用CDMA的每一个站被指派一个唯一的m bit码片序列，一个站<code>如果要发送比特1，则发送它自己的m bit码片序列</code>，<code>如果要发送0，则发送该码片序列的二进制反码</code>，按照惯例将码片中的0写成-1，将1写成+1</li>
<li><code>CDMA给每一个站分配的码片序列不仅必须各不相同，并且还必须互相正交</code></li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/n8ak6EIMiGYFRhe.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ol start="3">
<li>任何一个码片向量和该码片向量自己的规格化内积都是1，任何一个码片向量和该码片的反码的向量的规格化内积都是-1</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="数据交换技术"><a class="markdownIt-Anchor" href="#数据交换技术"></a> 数据交换技术</h2>
<h3 id="电路交换"><a class="markdownIt-Anchor" href="#电路交换"></a> 电路交换</h3>
<ul>
<li>在进行数据交换前，两个结点之间必须<code>建立一条专用（双方独占）的物理通信路径</code>。这一路径在整个数据传输期间一直被独占，直到通信结束之后才释放。</li>
<li>电路交换技术分为三个阶段：连接建立、数据传输和连接释放。</li>
<li>电路交换技术的优点：
<ol>
<li>通信时延小</li>
<li>有序传输</li>
<li>没有冲突</li>
<li>适用范围广</li>
<li>实时性强</li>
<li>控制简单</li>
</ol>
</li>
<li>电路交换的缺点：
<ol>
<li>建立连接时间长</li>
<li>线路独占，效率低下</li>
<li>灵活性差</li>
<li>难以规格化</li>
</ol>
</li>
<li>电路建立后，除源节点和目的节点外，电路上的任何节点都采取“直通方式”接收数据和发送数据，<code>不存在存储转发消耗的时间</code></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/FdTDwBVKNojc5Gi.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<hr />
<h3 id="报文交换"><a class="markdownIt-Anchor" href="#报文交换"></a> 报文交换</h3>
<ul>
<li>数据交换的单位是<code>报文</code>，报文携带有目标地址、源地址等消息。报文交换在交换结点采用的是<code>存储转发</code>的传输方式</li>
<li>报文交换技术的优点：
<ol>
<li>无需建立连接</li>
<li>动态分配线路</li>
<li>提高线路可靠性</li>
<li>提高线路利用率</li>
<li>提供多目标服务</li>
</ol>
</li>
<li>报文交换技术的缺点：
<ol>
<li>存在转发时延</li>
<li>网络节点需要较大的缓存</li>
<li>报文交换主要是用在早期的电报通信网中，现在较少使用。</li>
</ol>
</li>
</ul>
<hr />
<h3 id="分组交换"><a class="markdownIt-Anchor" href="#分组交换"></a> 分组交换</h3>
<ul>
<li>分组交换也采用存储转发的方式，但解决了报文交换中大报文传输的问题：
<ul>
<li>分组交换<code>限制了每次传送的数据块的上限</code>，把大的数据块划分为合理的小数据块，再加上一些控制信息，构成分组(Packet)</li>
</ul>
</li>
<li>网络结点根据控制信息把分组送到下一结点，下一结点接收到分组后，<code>暂时保存并排队等待传输</code>，然后根据控制信息选择下一结点，直到目的结点。</li>
<li>分组交换的优点：
<ol>
<li>无建立时延</li>
<li>线路利用率高</li>
<li>简化存储管理（因为分组长度固定，缓冲区的大小也固定）</li>
<li>加速传输（后一个分组的存储操作和前一个分组的转发操作可以并行）</li>
<li>减少了出错概率和重发数据量</li>
</ol>
</li>
<li>分组交换的缺点：
<ol>
<li>存在传输时延，结点交换机需要更强处理能力</li>
<li>需要传输额外的信息量</li>
<li>可能会出现失序、丢失或者重复分组</li>
</ol>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/3SY1lpPFuWbE2vd.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<p><img src="https://s2.loli.net/2022/01/06/s2HIT7k3gnUJwQ5.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<hr />
<h2 id="传输介质"><a class="markdownIt-Anchor" href="#传输介质"></a> 传输介质</h2>
<h3 id="导向性传输介质"><a class="markdownIt-Anchor" href="#导向性传输介质"></a> 导向性传输介质</h3>
<ul>
<li>电磁波被导向沿着固体媒介传播</li>
</ul>
<hr />
<ol>
<li>双绞线</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/09/rQJf5H4noDeCWGy.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>是古老、又最常用的传输介质，由<code>两根</code>采用一定规则并排<code>绞合</code>的、相互绝缘的铜导线组成
<ul>
<li>绞合可以减少对相邻导线的电磁干扰</li>
</ul>
</li>
<li>模拟传输和数字传输都可以使用双绞线，通信距离一般为几公里到数十公里
<ul>
<li>距离太远时，对于模拟传输，需要<code>放大器</code>放大衰减的信号；对于数字传输，要用<code>中继器</code>将失真的信号整形</li>
</ul>
</li>
</ul>
<hr />
<ol start="2">
<li>同轴电缆</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/09/btiY1HkvrsxZCXp.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>根据传输信号不同可以分为<code>基带同轴电缆</code>，主要传输基带数字信号；和宽带同轴电缆，主要用于传送宽带信号。</li>
<li>同轴电缆抗干扰特性比双绞线好，传输距离更远，但是更贵</li>
</ul>
<hr />
<ol start="3">
<li>光纤</li>
</ol>
<ul>
<li>利用光导纤维传递光脉冲来通信，有光脉冲表示1，反之为0</li>
<li>可见光频率高，因此光纤通信系统的带宽远远大于其他媒介。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/cRyJVPL6mbFHGAq.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<p><img src="https://s2.loli.net/2022/01/05/FZsaPzr3NeKWIRH.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>特点：
<ol>
<li>传输损耗小，中继距离长，远距离传输经济</li>
<li>抗雷电和电磁干扰性能好</li>
<li>无串音干扰，保密性好</li>
<li>体积小，重量轻</li>
</ol>
</li>
</ul>
<hr />
<h3 id="非导向性传输介质"><a class="markdownIt-Anchor" href="#非导向性传输介质"></a> 非导向性传输介质</h3>
<ul>
<li>自由空间，介质可以是空气、真空、海水等</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/s7Htdki3TZEgXox.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<hr />
<h2 id="物理层设备"><a class="markdownIt-Anchor" href="#物理层设备"></a> 物理层设备</h2>
<ul>
<li>中继器</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/gulYI2oa4bwtnKV.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<ul>
<li>集线器</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/fzgbxS2KdN4D7k6.png" srcset="/img/loading.gif" lazyload alt="" title="图片title" /></p>
<hr />
<h1 id="数据链路层"><a class="markdownIt-Anchor" href="#数据链路层"></a> 数据链路层</h1>
<h2 id="数据链路层的设计问题"><a class="markdownIt-Anchor" href="#数据链路层的设计问题"></a> 数据链路层的设计问题</h2>
<h3 id="数据链路层的功能"><a class="markdownIt-Anchor" href="#数据链路层的功能"></a> 数据链路层的功能</h3>
<ul>
<li>向网络层提供一个定义良好的服务接口</li>
<li>处理传输错误</li>
<li>调节数据流，确保慢速的接收方方不会被快速的发送方淹没。</li>
</ul>
<h2 id="example"><a class="markdownIt-Anchor" href="#example"></a> <img src="https://s2.loli.net/2022/01/05/87oLN2Pt9sk5wGZ.png" srcset="/img/loading.gif" lazyload alt="example" title="数据包和帧的关系" /></h2>
<h3 id="提供给网络层的服务"><a class="markdownIt-Anchor" href="#提供给网络层的服务"></a> 提供给网络层的服务</h3>
<p>一般情况下，数据链路层通常会提供以下三种可能的服务：</p>
<ol>
<li>无确认的无连接服务</li>
</ol>
<ul>
<li>无确认的无连接服务是指源机器向目标机器发送独立的帧，<code>目标机器并不对这些帧进行确认。</code></li>
<li>采用这种服务，事先不需要建立逻辑连接，事后也不用释放逻辑连接。</li>
<li>若由于线路的噪声而造成了某一帧的丢失，<code>数据链路层并不试图去检测这样的丢帧情况，更不会去试图恢复丢失的帧。</code></li>
<li>这类服务适合两种场合：
<ul>
<li><code>第一种是错误率很低的场合</code>，此时差错恢复过程可以留给上层来完成</li>
<li><code>第二种是实时通信</code>，比如语音传输，因为在实时通信中数据迟到比数据受损更糟糕。</li>
</ul>
</li>
</ul>
<hr />
<ol start="2">
<li>有确认的无连接服务</li>
</ol>
<ul>
<li>当向网络层提供这种服务时，数据链路层仍然没有使用逻辑连接，但<code>其发送的每一帧都需要单独确认。</code></li>
<li>如果一个帧在指定的时间间隔内还没有到达，则发送方将再次发送该帧。</li>
<li>这类服务尤其适用于不可靠的信道，比如无线系统。</li>
</ul>
<blockquote>
<p>有一点值得强调，那就是在数据链路层提供确认只是一种优化手段，永远不应该成为一种需求。</p>
<ul>
<li>这一策略的麻烦在于它可能导致传输的低效率。</li>
<li>链路层对帧通常有严格的长度限制，这是由硬件所决定的，除此之外，还有传播延迟。</li>
<li>在可靠信道上，比如光纤，重量级数据链路协议的开销可能是不必要的：但在无线信道上，由于信道内在的不可靠性，这种开销还是非常值得的。</li>
</ul>
</blockquote>
<hr />
<ol start="3">
<li>面向连接的服务：数据链路层向网络层提供的最复杂服务</li>
</ol>
<ul>
<li>采用这种服务，<code>源机器和目标机器在传输任何数据之前要建立一个连接。</code></li>
<li><code>连接上发送的每一帧都被编号</code>，数据链路层确保发出的每个帧都会真正被接收方收到。它还<code>保证每个帧只被接收一次</code>，并且<code>所有的帧都将按正确的顺序被接收</code>。</li>
<li>它适用于长距离且不可靠的链路</li>
<li>如果采用有确认的无连接服务，丢失了确认可能导致一个帧被收发多次，<code>因而将浪费带宽。</code></li>
<li>当使用面向连接的服务时，数据传输必须经过三个不同的阶段：
<ol>
<li>建立连接，双方初始化各种变量和计数器</li>
<li>真正传输一个或者多个数据帧</li>
<li>连接被释放，所有的变量、缓冲区以及其他用于维护该连接的资源也随之被释放。</li>
</ol>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/aFKsdtiJBup7h9w.jpg" srcset="/img/loading.gif" lazyload alt="example" title="数据链路层协议的位置" /></p>
<hr />
<h3 id="成帧framing"><a class="markdownIt-Anchor" href="#成帧framing"></a> 成帧（Framing）</h3>
<ol>
<li>字符计数法(Character count)</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/vFda6fDnr7ib3OU.png" srcset="/img/loading.gif" lazyload alt="example" title="字符计数法" /></p>
<ul>
<li><code>利用头部中的一个字段来标识该帧中的字符数。</code>当接收方的数据链路层看到字符计数值时，它就知道后面跟着多少个字节 因此也就知道了该帧在哪里结束。</li>
<li>这个算法的问题在于计数值有可能<code>因为一个传输错误而被弄混</code>。</li>
</ul>
<hr />
<ol start="2">
<li>字符填充法(Flag bytes with byte stuffing)</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/TSKkZ6GoHvLMNmp.png" srcset="/img/loading.gif" lazyload alt="example" title="字符填充法" /></p>
<ul>
<li>成帧方法考虑到了出错之后的重新同步问题，它让每个帧<code>用些特殊的字节作为开始和结束。</code></li>
<li><code>标志字节(flag byte )</code>，作为帧的起始和结束分界符，两个连续的标志字节代表了 帧的结束和下一帧的开始。</li>
<li><code>转义字节(ESC)</code>，作为数据内标志字节和转移字节的填充。</li>
</ul>
<hr />
<ol start="3">
<li>位填充法</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/bGQBAJ9uxzMXeC6.png" srcset="/img/loading.gif" lazyload alt="example" title="位填充法" /></p>
<ul>
<li><code>帧的划分可以在比特级完成</code>，因而帧可以包含由任意大小单元（而不是只能以比特为单元）组成的二进制比特数。</li>
<li>每个帧的开始和结束由一个特殊的比特模式， 01111110 或十六进制 Ox7E标记。这种模式是一个标志字节。<code>每当发送方的数据链路层在数据中遇到连续五个1 ，它便自动在输出的比特流中填入一个比特。</code></li>
<li>当接收方看到5个连续入境比特1，并且后面紧跟一个比特0，它就自动剔除（即删除）比特0。</li>
<li>比特填充和字节填充一样，对两台计算机上的网络层是完全透明的。</li>
<li>如果接收方失去了它的接收轨迹，它所要做的只是扫描输入比特流，找出其中的标志序列：<code>因为这些标志只可能出现在帧的边界，而决不会出现在帧内的数据中。</code></li>
</ul>
<blockquote>
<p><code>采用比特填充和字节填充的一个副作用是一帧的长度现在要取决于它所携带的数据内容。</code></p>
</blockquote>
<hr />
<ol start="4">
<li>物理层违例编码法(Physical layer coding violations)</li>
</ol>
<ul>
<li>使用“编码违法”来区分帧的边界。</li>
<li>这种方案的优点在于，因为这些用作分界符的信号是保留不用的，所以很容易通过它们找到帧的开始和结束，而且不再需要填充数据。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/l7mBVF6cbsIfyXD.png" srcset="/img/loading.gif" lazyload alt="example" title="物理层违例编码法" /></p>
<hr />
<h3 id="差错控制"><a class="markdownIt-Anchor" href="#差错控制"></a> 差错控制</h3>
<ul>
<li>确保可靠传递的常用方法是向发送方提供一些有关线路另一端状况的<code>反馈信息。</code></li>
</ul>
<blockquote>
<p>如果在一个协议中，发送方发出了一帧之后就等待肯定的或者否定的确认，那么，若由于硬件故障或通信信道出错等原因而丢失了某一帧，则发送方将永远等待下去。</p>
</blockquote>
<ul>
<li>
<p>这种可能性可以通过在数据链路层中引入<code>计时器</code>来解决。当发送方发出一帧时，通常还要启动一个计时器。该计时器的超时值应该设置得足够长，以便保证在正常情况下该帧能够到达接收方，并且在接收方进行处理后再将确认返回到发送方。</p>
</li>
<li>
<p>如果帧或者确认被丢失，则计时器将被触发，从而警告发送方存在一个潜在的问题。一种显然的解决方案是重新发送该帧。</p>
</li>
<li>
<p>为了避免接收方将两次或者多次接收到同一帧，并且多次将它传递给网络层，一般有必要给发送出去的帧<code>分配序号</code>，这样接收方可以根据帧的序号来有效区分原始帧和重传帧。</p>
</li>
</ul>
<hr />
<h3 id="流量控制"><a class="markdownIt-Anchor" href="#流量控制"></a> 流量控制</h3>
<ul>
<li>为了阻止<code>发送方发送帧的速度超过了接收方能够接受这些帧的速度</code>情况发生。常用的办法有两种。
<ul>
<li>第一种方法是<code>基于反馈的流量控制</code>(feedback-based flow control)，接收方给发送方返回信息，允许它发送更多的数据，或者至少告诉发送方自己的情况怎么样。</li>
<li>第二种方法是<code>基于速率的流量控制</code>(rate-based flow control)，使用这种方法的协议有一种内置的机制，它能限制发送方传输数据的速率，而无须利用接收方的反馈信息。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="差错检测和纠正"><a class="markdownIt-Anchor" href="#差错检测和纠正"></a> 差错检测和纠正</h2>
<ul>
<li>一个包含了数据位和校验位的n位单元称为<code>n位码字(codeword)</code></li>
<li><code>码率(code rate)</code>或者简单地说速率，则定义为码字中不包含元余部分所占的比例，或者用 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">m/n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">n</span></span></span></span> 表示。</li>
</ul>
<hr />
<h3 id="纠错码"><a class="markdownIt-Anchor" href="#纠错码"></a> 纠错码</h3>
<h4 id="海明码"><a class="markdownIt-Anchor" href="#海明码"></a> 海明码</h4>
<ul>
<li>两个码字中不相同的位的个数称为<code>海明距离(Hamming distance)</code></li>
<li>如果两个码字的海明距离为d，则需要d个1位错误才能将一个码字转成另一个码字。</li>
<li>为了可靠地<code>检测d个错误</code>，需要一个距离为d+1的编码方案。</li>
<li>为了<code>纠正d个错误</code>，需要一个距离为2d+1的编码方案。</li>
</ul>
<hr />
<ul>
<li>以1010110这个二进制数为例解释海明码的编码和校验方法。</li>
</ul>
<ol>
<li>确定校验码的位数</li>
</ol>
<ul>
<li>设n为有效信息的位数，k为校验位的位数，则信息位n和校验位k应满足：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>+</mo><mi>k</mi><mo>≤</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n+k \le 2^k-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.932438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>使不等式成立的k的最小值就是校验码的位数。在本例中，n=7，解得k=4。</li>
</ul>
<ol start="2">
<li>确定校验码的位置</li>
</ol>
<ul>
<li>校验码在二进制串中的<code>位置为2的整数幂</code>。剩下的位置为数据。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">位置</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
<th style="text-align:center">6</th>
<th style="text-align:center">7</th>
<th style="text-align:center">8</th>
<th style="text-align:center">9</th>
<th style="text-align:center">10</th>
<th style="text-align:center">11</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">内容</td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center">1</td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">P_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">P_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<ol start="3">
<li>求出校验位的值</li>
</ol>
<ul>
<li>以求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的值为例。为了直观，将表格中的位置用二进制表示。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">位置</th>
<th style="text-align:center">0001</th>
<th style="text-align:center">00<code>1</code>0</th>
<th style="text-align:center">00<code>1</code>1</th>
<th style="text-align:center">0100</th>
<th style="text-align:center">0101</th>
<th style="text-align:center">01<code>1</code>0</th>
<th style="text-align:center">01<code>1</code>1</th>
<th style="text-align:center">1000</th>
<th style="text-align:center">1001</th>
<th style="text-align:center">10<code>1</code>0</th>
<th style="text-align:center">10<code>1</code>1</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">内容</td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center"><code>1</code></td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">P_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center">0</td>
<td style="text-align:center"><code>1</code></td>
<td style="text-align:center"><code>0</code></td>
<td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">P_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td style="text-align:center">1</td>
<td style="text-align:center"><code>1</code></td>
<td style="text-align:center"><code>0</code></td>
</tr>
</tbody>
</table>
<ul>
<li>为了求出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,要使所有位置的第二位是1的数据（即形如<code>**1*</code>的位置的数据）的<code>异或值为0</code>。即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span> 1 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span> 1 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span> 0 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span> 1 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span> 0 = 0。因此<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 1。</li>
<li>同理可得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">P_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 1, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">P_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> = 0。</li>
<li>因此1010110的海明码为01110100110。</li>
</ul>
<ol start="4">
<li>校验</li>
</ol>
<ul>
<li>每个校验组分别利用校验位和参与形成该校验位的信息位进行奇偶校验检查，构成k个校验方程。假设位置为1011的数据由0变成了1：</li>
</ul>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.15999999999999992em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>S</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mo>∗</mo><mo>∗</mo><mo>∗</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><msub><mi>P</mi><mn>1</mn></msub><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>0</mn><mo>⨁</mo><mn>0</mn><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>S</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mo>∗</mo><mo>∗</mo><mn>1</mn><mo>∗</mo><mo stretchy="false">)</mo><mo>=</mo><msub><mi>P</mi><mn>2</mn></msub><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>0</mn><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>S</mi><mn>3</mn></msub><mo stretchy="false">(</mo><mo>∗</mo><mn>1</mn><mo>∗</mo><mo>∗</mo><mo stretchy="false">)</mo><mo>=</mo><msub><mi>P</mi><mn>3</mn></msub><mo>⨁</mo><mn>0</mn><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>0</mn><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>S</mi><mn>4</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>∗</mo><mo>∗</mo><mo>∗</mo><mo stretchy="false">)</mo><mo>=</mo><msub><mi>P</mi><mn>4</mn></msub><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>1</mn><mo>⨁</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\left \{ 
\begin{array}{c}
S_1(***1)=P_1\bigoplus 1  \bigoplus 0 \bigoplus 0 \bigoplus 1 \bigoplus 1=1\\ 
S_2(**1*)=P_2\bigoplus 1  \bigoplus 1 \bigoplus 0 \bigoplus 1 \bigoplus 1=1 \\ 
S_3(*1**)=P_3\bigoplus 0  \bigoplus 1 \bigoplus 0 = 0 \\ 
S_4(1***)=P_4\bigoplus 1  \bigoplus 1 \bigoplus 1 = 1
\end{array}
\right.
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.80004em;vertical-align:-2.15002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65002em;"><span style="top:-1.8999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-1.8999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.1999899999999997em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.15001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.90002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">∗</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mord">∗</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">∗</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">∗</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">0</span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">∗</span><span class="mord">∗</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<ul>
<li>以上四组中，若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub><msub><mi>S</mi><mn>2</mn></msub><msub><mi>S</mi><mn>3</mn></msub><msub><mi>S</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_1S_2S_3S_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的值为&quot;0000&quot;，则说明无错；如果一组异或值为1，说明该组中有数据出错了。</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub><msub><mi>S</mi><mn>2</mn></msub><msub><mi>S</mi><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">S_1S_2S_4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的异或都为1，说明出错数据的位置为1011，直接将该位取反即可</li>
</ul>
<hr />
<h3 id="检错码"><a class="markdownIt-Anchor" href="#检错码"></a> 检错码</h3>
<blockquote>
<p>光纤或高品质铜线的错误率要低得多，因此对于偶尔出现的错误采用差错检测和重传的处理方式通常更加有效。</p>
</blockquote>
<hr />
<h4 id="奇偶校验码parity"><a class="markdownIt-Anchor" href="#奇偶校验码parity"></a> 奇偶校验码(Parity)</h4>
<ul>
<li>奇偶校验码是奇校验码和偶校验码的统称，它又n-1位信息元和1位校验元组成</li>
<li>奇偶位的选择原则是使得<code>码字中比特1的数目是偶数（或奇数）</code>。这样处理等同于对数据位进行模2加或异或操作来获得奇偶位。</li>
<li>探测奇数位的错误很容易
<ul>
<li>1个错误：11100<u>1</u>0<code>1</code>；可以检出错误</li>
<li>3个错误：11<u>011</u>00<code>1</code>；可以检出错误</li>
<li>2个错误：1110<u>11</u>0<code>1</code>；不可以检出错误</li>
<li>校验位也可能出错</li>
<li>随即错误被检测到的概率是50%</li>
</ul>
</li>
</ul>
<hr />
<h4 id="交错校验interleaving"><a class="markdownIt-Anchor" href="#交错校验interleaving"></a> 交错校验(interleaving)</h4>
<ul>
<li>我们将为n列中的<code>每列</code>计算校验位，按k行发送全部的数据位。</li>
<li>发送次序是从上到下发送每一行，行内数据位通常按从左到右的次序发送。在最后一行，发送n个校验位。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/AKkNisEbFdD9SgP.png" srcset="/img/loading.gif" lazyload alt="example" title="交错校验" /></p>
<ul>
<li>这种方法对于 nk 长度的数据块使用了 n 个校验位就能检测出一个长度小于等于 n 的突发错误。</li>
</ul>
<hr />
<h4 id="校验和checksums"><a class="markdownIt-Anchor" href="#校验和checksums"></a> 校验和(Checksums)</h4>
<ul>
<li>所谓校验和，就是将被校验数据进行累加，并舍弃累加溢出的位，最终得到的1个或多个字节的结果。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/ogzfnarvY1eWiBS.png" srcset="/img/loading.gif" lazyload alt="example" title="校验和" /></p>
<ul>
<li>
<p>在发送数据时，为了计算数据包的检验和。应该按如下步骤：</p>
<ol>
<li>把校验和字段设置为0；</li>
<li>把需要校验的数据看成以16位为单位的数字组成，依次进行<code>二进制反码求和</code>；</li>
<li>运算结果<code>取反</code>，得到校验和</li>
</ol>
</li>
<li>
<p>在接收数据时，计算数据包的检验和相对简单，按如下步骤：</p>
<ol>
<li>把首部看成以16位为单位的数字组成，依次进行<code>二进制反码求和</code>，包括校验和字段；</li>
<li>检查计算出的校验和的结果是否为0；</li>
<li>如果等于0，说明被整除，校验和正确。否则，校验和就是错误的，协议栈要抛弃这个数据包。</li>
</ol>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/KlPQg6fnStCO4Za.png" srcset="/img/loading.gif" lazyload alt="example" title="校验和" /></p>
<hr />
<h4 id="循环冗余校验码ccrc-cyclic-redundancy-check"><a class="markdownIt-Anchor" href="#循环冗余校验码ccrc-cyclic-redundancy-check"></a> 循环冗余校验码(CCRC, Cyclic Redundancy Check )</h4>
<ul>
<li>CRC是一种数据传输检错功能，对数据进行多项式计算，并将得到的结果附在帧的后面，接收设备也执行类似的算法，以保证数据传输的正确性和完整性。</li>
<li>x的最高幂次为R，转换成对应的二进制数有<code>R+1位。</code>
<ul>
<li>如生成多项式为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">G(x)=x^4+x^3+x+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>， 可转换为二进制数码11011。</li>
</ul>
</li>
<li>计算冗余码
<ol>
<li>加0：在要发送的数据后加r个0，其中<code>r为生成多项式G（x）的阶</code>（一般来说，多项式为N位，则阶为N-1）；</li>
<li>模2除法：加0后的数据除以生成多项式G（x），则余数就是所求的冗余码/FCS/CRC检验码的比特序列（模2除法的本质就是<code>异或运算</code>）。</li>
<li>最终要发送的数据就是：（0扩展）原数据（左移r位）+FCS。</li>
</ol>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/W1EOP5g9Ryljvft.png" srcset="/img/loading.gif" lazyload alt="example" title="计算冗余码" /></p>
<ul>
<li>验证冗余码
<ul>
<li>在接收端将收到的每一个帧都除以在发送时使用的生成多项式，然后检查得到的余数R，若：
<ol>
<li>R=0，发送数据没有出错；</li>
<li>R≠0，判定接收到的数据是错误的（只是有检错功能，却没有纠错功能，无法确定到出错的位数），直接丢弃。</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/d28mePGhb9L3ryB.png" srcset="/img/loading.gif" lazyload alt="example" title="验证冗余码" /></p>
<blockquote>
<p>在数据链路层使用CRC循环冗余码的差错检验技术，只能做到对发送帧的无比特差错接收，还不能做到可靠传输（数据链路层发送端发送什么，接收端就收到什么）。</p>
</blockquote>
<hr />
<h2 id="基本数据链路层协议"><a class="markdownIt-Anchor" href="#基本数据链路层协议"></a> 基本数据链路层协议</h2>
<p><img src="https://s2.loli.net/2022/01/05/IJYHOlfq8QZB51y.png" srcset="/img/loading.gif" lazyload alt="example" title="实现" /></p>
<ul>
<li>发送方的数据链路层每当发出一帧，就要启动一个内部计时器或者时钟。如果在预设的时间间隔内没有收到应答，则时钟超时，数据链路层会收到一个中断信号。</li>
</ul>
<hr />
<h3 id="理想化单工协议"><a class="markdownIt-Anchor" href="#理想化单工协议"></a> 理想化单工协议</h3>
<ul>
<li>假设：
<ul>
<li>不需要考虑出错的情况（流量控制、差错检测）</li>
<li>数据只能单向传输</li>
<li>可用的缓存空间无限大</li>
<li>物理层服务可靠，信道不会损坏帧或丢失帧</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/26M7SWcVUmz5tQb.png" srcset="/img/loading.gif" lazyload alt="example" title="理想化单工协议" /></p>
<ul>
<li>协议由两个单独的过程组成 一个发送过程和一个接收过程。发送过程运行在源机器的数据链路层上；接收过程运行在目标机器的数据链路层上。</li>
<li>理想化单工协议是不现实的，因为它不处理任何流量控制或纠错工作。其处理过程接近于无确认的无连接服务。</li>
</ul>
<hr />
<h3 id="无噪声信道上的停-等协议"><a class="markdownIt-Anchor" href="#无噪声信道上的停-等协议"></a> 无噪声信道上的停-等协议</h3>
<ul>
<li>
<p>仍假设通信信道不会出错，并且数据流量是单工的。</p>
</li>
<li>
<p>接收方将数据包传递给网络层之后给发送方返回一个小的确认帧，允许它发送下一帧。</p>
</li>
<li>
<p>发送方在发出一帧之后，根据协议要求，它必须等待一段时间直到确认帧到达。这种延缓就是流量控制协议的一个简单例子。</p>
</li>
<li>
<p>对于发送方来说，确认帧的到来比帧内包含什么内容更重要，因此接收方根本不需要往确认帧中填充任何特别的信息。发送方的数据链路层甚至根本不检查接收到的帧，因为对它而言只有一种可能性，即入境帧总是来自接收方的确认。</p>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/s5bf9wXHIBFuTZN.png" srcset="/img/loading.gif" lazyload alt="example" title="理想停等协议" /></p>
<hr />
<h3 id="有错信道上的停-等协议"><a class="markdownIt-Anchor" href="#有错信道上的停-等协议"></a> 有错信道上的停-等协议</h3>
<ul>
<li>
<p>信道可能会出错，帧可能会被损坏，也可能完全被丢失。</p>
</li>
<li>
<p>自动重复请求(<code>ARQ</code> , Automatic Repeat Request)或带有重传的肯定确认(PAR, Positive Acknowledgement with Retransmission)</p>
<ul>
<li>发送方发送包含CRC的数据帧，并启动计时器</li>
<li>接收方接受数据帧并验证CRC和<code>序号</code>，然后发送<code>ACK</code>(ACKnowledge Character，表示确认发来的数据已经接受无误)，或者<code>NAK</code>(Negative Acknowledgment，确认数据有错误的信号)</li>
<li>发送方若接收到ACK，就发送新的一帧</li>
<li>发送方若收到NAK，或者发生超时，则重发原数据帧。</li>
<li>若ACK确认帧丢失
<ul>
<li>构造一个重复的帧</li>
<li>并附上<code>一位序号</code>以区分新旧帧</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/VRZ1ewdFfD3EvXH.png" srcset="/img/loading.gif" lazyload alt="example" title="sender3" /></p>
<p><img src="https://s2.loli.net/2022/01/09/UkWLTmvH6oR75zS.png" srcset="/img/loading.gif" lazyload alt="example" title="recever3" /></p>
<p><img src="https://s2.loli.net/2022/01/05/mye2WGR4bN9A7Pa.png" srcset="/img/loading.gif" lazyload alt="example" title="流程图" /></p>
<hr />
<ul>
<li>停-等协议的信道利用率
<ul>
<li>B 为信道速率(bits/sec)</li>
<li>L 为帧大小(bits)</li>
<li>R 为往返传播时间(sec)</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>=</mo><mfrac><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>B</mi></mrow><mrow><mi>L</mi><mi mathvariant="normal">/</mi><mi>B</mi><mo>+</mo><mi>R</mi></mrow></mfrac><mo>=</mo><mfrac><mi>L</mi><mrow><mi>L</mi><mo>+</mo><mi>R</mi><mi>B</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">U = \frac {L/B}{L/B+R} = \frac {L}{L+RB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mord mtight">/</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mord mtight">/</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.275662em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/gjpzFvB4L2If1wD.png" srcset="/img/loading.gif" lazyload alt="example" title="效率" /></p>
<hr />
<h2 id="滑动窗口协议"><a class="markdownIt-Anchor" href="#滑动窗口协议"></a> 滑动窗口协议</h2>
<h3 id="一些概念"><a class="markdownIt-Anchor" href="#一些概念"></a> 一些概念</h3>
<ul>
<li>捎带确认(piggybacking)
<ul>
<li>当一个数据帧到达的时候，接收方并不是立即发送一个单独的控制帧，而是抑制一下自己并且开始等待，直到网络层传递给它下一个分组。</li>
<li>然后，确认信息被附在往外发送的数据帧上（使用帧头中的<code>ack域</code>）。实际上，确认报文搭了下一个外发数据帧的便车。</li>
<li>使用捎带确认的最主要好处是<code>更好地利用了信道的可用带宽</code>。帧头的 ack 字段只占用很少几位，而一个单独的帧则需要一个帧头、确认信息和校验和。</li>
</ul>
</li>
<li>滑动窗口
<ul>
<li>任何一个出境帧都包含一个序号，范围从0到某个最大值。序号的最大值通常是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，这样序号正好可以填入到一个n位的字段中。</li>
<li><code>发送窗口</code>(sending window)：
<ul>
<li>所有滑动窗口协议的本质是在任何时刻发送方总是维持着一组序号，分别对应于允许它发送的帧。</li>
<li>发送方窗口内的序号代表了那些可以被发送的帧，或者那些已经被发送但还没有被确认的帧。</li>
<li>任何时候当有新的数据包从网络层到来时，它被赋予窗口中的下一个最高序号，<code>并且窗口的上边界前移一格。</code></li>
<li>当收到一个确认时，窗口的<code>下边界也前移一格。</code></li>
</ul>
</li>
<li>类似地，接收方也维持着一个<code>接收窗口</code>(receiving window)
<ul>
<li>接收方数据链路层的窗口对应于它可以接受的帧。任何落在窗口内的帧被放入接收方的缓冲区。</li>
<li>收到一个帧，而且<code>其序号等于窗口下边界</code>时，接收方将它传递给网络层，并将<code>整个窗口</code>向前移动1个位置。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/gZqiOwlLU2eAVFG.png" srcset="/img/loading.gif" lazyload alt="example" title="滑动窗口" /></p>
<ul>
<li>
<p>发送方必须在内存中保存所有这些帧，以便满足可能的重传需要。因此，如果最大的窗口尺寸为n，则发送方需要n个缓冲区来存放未被确认的帧。</p>
</li>
<li>
<p>与发送方窗口不同 接收方窗口始终保持着它的初始大小，<code>窗口的旋转意味着下一帧被接受并被传递到网络层。</code></p>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/fjk7VUSdtMFp24a.png" srcset="/img/loading.gif" lazyload alt="example" title="流程图" /></p>
<hr />
<h3 id="1位滑动窗口协议"><a class="markdownIt-Anchor" href="#1位滑动窗口协议"></a> 1位滑动窗口协议</h3>
<ul>
<li>由于发送方在发出一帧以后，必须等待前一帧的确认到来才能发送下一帧，所以<code>这样的协议使用了停-等式办法</code></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/D4ZFNEQjioTHuJd.png" srcset="/img/loading.gif" lazyload alt="example" title="协议发" /></p>
<ol>
<li>初始启动的机器从它的网络层获取第一个数据包，然后根据该数据包创建一帧，并将它发送出去。</li>
<li>该帧（或者任何其他帧）到达目的地，接收方的数据链路层检查该帧，看它是否为重复帧，如果这帧正是接收方所期望的，则将它传递给网络层，井且接收方的窗口向前滑动。</li>
</ol>
<p><img src="https://s2.loli.net/2022/01/05/nYTLdkBc61DybUq.png" srcset="/img/loading.gif" lazyload alt="example" title="协议收" /></p>
<ul>
<li>确认字段包含了最后接收到的正确帧的序号。</li>
<li>如果该序号与发送方之前试图发送的帧的序号一致，则发送方知道，存储在 buffer 中的帧己经处理完毕，于是，它就可以从网络层获取下一个数据包。</li>
<li>如果序号不一致，则它必须继续发送同一帧。无论什么时候只要接收到一帧，就要返回一帧。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/b8vHqCjVaOBgdAm.png" srcset="/img/loading.gif" lazyload alt="example" title="AB同时发送第一帧" /></p>
<ul>
<li>对于不正常的情况，如AB同时发起通信或发生多个过早超时，则每一帧都有可能被发送三次或者更多次，严重浪费了宝贵带宽。</li>
</ul>
<hr />
<h3 id="回退n帧协议go-back-n"><a class="markdownIt-Anchor" href="#回退n帧协议go-back-n"></a> 回退N帧协议(Go-Back-N)</h3>
<ul>
<li>1位滑动窗口协议效率低，发送方等待时间长，由此产生了回退N帧协议</li>
<li><code>接收窗口大小为1</code> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span> 只能按序接收</li>
<li>即使存在 MAX_SEQ+1个不同的序号(分别为 0、1、 2 、···、MAX_SEQ)，<code>发送窗口大小最大为MAX_SEQ</code>
<ul>
<li>否则无法区分新旧帧</li>
</ul>
</li>
<li>采用<code>累积确认</code>：对第n帧的ack意味着第n帧以及之前的帧全部正确到达</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/54s6L3mpJBdakcn.png" srcset="/img/loading.gif" lazyload alt="example" title="GBN" /></p>
<ul>
<li>接收方只接受/确认按<code>顺序到达</code>的帧(内部会维护变量指示下一个应该到达的帧的序号)
<ul>
<li>丢失的或出错的帧后接收到的帧全部丢弃</li>
<li>发送方发生超时时，<code>重新发送所有已发送但没有被确认的帧</code></li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/RE3v8p4elDcwTOJ.png" srcset="/img/loading.gif" lazyload alt="example" title="计时器" /></p>
<hr />
<h3 id="选择重传协议selective-repeat"><a class="markdownIt-Anchor" href="#选择重传协议selective-repeat"></a> 选择重传协议(Selective Repeat)</h3>
<p><img src="https://s2.loli.net/2022/01/05/uiCwHhj1sIADbyU.png" srcset="/img/loading.gif" lazyload alt="example" title="选择重传" /></p>
<ul>
<li>发送窗口和接收窗口大小都为<code>(MAX_SEQ+1)/2</code></li>
<li>当错误发生时，<code>接收方会立即发送一个NAK</code></li>
<li>缓存区更大</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/bBSyxo3KhJeNuQq.png" srcset="/img/loading.gif" lazyload alt="example" title="选择重传" /></p>
<ul>
<li>发送方：
<ul>
<li>如果收到ACK，且该ACK帧序号在窗口内，则将该帧确认为已接收</li>
<li>如果该序号是窗口的下界，则窗口向前移动到具有最小序号的未确认帧处</li>
<li>若窗口移动了，并且还有序号在窗口内的未发送帧，则发送该帧</li>
</ul>
</li>
<li>接收方：
<ul>
<li><code>利用捎带确认或者独立确认(辅助计时器)</code>来发送ACK</li>
<li>接收方会确认在接收窗口里任意编号的正确帧（窗口大小的原因）</li>
<li>失序的帧会被<code>缓存</code>，并且返回给发送方一个确认帧。</li>
<li>如果收到了窗口序号外（小于窗口下界）的帧，就返回一个ACK。其他情况则忽略。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/S9ZpdiErnDjFkC1.png" srcset="/img/loading.gif" lazyload alt="example" title="选择重传" /></p>
<hr />
<h2 id="数据链路层实例"><a class="markdownIt-Anchor" href="#数据链路层实例"></a> 数据链路层实例</h2>
<hr />
<h1 id="介质访问控制子层the-medium-access-control-sublayer"><a class="markdownIt-Anchor" href="#介质访问控制子层the-medium-access-control-sublayer"></a> 介质访问控制子层(The Medium Access Control Sublayer)</h1>
<p><img src="https://s2.loli.net/2022/01/05/2DmIp5tadVxfXAP.jpg" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<p><img src="https://s2.loli.net/2022/01/05/rmegylVaTYQp74d.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li><code>MAC子层负责介质访问控制机制的实现，即处理局域网中各站点对共享通信介质的争用问题</code></li>
<li>MAC子层还涉及局域网中的物理寻址；而LLC子层负责屏蔽掉MAC子层的不同实现，将其变成统一的LLC界面，从而向网络层提供一致的服务</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/Y8KPAUN1pETdaDF.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h2 id="共享信道分配问题"><a class="markdownIt-Anchor" href="#共享信道分配问题"></a> 共享信道分配问题</h2>
<h3 id="静态信道分配方法"><a class="markdownIt-Anchor" href="#静态信道分配方法"></a> 静态信道分配方法</h3>
<ul>
<li>
<p>所谓静态分配方法，也是<code>传统</code>的分配方法，它采用<code>频分多路复用、时分多路复用或CDMA</code>将单个信道划分后静态地分配给多个用户。</p>
</li>
<li>
<p>当<code>用户站数较多</code>或<code>使用信道的站数在不断变化</code>或者<code>通信量的变化具有突发性</code>时，静态频分多路复用方法的性能较差，因此，传统的静态分配方法，不完全适合计算机网络</p>
</li>
</ul>
<hr />
<h3 id="动态信道分配方法"><a class="markdownIt-Anchor" href="#动态信道分配方法"></a> 动态信道分配方法</h3>
<ul>
<li>所谓动态分配方法就是动态地为每个用户站点分配信道使用权。
<ul>
<li>竞争法协议
<ul>
<li>存在冲突</li>
</ul>
</li>
<li>无冲突法协议</li>
<li>有限竞争协议
<ul>
<li>前两种的组合</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="动态信道分配的假设"><a class="markdownIt-Anchor" href="#动态信道分配的假设"></a> 动态信道分配的假设</h3>
<ol>
<li>站模式(independent traffic)：由N个<code>独立</code>的站（比如计算机、电话）组成，每个站都有一个程序或者用户产生要传输的帧。</li>
<li>单信道(Single Channel)：所有的通信都用这一个信道。所有的站可以在该信道上传输数据，也可以从该信道接收数据。</li>
<li>冲突可观察(observable Collision)
<ul>
<li>如果两帧同时传输，则它们在<code>时间上就重叠</code>，由此产生的信号是混乱的，这种情况称为<code>冲突</code>(collision)。</li>
<li>所有的站都能够检测到冲突事件的发生。冲突的帧必须在以后再次被发送。除了因冲突而产生错误外，不会再有其他的错误。</li>
</ul>
</li>
<li>时间连续或分槽(Continuous or slotted time)</li>
</ol>
<ul>
<li>时间连续：时间可以假设是连续的，即在任何时刻都可以开始传输帧。</li>
<li>分槽：
<ul>
<li>时间分槽或者分成离散的间隔（称为时间槽）。</li>
<li>帧的传输只能从某个时间槽的起始点开始。</li>
<li>一个时间槽可能包含0、1 或者多个帧，分别对应于空闲的时间槽、一次成功发送，或者一次冲突。</li>
</ul>
</li>
</ul>
<ol start="5">
<li>载波侦听或不听(Carrier Sense or no carrier sense)</li>
</ol>
<ul>
<li>有了载波侦听的假设，一个站在试图用信道之前就能<code>知道该信道当前是否正被使用</code>。如果信道侦听结果是忙，则没有一个站会再去试图使用该信道。</li>
<li>通过向信道上加载侦听帧来判断</li>
<li>N个侦听帧叠加仍是侦听帧；侦听帧和数据帧叠加仍是原来的数据帧</li>
<li>如果收到的信息和侦听帧相同，则信道空闲</li>
</ul>
<hr />
<h2 id="多路访问协议"><a class="markdownIt-Anchor" href="#多路访问协议"></a> 多路访问协议</h2>
<h3 id="aloha"><a class="markdownIt-Anchor" href="#aloha"></a> ALOHA</h3>
<h4 id="pure-aloha"><a class="markdownIt-Anchor" href="#pure-aloha"></a> Pure ALOHA</h4>
<ul>
<li>对应连续时间</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/YvIpT1E4dGsSALV.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>数据帧可以在任意时间点发送</li>
<li>每个站在给中央计算机发送帧之后，该计算机把该帧重新广播给所有站。因此，那个<code>发送站可以侦听来自集线器的广播</code>，以此确定它的帧是否发送成功。</li>
<li>如果帧被损坏了，则发送方要等待一段<code>随机时间</code>，然后再次发送该帧。
<ul>
<li>等待的时间必须是随机的，否则同样的帧会一次又一次地冲突，因为冲突帧被重发的节奏完全一致。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/6F9GQZKqvMbghI2.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>要想正确地发送数据帧，则发送数据帧的<code>前一个帧时</code>和<code>当前帧时</code>其他用户不能发送数据帧，即易冲突期为两个帧时
<ul>
<li>帧时(frame time)：表示传输一个标准的、固定长度的帧所需要的时间（即帧的长度除以比特率）</li>
</ul>
</li>
</ul>
<hr />
<h4 id="pure-aloha-协议的效率分析"><a class="markdownIt-Anchor" href="#pure-aloha-协议的效率分析"></a> Pure ALOHA 协议的效率分析</h4>
<ul>
<li>S：吞吐率，一个帧时产生的新的帧的数目</li>
<li>G：吞吐量，一个帧时内等待发送的帧的个数</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">P_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：一个数据帧不发生冲突的概率
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>G</mi><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">S = GP_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault">G</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
<li>在给定的一个帧时内希望有G帧，但生成k帧的概率服从<code>泊松分布</code>：$$P_r[k] = G<sup>ke</sup>{-G}/k!$$</li>
<li>生成0帧的概率为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>e</mi><mrow><mo>−</mo><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">e^{-G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span>。在两个帧时长的间隔中，生成帧的平均数是2G。</li>
<li>因此，在整个易受冲突期中，不发送帧的概率是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub><mo>=</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P_0 = e^{-G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span>，利用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>G</mi><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">S = GP_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault">G</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>可以得到$$S = Ge^{-2G}$$</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/JUgfrD2wF1cKl6C.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>最大的吞吐量出现在当<code>G=0.5 时，S = 1/2e</code>, 大约等于 0.184 。</li>
</ul>
<hr />
<h4 id="slotted-aloha"><a class="markdownIt-Anchor" href="#slotted-aloha"></a> Slotted ALOHA</h4>
<ul>
<li>
<p>信道上的时间被分成离散的时间间隔即时槽，其<code>大小相当于帧的传输时间</code>。所有站点的时钟保持同步。<code>站点只有在时槽开始时</code>才能传输数据。</p>
</li>
<li>
<p>只有那些都在同一个时槽开始进行传输的帧才有可能冲突，可能发生冲突危险区比ALOHA降低了一半 。</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub><mo>=</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P_0 = e^{-G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mi>G</mi><msup><mi>e</mi><mrow><mo>−</mo><mi>G</mi></mrow></msup></mrow><annotation encoding="application/x-tex">S = Ge^{-G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">G</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>当 <code>G = 1，S = 1/e</code>，有最大吞吐量</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/1sNmJH76ZkylpYG.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>吞吐量G在拐点左侧时为<code>轻载荷</code>：吞吐率S随G增加而增加</li>
<li>吞吐量G在拐点左侧时为<code>重载荷</code>：吞吐率S随G增加而减少，因为冲突概率增加了</li>
</ul>
<hr />
<h3 id="csma-载波侦听多路访问协议"><a class="markdownIt-Anchor" href="#csma-载波侦听多路访问协议"></a> CSMA （载波侦听多路访问协议）</h3>
<ul>
<li>
<p>ALOHA 和分槽ALOHA都没有利用到无线分组网和局域网的一个主要特性，那就是与帧的传输时间相比，<code>传播时间是很短的</code>：当一个站点发送帧后，别的站点马上就会知道。</p>
</li>
<li>
<p>CSMA机制：也称为<code>先听先说</code>，是<code>竞争法</code>协议</p>
<ul>
<li>想要传输的站点首先<code>侦听传输介质</code>上是否有其他站点在传输（载波监听〕。如果传输介质忙，它必须等待。如果空闲，则可能传输。</li>
<li>两个或多个站点还是有可能同时开始传输，这时就会产生冲突。考虑到这种情况，发送站点在发送完后要等待一段时间（<code>要把来回传输的最大时间和发送确认的站点竞争信道的时间考虑在内</code>）以等待确认，如果没有收到确认，发送站点认为发生了冲突，就重发该帧。</li>
</ul>
</li>
</ul>
<hr />
<h4 id="持续和非持续csma"><a class="markdownIt-Anchor" href="#持续和非持续csma"></a> 持续和非持续CSMA</h4>
<ul>
<li>
<p>非持续CSMA</p>
<ul>
<li>基本思想：
<ol>
<li>若媒体空闲就传输；否则，转到第2步</li>
<li>若媒体忙，等待一段<code>随机</code>的重传延迟时间，重复第1步</li>
</ol>
</li>
<li>缺点：如果多个站点同时会浪费部分信道容量</li>
</ul>
</li>
<li>
<p>1-持续CSMA协议</p>
<ul>
<li>基本思想：
<ol>
<li>若媒体空闲就传输；否则，转到第2步</li>
<li>若媒体忙则继续监听，直到检测到信道空闲然后立即传输</li>
<li>如有冲突，则等待一段随机的时间重复第1步</li>
</ol>
</li>
</ul>
</li>
<li>
<p>P-持续CSMA协议</p>
<ul>
<li>基本思想：
<ul>
<li>若媒体空闲，以<code>概率P</code>传输，以<code>概率(1-P)</code>延迟一个时间单位。该时间单位通常<code>等于最大的传播延迟的两倍</code></li>
<li>若传输延迟了一个时间单位，则重复第1步</li>
<li>若媒体忙，继续监听直到信道空闲并重复第1步</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/7MSpoD2QGkF5vPs.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>P-持续CSMA和非持续CSMA在重载荷情况下信道吞吐率相对较高</li>
</ul>
<hr />
<h4 id="带冲突检测的csma-csmacd-csma-with-collision-detection"><a class="markdownIt-Anchor" href="#带冲突检测的csma-csmacd-csma-with-collision-detection"></a> 带冲突检测的CSMA (CSMA/CD, CSMA with Collision Detection)</h4>
<ul>
<li>
<p>以太网采用的是CSMA/CD</p>
<ul>
<li>载波监听：站点能监测到链路是忙还是空闲；</li>
<li><code>冲突检测</code>：站点在<code>传输的同时监听信道</code>，从而能够监测到站点所传输的帧与别的站点传输的帧之间发生冲突的情形 。</li>
</ul>
</li>
<li>
<p>基本算法</p>
<ol>
<li>若媒体空闲，传输；否则，转第2步。</li>
<li>若媒体忙，<code>一直监听直到信道空闲</code>然后立即传输。
<ul>
<li>本质是1-持续CSMA加上冲突检测</li>
</ul>
</li>
<li>若在传输中监听到冲突，发出一个短小的人为干扰信号让所有的站点都知道发生了冲突并停止传输。</li>
<li>发完人为干扰信号，<code>等待一段随机的时间</code>，再次试图传输（从第1步开始重复〕。</li>
</ol>
</li>
<li>
<p>工作过程通常可以概括为</p>
<ul>
<li>先听后发</li>
<li>边听边发</li>
<li>冲突停发</li>
<li>随机重发</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/dDNTc1YszSwnh3e.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>CSMA/CD的状态</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/sF9rACiGt75c3Ym.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="无冲突协议collision-free-protocols"><a class="markdownIt-Anchor" href="#无冲突协议collision-free-protocols"></a> 无冲突协议(Collision-Free Protocols)</h3>
<ul>
<li>核心思想是避免冲突
<ul>
<li>发送端必须知道什么时候轮到它来发送数据</li>
</ul>
</li>
</ul>
<h4 id="基本位图协议the-basic-bit-map-protocol"><a class="markdownIt-Anchor" href="#基本位图协议the-basic-bit-map-protocol"></a> 基本位图协议(The basic bit-map protocol)</h4>
<p><img src="https://s2.loli.net/2022/01/05/mpH2saFwniEYzcG.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>每个竞争期正好包含N个槽，<code>j号站通过在j号槽中插入1位</code>来声明自己有帧要发送</li>
<li>当所有N个槽都经过后，每个站都知道哪些站希望传送数据，此时它们<code>按数字顺序</code>开始传送数据</li>
<li>像这样<code>在实际传送数据之前先广播自己有发送数据愿望</code>的协议，称为预留协议(reservation protocol)</li>
<li>效率分析：N个竞争位，每一帧数据长度为d位
<ul>
<li>重载荷：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>N</mi><mo>∗</mo><mi>d</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>N</mi><mo>∗</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(N*d)/(N+N*d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span></span></span></span></li>
<li>轻载荷：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d/(N+d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span></span></span></span></li>
<li>适合于重载荷信道分配，在轻载荷时效率较低</li>
</ul>
</li>
</ul>
<hr />
<h4 id="二进制倒计数binary-countdown"><a class="markdownIt-Anchor" href="#二进制倒计数binary-countdown"></a> 二进制倒计数(Binary countdown)</h4>
<ul>
<li>对基本位图进行改进，将原来的竞争位数由N下降到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">log_2N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/gmM41iVladDFJH5.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p>如果一个站想要使用信道，它就以<code>二进制位串</code>的形式从高序的位开始广播自己的地址。</p>
<ul>
<li>假定所有地址都有同样的长度。</li>
<li>不同站地址中相同位在同时发送时被信道<code>布尔或</code>(BOOLEAN OR)在一起。</li>
<li>我们把这样的协议称为二进制倒计数 (binary countdown)协议</li>
</ul>
</li>
<li>
<p>该协议具有这样一种特性，高序站的优先级比低序站的优先级高</p>
</li>
<li>
<p>在<code>轻载荷</code>情境下，该协议效率较高</p>
</li>
</ul>
<hr />
<h3 id="有限竞争协议limited-contention-protocols"><a class="markdownIt-Anchor" href="#有限竞争协议limited-contention-protocols"></a> 有限竞争协议(Limited-Contention Protocols)</h3>
<ul>
<li>将站点进行分组，在组间使用无冲突法协议，在组内采用竞争法协议进行信道分配
<ul>
<li>避免了竞争和空闲造成的浪费</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/lUpad8h6je2Z7yo.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>只要减少参与竞争的站数量，则站获得信道的概率就会增加。</li>
<li>通过调整每组中站点个数n来动态地进行信道分配。
<ul>
<li>轻载荷尽量用竞争法，将n增大</li>
<li>重载荷尽量用无冲突法，将n减小</li>
</ul>
</li>
</ul>
<hr />
<h3 id="无线局域网协议limited-contention-protocols"><a class="markdownIt-Anchor" href="#无线局域网协议limited-contention-protocols"></a> 无线局域网协议(Limited-Contention Protocols)</h3>
<ul>
<li>无线局域网络相比于有线网络更加复杂
<ul>
<li>节点可能有不同的覆盖范围
<ul>
<li>导致<code>隐蔽终端</code>和<code>暴露终端</code>问题</li>
</ul>
</li>
<li>节点无法检测出冲突
<ul>
<li>避免冲突的代价很昂贵</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/L4xyMESOGjoT92s.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li><code>隐藏终端问题</code>(hidden station problem)：由于竞争者离得太远而导致站无法检测到潜在的竞争者</li>
<li><code>暴露终端问题</code>(exposed station problem)：发送方侦听到传输，但能安全传输到不同的接收方</li>
</ul>
<hr />
<h4 id="冲突避免多路访问cmaca-multiple-access-with-collision-avoidance"><a class="markdownIt-Anchor" href="#冲突避免多路访问cmaca-multiple-access-with-collision-avoidance"></a> 冲突避免多路访问(CMACA, Multiple Access with Collision Avoidance)</h4>
<p><img src="https://s2.loli.net/2022/01/05/qdMbKtLJh4lBf1O.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>A首先给B发送一个<code>RTS</code> (Request To Send )帧，这个短帧 (30 字节)包含了随后将要发送的数据帧的长度</li>
<li>然后，B用一个 <code>CTS</code> (Clear to Send)作为应答，CTS 帧也包含了数据长度（从 RTS 帧中复制过来）。</li>
<li>A在收到了 CTS 帧之后便开始传输。</li>
<li>如果一个站<code>听到了 RTS 帧，那么它一定离 A 很近</code>，它必须保持沉默，至少等待足够长的时间以便在无冲突情况下 CTS 被返回给 A。
<ul>
<li>C 落在 A 的范围内，但不在 B 的范围内。因此，<code>它听到了 A 发出的 RTS</code>，但是没有听到 B 发出的 CTS 。只要它没有干扰 CTS ，那么在数据帧传送过程中，它可以自由地发送任何信息。即它是个<code>暴露终端</code></li>
</ul>
</li>
<li>如果一个站<code>听到了 CTS ，则它一定离 B 很近</code>，在<code>接下来的数据传送过程中</code>它必须一直保持沉默，只要检查 CTS 帧，该站就可以知道数据帧的长度（即数据传输要持续多久）。
<ul>
<li>D 落在 B 的范围内，但不在 A 的范围内。它听不到 RTS 帧，但是<code>听到了 CTS 帧</code>。只要听到了 CTS 帧，这意味着它与一个将要接收数据帧的站离得很近，所以，它就延缓发送任何信息<code>直到那个帧如期传送完毕</code>。</li>
<li>站 E 听到了这两条控制消息，和 D 一样在数据帧完成之前它必须保持安静。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="以太网ethernet"><a class="markdownIt-Anchor" href="#以太网ethernet"></a> 以太网(Ethernet)</h2>
<h3 id="以太网的产生和发展"><a class="markdownIt-Anchor" href="#以太网的产生和发展"></a> 以太网的产生和发展</h3>
<ul>
<li>以太网的起源:ALOHA无线电系统(1968-1972)</li>
<li>Xerox 创建第一个实验性的以太网(1972-1977)</li>
<li>DEC、Intel和Xerox将以太网标准化(1979-1983)</li>
<li>IEEE 802.3标准问世（1982年）,10BASE-5出现；</li>
<li>10BASE-T结构化布线的历史(1986-1990)</li>
<li>交换式和全双工制以太网的出现(1990-1994)</li>
<li>快速以太网的出现(1992-1995)</li>
<li>千兆网的出现(1996至今)</li>
</ul>
<hr />
<h4 id="以太网电缆ethernet-cabling"><a class="markdownIt-Anchor" href="#以太网电缆ethernet-cabling"></a> 以太网电缆(Ethernet Cabling)</h4>
<ul>
<li>有4种正式的<code>10 Mbps</code>以太网标准。
<ul>
<li>10Base-5：10Base-5是最初的<code>粗同轴电缆</code>以太网标准。</li>
<li>10Base-2：10Base-2是<code>细同轴电缆</code>以太网标准。</li>
<li>10Base-T：10Base-T是10 Mbps的<code>双绞线</code>以太网标准。</li>
<li>10Base-F：10Base-F是10 Mbps的<code>光缆</code>以太网标准。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/rjHSvBeFEDPUxoz.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<blockquote>
<p>IEEE 802.3 标准<br><br />
<img src="https://s2.loli.net/2022/01/05/zFbR67M8YOAeouh.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
</blockquote>
<p><img src="https://s2.loli.net/2022/01/05/Kjh2nBpk3aUGXMe.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/05/E3sg5GKWFPdIn8c.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h4 id="以太网中信号编码"><a class="markdownIt-Anchor" href="#以太网中信号编码"></a> 以太网中信号编码</h4>
<p><img src="https://s2.loli.net/2022/01/05/sU8GYTJCpRyMzSI.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="经典以太网-mac-子层协议"><a class="markdownIt-Anchor" href="#经典以太网-mac-子层协议"></a> 经典以太网 MAC 子层协议</h3>
<p><img src="https://s2.loli.net/2022/01/05/u5PnN6FRJ13sdXv.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>首先是 8 bytes 的前导码<code>(Preamble)</code>，每个字节包含比特模式<code>10101010</code>（除了最后一个字节的最后 2 位为 11 ）
<ul>
<li>这最后一个字节称为 802.3 的帧起始定界符 (Start of Frame, SOF)</li>
</ul>
</li>
<li>如果传输出去的目标地址第一位是 0，则表示这是一个普通地址；如果是 1，则表示这是一个组地址。
<ul>
<li>由全 1 组成的特殊地址保留用作<code>广播(broadcasting )</code></li>
<li>地址字段的前 3 个字节用作该站所在的组织<code>唯一标识符</code>(OUI, Organizationally Unique Identifier )</li>
</ul>
</li>
<li>采用<code>类型</code>(Type)或<code>长度</code>(Length)字段取决于是以太网帧还是 IEEE 802.3 帧。
<ul>
<li>类型字段指定了<code>把帧送给哪个进程处理</code>。</li>
<li>长度字段指明数据的长度
<ul>
<li>限定了最大长度(1500 bytes)</li>
</ul>
</li>
<li>任何值小于或等于 1500 可解释为长度字段，任何大于 1500 可解释为类型字段</li>
</ul>
</li>
<li>以太网要求有效帧必须<code>至少 64 字节长</code>，从目标地址算起直到校验和，包括这两个字段本身在内。如果帧的数据部分少于 46 个字节，则使用<code>填充 (Pad)</code> 字段来填充该帧，使其达到最小长度要求。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/jDtKeIFyU1JgVl8.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>限制最小帧长的最重要的原因是为了避免如上图所示情况当一个短帧还没有到达电缆远端的发送方，该帧的传送就已经结束：而在电缆的远端，该帧可能与另一帧发生冲突。此时无法检测冲突。</li>
</ul>
<hr />
<h4 id="二进制指数后退的-csmaca-the-binary-exponential-backoff-algorithm"><a class="markdownIt-Anchor" href="#二进制指数后退的-csmaca-the-binary-exponential-backoff-algorithm"></a> 二进制指数后退的 CSMA/CA (The Binary Exponential Backoff Algorithm)</h4>
<ul>
<li>一般地，在第 i 次冲突时，从<b> $ 0 $ ~ $2^i-1 $ </b>之间随机选择一个数，然后等待这么多个时间槽，之后再重试发送。
<ul>
<li>时间被分成离散的时槽，其长度等于在传输媒体上来回传输的时间（<code>帧时</code>），802.3标准规定为512比特时间。</li>
</ul>
</li>
<li>如果冲突的次数达到10次后，随机等待的<code>最大时槽数固定为1023</code>。在<code>16次</code>冲突后，站点放弃传输，并报告一个错误。</li>
</ul>
<hr />
<h3 id="以太网的性能"><a class="markdownIt-Anchor" href="#以太网的性能"></a> 以太网的性能</h3>
<p><img src="https://s2.loli.net/2022/01/05/BNqYt2Xr1mvjk5b.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="交换式以太网switched-ethernet"><a class="markdownIt-Anchor" href="#交换式以太网switched-ethernet"></a> 交换式以太网(Switched Ethernet)</h3>
<p><img src="https://s2.loli.net/2022/01/05/VPKRuWB2cGvU6yt.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>交换机以太网利用以太网交换机组网，既可以<code>将计算机直连到交换机的端口上</code>，也可以<code>将它们连入一个网段</code>，然后将这个网段连到交换机的端口。
<ul>
<li>如果将计算机直接连到交换机的端口，那么它将独享该端口提供的带宽</li>
<li>如果计算机通过以太网连入交换机，那么该以太网上的所有计算机共享交换机端口提供的带宽</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/Jaomq2DgSA1LOkT.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>交换机只<code>把帧输出到该帧想去的端口</code>。
<ul>
<li>当交换机端口接收到来自某个站的以太网帧，它就检查该帧的以太网地址，确定该帧前往的目的地端口</li>
</ul>
</li>
</ul>
<hr />
<h3 id="快速以太网fast-ethernet"><a class="markdownIt-Anchor" href="#快速以太网fast-ethernet"></a> 快速以太网(Fast Ethernet)</h3>
<ul>
<li>快速以太网技术100Base-T是由10Base-T标准以太网发展而来的。
<ul>
<li>其协议标准为1995年颁布的IEEE 802.3u，可<code>支持100 Mbps</code>的数据传输速率</li>
<li>与 10 Base-T 一样可支持共享式与交换式两种使用环境，在交换式以太网环境中可以实现全双工通信。</li>
<li>IEEE 802.3u 在 MAC 子层<code>仍采用CSMA/CD作为介质访问控制协议</code>，并保留了IEEE 802.3的帧格式<br />
<img src="https://s2.loli.net/2022/01/05/EIKoPxsX8aJHMyC.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/dnBmSjYkcO8paJM.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<blockquote>
<p>采用快速以太网集线器作为中央设备（100Base-TX集线器），使用非屏蔽5类双绞线以星型连接的方式连接以太网节点（工作站和服务器），以及连接另一个快速以太网集线器和10Base-T的共享集线器。</p>
</blockquote>
<h4 id="千兆以太网gigabit-ethernet"><a class="markdownIt-Anchor" href="#千兆以太网gigabit-ethernet"></a> 千兆以太网(Gigabit Ethernet)</h4>
<p><img src="https://s2.loli.net/2022/01/06/zlfUu2A1ymnYkQo.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/05/mNC9cuROfZzDLVn.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h2 id="无线局域网wireless-lans"><a class="markdownIt-Anchor" href="#无线局域网wireless-lans"></a> 无线局域网(Wireless LANs)</h2>
<h3 id="80211-体系结构和协议栈"><a class="markdownIt-Anchor" href="#80211-体系结构和协议栈"></a> 802.11 体系结构和协议栈</h3>
<p><img src="https://s2.loli.net/2022/01/05/LrO1A5MZCFdjtTD.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p>在<code>有架构模式</code>下，每个客户端与一个接入点 AP<code>( Access Point )</code>关联，该接入点又与其他网络连接。</p>
<ul>
<li>客户端发送和接收数据包都要通过 AP 进行。</li>
<li>几个接入点可通过一个称为<code>分布式系统( distribution system )</code>的有线网络连接在一起，形成一个扩展的 802.11 网络。
<ul>
<li>在这种情况下，客户端可以通过它们的接入点向其他客户端发送帧。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>自组织网络( ad hoc network )</code>模式下的网络由一组相互关联的计算机组成，它们<code>相互之间可以直接向对方发送帧。</code></p>
<ul>
<li>自组织网络并没有那么受欢迎。</li>
</ul>
</li>
</ul>
<hr />
<p><img src="https://s2.loli.net/2022/01/05/vkn8RlsWIHxp2uc.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /><br />
<img src="https://s2.loli.net/2022/01/05/ENFxsXyIkZRO92c.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>客户端和 AP 的协议枝相同。物理层对应于 OSI 的物理层</li>
<li>所有 802 协议的数据链路层分为两个或更多个子层
<ul>
<li>在 802.11 ，介质访控制 (MAC, Medium Access Control) 子层<code>决定如何分配信道</code></li>
<li>逻辑链路控制 (LLC, Logical Link Control) 子层的工作是<code>隐藏 802系列协议之间的差异</code>，使它们在网络层看来并无差别。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="80211-mac-子层协议"><a class="markdownIt-Anchor" href="#80211-mac-子层协议"></a> 802.11 MAC 子层协议</h3>
<ul>
<li>802.11 试图避免冲突，采用的协议称为带有冲突避免的 CSMA
<ul>
<li>需要发送帧的站必须<code>以随机后退开始</code>（除非它最近没有用过信道，并且信道处于空闲状态），而且它不等待冲突的发生。</li>
<li>该站将等待，直到信道处于闲置状态。
<ul>
<li>通过侦听确定在一个很短的时间内没有信号，然后倒计数空闲时间槽，<code>当有帧在发送时暂停该计数器</code></li>
<li>当计数器递减到 0,该站就发送自己的帧。</li>
<li>如果帧发送成功，<code>目标站立即发送一个短确认(ACK)</code></li>
<li>如果没有收到确认，则可推断出传输发生了错误，无论是冲突或是其他什么错。在这种情况下，发送方要<code>加倍后退选择的时间槽数，再重新试图发送</code>。如此反复，直到成功发送帧或达到重传的最大次数。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/UzvwhLV9srnb1Ry.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p>A 站首先发出一个帧。当 A 发送时，B 站和 C 站准备就绪发送。</p>
</li>
<li>
<p>它们看到信道正忙，便等待它变成空闲。</p>
</li>
<li>
<p>不久，A 收到一个确认，信道进入空闲状态。然而，<code>不是两个站都发出一帧</code>从而立即产生冲突，而是<code>B 站和C 站都执行后退算法</code>。</p>
</li>
<li>
<p>C 站选择了一个较短的后退时间，因而先获得发送权。B 站侦听到 C 在使用信道时<code>暂停自己的倒计时</code>，并在<code>C 收到确认之后立即恢复倒计时</code>。</p>
</li>
<li>
<p>一旦 B 完成了后退，立即发送自己的帧。</p>
</li>
<li>
<p>和以太网相比，这里有两个主要区别：</p>
<ul>
<li>首先，早期的后退有助于避免冲突。</li>
<li>其次，可以利用确认来推断是否发生冲突。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>不同站的<code>传输范围可能有所不同</code>。有线环境下，系统被设计成让所有站都可以听到对方。在射频传播的复杂环境下，这种状况并不适用于无线站。因此，类似前面提到的隐藏终端等问题就会出现。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/N5vQIAHaxgKyzBf.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>802.11 定义信道侦听包括<code>物理侦听</code>和<code>虚拟侦</code>听两部分。
<ul>
<li><code>物理侦听只是简单地检查介质</code>，看是否存在有效的信号</li>
<li>有了<code>虚拟侦听，每个站可以保留一个信道何时要用的逻辑记录</code>，这是通过跟踪<code>网络分配向量( NAV, Network Allocation Vector )</code>获得的。
<ul>
<li><code>NAV 信号是不传输的</code>，它们只是由站内部使用，提醒自己保留一定时间内的安静。</li>
<li>每个帧携带一个<code>NAV 字段，说明这个帧所属的一系列数据将传输多长时间</code>。无意中听到这个帧的站就知道无论自己是否能够侦听到物理信号，由 NAV所指出的时间段信道一定是繁忙的。</li>
<li><code>可选的 RTS/CTS 机制</code>使用 NAV 来防止隐藏终端在同一时间发送。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/b8yWnjSefmTOrE9.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<ul>
<li>802.11 个巧妙的机制来让 VoIP 通信先于对等流量传输。
<ul>
<li>它是作为一组扩展于2005 年被引入的，标准命名为 802.11e 。</li>
<li>它扩展了 CSMA/CA，并且仔细定义帧之间的各种时间间隔。</li>
<li>帧发出去后，<code>需要保持一段特定时间的空闲以便检查信道不在被用</code>，然后任何站才可以发送帧。这里的关键就在于为不同类型的帧确定不同的时间间隔。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/F6McJIWhtTZ1pLD.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>常规的数据帧之间的间隔称为 DCF 帧间隔 (<code>DIFS</code>, DCF InterFrame Spacing )</li>
<li>最短的间隔是<code>短帧间间隔</code>( <code>SIFS</code>, Short InterFrame Spacing )</li>
<li><code>仲裁帧间空间</code>(<code>AIFS</code>, Arbitration lnterFrame Space) 间隔显示了两个不同优先级的例子。短的时间间隔 AIFSl 小于 DIFS ，但比 SIFS 长。</li>
<li><code>扩展帧间间隔</code> (<code>EIFS</code>, Extended InterFrame Spacing)，仅用于一个站刚刚收到坏帧或未知帧后报告问题。</li>
</ul>
<hr />
<h3 id="80211-帧结构"><a class="markdownIt-Anchor" href="#80211-帧结构"></a> 802.11 帧结构</h3>
<ul>
<li>
<p>802.11 标准定义了三种不同类型的帧：<code>数据帧、控制帧和管理帧</code>。每一种帧都有一个头，包含了与 MAC 子层相关的各种字段。</p>
</li>
<li>
<p>根据类型不同，帧的结构存在差异</p>
</li>
<li>
<p><code>数据帧</code>有三个地址用于通过APs</p>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/pNPzMFfVu3q8XJY.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /><br />
<img src="https://s2.loli.net/2022/01/06/X8HOa3oYKIuUZFN.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>Protocol Version ― 表示 IEEE 802.11 标准版本。</li>
<li>Type ― 帧类型：管理、控制和数据。</li>
<li>Subtype ― 帧子类型：认证帧、解除认证帧、连接请求帧，连接响应帧、重新连接请求帧、重新连接响应帧、解除连接帧、信标帧、Probe 帧、Probe 请求帧或 Probe 响应帧。</li>
<li>To DS ― 当帧发送给 Distribution System（DS）时，该值设置为1。</li>
<li>From DS ― 当帧从 Distribution System（DS）处接收到时，该值设置为1。</li>
<li>MF ― More Fragment 表示当有更多分段属于相同帧时该值设置为1。</li>
<li>Retry ― 表示该分段是先前传输分段的重发帧。</li>
<li>Pwr ― Power Management，表示传输帧以后，站所采用的电源管理模式。</li>
<li>More ― More Data，表示有很多帧缓存到站中。</li>
<li>W ― WEP，表示根据WEP（Wired Equivalent Privacy） 算法对帧主体进行加密。</li>
<li>O ― Order 表示利用严格顺序服务类发送帧的顺序。</li>
<li>Duration 值用于网络分配向量（NAV）计算。</li>
<li>RA(receiver address)：无线网络中，该<code>数据帧的接收者</code></li>
<li>TA(transmitter address)：无线网络中，该<code>数据帧的发送者</code></li>
<li>DA(destine address)：该帧的<code>目的mac地址</code></li>
<li>SA(source address)：该帧的<code>源mac地址</code></li>
<li>Sequence Control ― 由分段号（4位）和序列号（12位）组成。</li>
<li>Data ― 发送或接收的信息。</li>
<li>CRC ― 包括32位的循环冗余校验（CRC）。</li>
</ul>
<hr />
<h2 id="宽带无线broadband-wireless"><a class="markdownIt-Anchor" href="#宽带无线broadband-wireless"></a> 宽带无线(Broadband Wireless)</h2>
<ul>
<li><code>802.16 被非正式称为全球微波接入互操作性</code>( <code>WiMAX</code>, Worldwide Interoperability for Microwave Access )</li>
</ul>
<hr />
<h3 id="80216-体系结构与协议栈"><a class="markdownIt-Anchor" href="#80216-体系结构与协议栈"></a> 802.16 体系结构与协议栈</h3>
<ul>
<li>无线客户端连接到有线基站（类似3G）</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/oPmWdhak6TFJ84G.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>用于空中接口的 802.16 协议栈总体结构与其他 802 网络相似，但有了更多的子层。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/i28lxuC5DQhYOKM.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>物理层上面是数据链路层，它包括 3 个子层。
<ul>
<li>最下面的安全子层涉及隐私和安全，它管理<code>加密、解密和密钥管理。</code></li>
<li>MAC 公共子层负责信道管理：基站调度下行信道，管理上行信道</li>
<li>特定服务汇聚子层(Convergence sublayer)采用了其他 802 协议的逻辑链路子层。它的功能是<code>为网络层提供接口</code>。
<ul>
<li>协议定义了不同的汇聚子层，以便与不同的上层进行无缝连接。</li>
<li>尽管标准还定义了诸如以太网和 ATM 协议的映射，最<code>重要的选择还是 IP</code> 。</li>
<li>由于 IP 是无连接，而 802.16 MAC子层是面向连接的，因此两层之间必须在地址和连接之间进行映射。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="80216-物理层"><a class="markdownIt-Anchor" href="#80216-物理层"></a> 802.16 物理层</h3>
<ul>
<li>802.16 标准的设计非常灵活在 2GHz 到 11 GHz 之间的范围内它都可以运行，并且支持大小不同的信道</li>
<li>这些信道上的传输<code>采用了 OFDM（正交频分复用）技术</code>，相比 802.11,802.16 OFDM 系统进行了优化设计，因而获得了许可频谱和广域传输的最大效益
<ul>
<li>信道被分成具有一个更长符号持续时间的许多子载波，以便忍受无线信号的更大衰减</li>
<li>每个子载波上的符号以 QPSK QAM-16 QAM-64 调制方案发送</li>
</ul>
</li>
<li>802.16 的设计者选择了一个在站之间划分信道的灵活方案，该方案称为<code>正交频分多址(OFDMA, Orthogonal Frequency Division Multiple Access)</code>
<ul>
<li>有了 OFDMA ，可以为不同的站分配不同的子载波集，因此可以同时有多个站发送或接收。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/ElrwF7n8UsgNAvt.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>它以一个前导码开始来同步所有的站，然后是来自基站的下行链路传输。
<ul>
<li>首先，基站发送流量图，告诉所有站<code>如何分配帧的下行子载波和上行子载波</code>。</li>
<li>基站控制着流量图，所以它可以根据每个站的需要一个帧一个帧地分配不同的带宽。</li>
<li>接下来，基站给不同的固定用户和移动站<code>发送突发流量</code>，所用的子载波由同时出现的流量图规定。</li>
<li>下行链路传输结束后，还要另外加一段<code>保护时间</code>，这样便于站从接收状态切换到发送状态。</li>
<li>最后，用户站和移动站通过上行链路向基站发送突发流量，所用的子载波通过流量图保留。</li>
<li>其中一个上行链路突发被保留用作<code>测距( ranging )</code>，这是一个过程，新的站通过它调整自己的时间，井向连接的基站请求初始带宽。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="80216-mac-子层协议"><a class="markdownIt-Anchor" href="#80216-mac-子层协议"></a> 802.16 MAC 子层协议</h3>
<ul>
<li><code>MAC 子层面向连接</code>，并且支持点对多点传输，这意味着一个基站可以和多个用户站通信。</li>
<li>下行链路方向的传输非常简单。
<ul>
<li>基站控制着物理层的 <code>“突发” (burst)</code>，用来给不同用户站发送信息。</li>
<li>MAC 子层把自己的帧封装到这结构中。为了减少开销，有几种不同的选择。
<ul>
<li>例如， MAC 帧可能被单独发送，或背靠背地打包成组一起发送</li>
</ul>
</li>
</ul>
</li>
<li>上行链路信道要复杂一些，因为多个需要接入的<code>用户要竞争它的使用权</code>。
<ul>
<li>上行信道的分配方案与服务质量问题有紧密关系。服务分为 4 类，分别定义如下：
<ol>
<li><strong>恒定比特率服务</strong>
<ul>
<li>目标是<code>传输未经压缩的语音信号</code></li>
<li>这种服务需要在预定的时间间隔中<code>发送预定数量的数据</code>。</li>
<li>具体做法是为这种类型的每个连接分配特定的“突发”，一旦带宽获得分配，则可自动用来发送“突发飞无须再次请求。</li>
</ul>
</li>
<li><strong>实时可变比特率服务</strong>
<ul>
<li>目标是<code>传输被压缩的多媒体</code></li>
<li>在所谓的软实时应用中，每个时刻需要的带宽可能都会发生变化。</li>
<li>具体做法是基站以一定的周期轮询用户，询问它每次传输需要多少带宽。</li>
</ul>
</li>
<li><strong>非实时可变比特率服务</strong>
<ul>
<li>目标是<code>非实时但繁重的传输任务</code></li>
<li>对于这种服务，基站要经常轮询用户，但不是按照严格预定的时间间隔</li>
</ul>
</li>
<li><strong>尽力而为服务</strong>
<ul>
<li>这里没有询问，用户必须与其他尽力而为型的用户竞争带宽。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="80216-帧结构"><a class="markdownIt-Anchor" href="#80216-帧结构"></a> 802.16 帧结构</h3>
<ul>
<li>所有 MAC 帧都以一个通用的头作为开始。头之后跟着一个可选的有效载荷字段和一个可选的校验和 (CRC) 字段</li>
<li>在<code>控制帧中有效载荷字段是不需要的</code>，例如，那些请求信道时间槽的控制帧。校验和也是可选的，这是因为在物理层上进行了纠错。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/mpnj1wtzfX4TsZ8.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li><strong>EC</strong> 比特指明了有效载荷字段是否经过了加密</li>
<li><strong>Type</strong> (类型)字段标识了该帧的类型，通常指明<code>是否存在封装和分段。</code></li>
<li><strong>CI</strong> 比特表明本帧是否包含最后的校验和</li>
<li><strong>EK</strong> 字段指明了所使用的加密密钥</li>
<li><strong>Length</strong>（长度）字段给出了该帧的总长度，<code>包括头部。</code></li>
<li><strong>Connection ID</strong> 字段指明了该帧属于哪个连接</li>
<li><strong>Header CRC</strong> 字段是一个仅仅<code>针对头的校验和</code>，所用的多项式为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mn>8</mn></msup><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x^8+x^2+x+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>(b) 显示了一个用来请求带宽的控制帧，它的开始处是一个“ 1 ”而不是“ 0 ”，它的第 2 个和第 3 个字节构成了一个 16 位的数字，该数字说明了<code>需要多少带宽来运载规定数量的字节</code></li>
<li>带宽请求帧并不包含有效载荷，也不包含针对整帧的 CRC.</li>
</ul>
<hr />
<h2 id="ieee-8022-logical-link-controlllc逻辑链路控制"><a class="markdownIt-Anchor" href="#ieee-8022-logical-link-controlllc逻辑链路控制"></a> IEEE 802.2: Logical Link Control(LLC，逻辑链路控制)</h2>
<p><img src="https://s2.loli.net/2022/01/05/NRgiPtTxenhrQK3.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>为数据链路层提供差错控制和流量控制</li>
<li>从网络层隐藏 802.3/4/5/… 固有的差异</li>
<li>提供三种服务
<ul>
<li>不可靠的数据报服务。</li>
<li>确认的数据报服务。</li>
<li>可靠的面向连接的服务。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="数据链路层交换"><a class="markdownIt-Anchor" href="#数据链路层交换"></a> 数据链路层交换</h2>
<h3 id="网桥"><a class="markdownIt-Anchor" href="#网桥"></a> 网桥</h3>
<ul>
<li>采用称为<code>网桥(bridge)</code>的设备来把多个局域网联结起来组成更大的局域网</li>
<li>网桥根据<code>MAC帧的目的地址</code>对帧进行<code>转发和过滤</code></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/4wc8BkzKWneDtdR.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>通过桥设备可以实现<code>异构协议之间的互联</code></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/z4DfXmMPeKuTCVL.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>以下为IEEE 802 帧格式</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/AyMPJYItT3ERkG9.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>下图展示具有四个 LAN 和两个网桥的配置</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/R3tJOEVg8anPfNq.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="spanning-tree-bridges生成树桥"><a class="markdownIt-Anchor" href="#spanning-tree-bridges生成树桥"></a> Spanning Tree Bridges（生成树桥）</h3>
<p><img src="https://s2.loli.net/2022/01/05/BWASYH5pCIfs7Ui.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>用<code>STP生成树协议</code>来处理由于通过桥设备连接了若干局域网以后在局域网中出现回路导致局域网阻塞的问题</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/nmzg2PiQkyYRH1o.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>虚线为备用连接，利用<code>树的特征</code>来找到备用连接
<ul>
<li>树的根节点到叶节点没有回路</li>
</ul>
</li>
</ul>
<hr />
<h3 id="中继器集线器网桥交换机路由器和网关"><a class="markdownIt-Anchor" href="#中继器集线器网桥交换机路由器和网关"></a> 中继器／集线器／网桥／交换机／路由器和网关</h3>
<p><img src="https://s2.loli.net/2022/01/06/iCjLyTwMHoeXJfD.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/05/zRTCoiNh4PGa7ZE.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="虚拟局域网virtual-lans"><a class="markdownIt-Anchor" href="#虚拟局域网virtual-lans"></a> 虚拟局域网(Virtual LANs)</h3>
<ul>
<li>主要考虑局域网安全性，在物理上对局域网进行<code>逻辑上的划分</code>，即物理上在一个局域网里，但不互通，如同在两个局域网中</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/IowUaBC3dGqVeAF.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>虚拟局域网的实例</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/05/VNZ3RfCqHQEM1c5.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>利用 IEEE 802.1Q 进行划分</li>
</ul>
<hr />
<h4 id="ieee-8021q-协议"><a class="markdownIt-Anchor" href="#ieee-8021q-协议"></a> IEEE 802.1Q 协议</h4>
<ul>
<li>在802.3协议基础上增加了VLAN Tag</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/DUowgBfNZE4ryKX.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>User Priority：定义用户优先级，包括8个优先级别。</li>
<li>CFI：以太网交换机中，规范格式指示器总被设置为0。</li>
<li>VID：VLAN ID 是对 VLAN 的识别字段，<code>该字段为12位</code>。VID=0 用于识别帧优先级。 4095（FFF）作为预留值，所以 VLAN配置的最大可能值为4094。
<ul>
<li>识别 VLAN：
<ul>
<li>端口，一个端口上的所有机器都属于同一个VLAN</li>
<li>MAC地址</li>
<li>第 3 层协议或 IP 地址，检查帧的有效载荷字段</li>
</ul>
</li>
</ul>
</li>
<li>在进行帧的转发的过程中，只在VLAN Tag标识的VLAN中进行转发，不同VLAN之间的节点无法通讯，从而保证局域网的安全性</li>
</ul>
<hr />
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p><img src="https://s2.loli.net/2022/01/06/jnTM3Ytsfmb9vlR.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h1 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h1>
<h2 id="网络层的设计问题"><a class="markdownIt-Anchor" href="#网络层的设计问题"></a> 网络层的设计问题</h2>
<h3 id="存储转发数据包交换"><a class="markdownIt-Anchor" href="#存储转发数据包交换"></a> 存储转发数据包交换</h3>
<p><img src="https://s2.loli.net/2022/01/06/UMacsE38BvYeVto.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>如果一台主机要发送一个数据包：
<ol>
<li>它就将数据包传输给最近的路由器，路由器可能在它自己的 LAN 上，也可能在一条通向 ISP 的点到点链路上</li>
<li>在该数据包到达路由器，并且路由器的链路层<code>完成了对它校验和的验证</code>之后，它先被存储在路由器上</li>
<li>然后沿着路径被转发到下一个路由器，直至到达目标主机，这里就是数据包的目的地。</li>
</ol>
</li>
</ul>
<hr />
<h3 id="提供给传输层的服务"><a class="markdownIt-Anchor" href="#提供给传输层的服务"></a> 提供给传输层的服务</h3>
<ul>
<li>
<p>在设计网络层服务时，一定要牢记下面这些目标</p>
<ol>
<li>向上提供的服务应该独立于路由器技术。</li>
<li>应该向传输层<code>屏蔽</code>路由器的数量、类型和拓扑关系。</li>
<li>传输层可用的网络地址应该有一个统一编址方案，甚至可以跨越 LAN 和 WAN</li>
</ol>
</li>
<li>
<p>网络层提供给传输层的服务有面向连接和面向无连接之分。</p>
<ul>
<li>网络层服务方式的不同主要取决于通信子网的内部结构。</li>
<li>面向无连接的服务在通信子网内通常以<code>数据报</code>（Datagram）方式实现。</li>
<li>面向连接的服务则通常采用<code>虚电路</code>（Virtual Circuit，简称VC）方式实现。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="无连接服务的实现"><a class="markdownIt-Anchor" href="#无连接服务的实现"></a> 无连接服务的实现</h3>
<p><img src="https://s2.loli.net/2022/01/06/sh78qdCizjyrADV.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>传输层代码运行在 H1 上，通常在操作系统内部。它在消息的前面加上一个传输头，然后将结果交给网络层</li>
<li>每一台路由器都有一个<code>内部表</code>，它指明了针对每一个可能的目标地址应该将数据包送到哪里去。
<ul>
<li>每个表项由两部分数据组成：<code>目标地址和通往目标地址所使用的出境线路</code>。</li>
</ul>
</li>
<li>每个数据包携带一个目标 IP 地址，路由器使用该地址来单独转发每一个数据包。
<ul>
<li>不同的包可能有不同的路线</li>
</ul>
</li>
</ul>
<hr />
<h3 id="面向连接服务的实现"><a class="markdownIt-Anchor" href="#面向连接服务的实现"></a> 面向连接服务的实现</h3>
<ul>
<li>使用<code>内部标签</code>沿着虚拟电路转发数据包
<ul>
<li>需要提前建立虚拟电路（VC）</li>
</ul>
</li>
<li>隐藏在虚电路背后的思想是<code>避免为每个要发送的数据包选择一条新路径</code>
<ul>
<li>当建立一个连接时，从源机器到目标机器之间的一条路径就被当作这个连接的一部分确定了下来，并且保存在这些中间路由器的表中</li>
<li>所有需要在这个连接上通过的流量，都使用这条路径</li>
<li>当连接被释放之后，虚电路也随之消失。</li>
<li>在面向连接的服务中，<code>每个数据包包含一个标识符，指明了它属于哪一条虚电路</code>。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/qXFiAu9jGL8rE61.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="虚电路与数据报网络的比较"><a class="markdownIt-Anchor" href="#虚电路与数据报网络的比较"></a> 虚电路与数据报网络的比较</h3>
<p><img src="https://s2.loli.net/2022/01/06/IrF8o7mxaCHgEOZ.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>在网络内部，数据报和虚电路网络之间存在着几个方面的权衡
<ul>
<li>建立时间和地址解析时间:
<ul>
<li>使用虚电路需要一个建立阶段，这个阶段既花费时间也消耗资源。然而，一旦付出了这个代价，处理一个数据包的方法却非常简单：<code>路由器只要使用电路号作为索引，在表中找到该数据包的去向即可</code></li>
<li>在数据报网络中，不需要建立电路，但路由器需要执行一个更为复杂的查找过程以便找到目标表项。</li>
</ul>
</li>
<li>数据报网络所用的目标地址比虚电路网络所用的电路号要长，因为数据报网络的目标地址具备全局意义。
<ul>
<li>如果数据包相当短，在每个数据包中都包括完整的目标地址可能意味着大量的协议开销，因而造成带宽资源的浪费。</li>
</ul>
</li>
<li>另一个问题是路由器内存所要求的表空间的数量。
<ul>
<li>在数据报子网中，针对每一个可能的目标地址都要求有一个表项</li>
<li>在虚电路网络中，只要为每一条虚电路提供一个表项即可</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="路由算法"><a class="markdownIt-Anchor" href="#路由算法"></a> 路由算法</h2>
<ul>
<li>所谓<code>路由</code>是指为到达目的网络所进行的最佳路径选择，路由是网络层最重要的功能。</li>
<li>在网络层完成路由功能的设备被称为<code>路由器</code>，路由器是专门设计用于实现网络层功能的网络互连设备
<ul>
<li>除了路由器外，某些交换机里面也可集成带网络层功能的模块即路由模块，带路由模块的交换机又称<code>三层交换机</code>。</li>
</ul>
</li>
<li>另外，在某些操作系统软件中也可以实现网络层的路由功能，在操作系统中所实现的路由功能又称为软件路由</li>
</ul>
<hr />
<h3 id="路由协议"><a class="markdownIt-Anchor" href="#路由协议"></a> 路由协议</h3>
<ul>
<li>
<p>路由器将所有有关如何到达目的网络的最佳路径信息以数据库表的形式存储起来，这种专门用于存放路由信息的表被称为<code>路由表</code>。路由表的不同表项可给出到达不同目的网络所需要历经的路由器接口信息。</p>
</li>
<li>
<p>路由器的某一个接口在收到帧后，如何路由：</p>
<ul>
<li>首先进行帧的拆封以便从中分离出相应的IP分组</li>
<li>然后利用子网掩码<code>求“与”</code>的方法从IP分组中提取出目标网络号</li>
<li>将目标网络号与路由表进行比对看能否找到一种匹配，即确定是否存在一条到达目标网络的最佳路径信息。</li>
<li>若存在匹配，则将IP分组重新封装成端口所期望的帧格式并将其从路由器相应的端口转发出去；<code>若不存在匹配，则将相应的IP分组丢弃。</code></li>
</ul>
</li>
<li>
<p>查找路由表以获得最佳路径信息的过程被称为路由器的<code>“路由”功能</code>，而将从接收端口进来的数据在输出端口重新转发出去的功能称为路由器的<code>“交换”功能</code>。<code>“路由”与“交换”是路由器的两大基本功能。</code></p>
</li>
<li>
<p>在网络层用于动态生成路由表信息的协议被称为<code>路由协议</code>，路由协议使得网络中的路由设备能够相互交换网络状态信息，从而在内部生成关于网络连通性的映像（Map）并由此计算出到达不同目的网络的最佳路径或确定相应的转发端口。</p>
</li>
<li>
<p>路由协议的核心是<code>路由选择算法</code>。不同的路由选择算法通常会采用不同的评价因子及权重来进行最佳路径的计算，常见的评价因子包括<code>带宽、可靠性、延迟、负载、跳数和费用</code>等。</p>
</li>
</ul>
<hr />
<h3 id="路由算法-2"><a class="markdownIt-Anchor" href="#路由算法-2"></a> 路由算法</h3>
<ul>
<li>
<p>好的路由算法需要：</p>
<ul>
<li>Correctness(正确性)</li>
<li>Simplicity(简单性)</li>
<li>Robustness(健壮性)</li>
<li>Stability(稳定性)</li>
<li>Fairness(公平性)</li>
<li>Optimality(最优性)</li>
</ul>
</li>
<li>
<p>在路由器中维持一个能正确反映网络拓扑与状态信息的路由表对于路由器完成路由功能是至关重要的。通常有两种方式可用于路由表信息的生成和维护，即分别是<code>静态路由和动态路由</code></p>
<ul>
<li><code>静态路由</code>是指网络管理员根据其所掌握的网络连通信息<code>以手工配置方式创建的路由表表项</code>。
<ul>
<li>这种方式要求网络管理员对网络的拓扑结构和网络状态有着非常清晰的了解，而且当网络连通状态发生变化时，静态路由的更新也要通过手工方式完成。</li>
</ul>
</li>
<li>能<code>自动适应</code>网络状态变化而对路由表信息进行动态更新和维护的路由生成方式，这就是<code>动态路由</code>。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/otZPaf4yGWDdc1M.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="优化原则"><a class="markdownIt-Anchor" href="#优化原则"></a> 优化原则</h3>
<p><img src="https://s2.loli.net/2022/01/06/ZPNrCnsFRjhY7tO.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li><code>最优路径</code>的一般陈述如下：如果路由器 J 在从路由器 I 到路由器 K 的最优路径上，那么从 J 到 K 的最优路径也必定遵循同样的路由。</li>
<li>作为最优化原则的一个直接结果，从所有的源到一个指定目标的<code>最优路径的集合</code>构成了一棵以目标节点为根的树。这样的树称为<code>汇集树 (sink tree)</code></li>
</ul>
<hr />
<h3 id="最短路径算法shortest-path-routing"><a class="markdownIt-Anchor" href="#最短路径算法shortest-path-routing"></a> 最短路径算法(Shortest Path Routing)</h3>
<ul>
<li>基本想法是构造一张网络图<code>（无向图）</code>，图中的每个节点代表一个路由器，每条边代表一条通信线路或者链路。
<ul>
<li>为了选择一对给定路由器之间的路由，算法只需要在图中找出它们之间的最短路径。</li>
</ul>
</li>
<li>最短路径（ shortest path ）概念：
<ul>
<li>一种测量路径长度的方法是跳数</li>
<li>另一种度量是以千米为单位的地理距离</li>
<li>除跳数和物理距离之外，还可以用许多其他度量来标示路径的长短。例如，图中每条边用一个标准测试包的平均延迟来标记</li>
<li>一般情况下，边上面的标记可以作为距离、带宽、平均流量、通信成本、平均延迟等其他因素的一个函数</li>
</ul>
</li>
<li>给定一个图，计算两个节点之间最短路径的算法己经有几个：Dijkstra 算法
<ul>
<li>每一个节点都标出了（在圆括号内〉从源节点沿着己知的最佳路径到达本节点的距离。</li>
<li>初始时，所有的路径都不知道，因此所有节点都被标记为<code>无限远</code>。</li>
<li>初始时，所有的标记都是<code>暂时的</code>。当发现一个标记代表了从源节点到该节点的<code>最短可能路径</code>，该标记就变成<code>永久</code>，以后不再改变。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/wQjPn6ZGmhV7I9z.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="泛洪算法flooding"><a class="markdownIt-Anchor" href="#泛洪算法flooding"></a> 泛洪算法(Flooding)</h3>
<ul>
<li>在实现路由算法时，每个路由器必须<code>根据本地知识而不是网络的全貌</code>做决策。一个简单的本地技术是泛洪（ flooding ）
<ul>
<li>这种技术<code>将每一个入境数据包发送到除了该数据包到达的那条线路以外的每条出境线路</code>。</li>
</ul>
</li>
<li>泛洪法会产生大量的重复数据包，除非采取某些措施来抑制泛洪过程，否则将会产生无限多的数据包：
<ul>
<li>其中一项措施是在每个数据包的头中设置一个跳计数器，每经过一跳该计数器减一，当计数器到达<code>0 时就丢弃该数据包</code>。
<ul>
<li>理想情况下，<code>跳计数器的初始值应该等于从源端到接收方之间路径的长度</code>。如果发送方不知道该路径有多长，它可以将计数器的初始值设置为最坏情形下的长度，即网络的直径</li>
<li>带有跳计数器的泛洪能够产生随着跳数增大而指数增长的重复数据包</li>
</ul>
</li>
<li>抑制数据包泛滥的一种更好技术是<code>让路由器跟踪己经泛洪过的数据包</code>，从而避免第二次发送它们。
<ul>
<li>实现这个目标的一种方式是让每个源路由器在接收来自主机的数据包时填上一个序号，然后每个路由器为每个源路由器准备一张表，记录己经观察到的来自源路由器的序号。如果入境数据包在这张表中，它就不能再被泛洪到其他路由器。</li>
</ul>
</li>
</ul>
</li>
<li>对于发送大多数数据包来说，泛洪算法是不切实际的，但它确实有一些重要的用途：
<ul>
<li>它确保数据包能被传送到网络中的每个节点，对于广播信息来说，这是一种有效的广播手段。</li>
<li>泛洪途径的鲁棒性非常好。即使大量路由器被炸成碎片（例如，位于战争地区的一个军事网络），泛洪也能找到一条路径（如果存在），使得数据包到达目的地。</li>
<li>泛洪还可用作其他路由算法进行比较的性能度量。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="距离矢量算法distance-vector-routing"><a class="markdownIt-Anchor" href="#距离矢量算法distance-vector-routing"></a> 距离矢量算法(Distance Vector Routing)</h3>
<h4 id="具体算法"><a class="markdownIt-Anchor" href="#具体算法"></a> 具体算法</h4>
<ul>
<li>距离矢量路由算法是这样工作的:
<ul>
<li>每个路由器维护一张表（即一个矢量），表中列出了当前己知的到每个目标的最佳距离，以及所使用的链路。</li>
<li>这些表通过邻居之间相互交换信息而不断被更新，最终每个路由器都了解到达每个目的地的最佳链路。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/w6BoWUi38JKZljg.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>在距离矢量路由算法中，每个路由器维护一张路由表，它以网络每个路由器为索引，并且每个路由器对应一个表项。
<ul>
<li>该表项包含两部分：到达该目标路由器的首选出境线路，以及到达该目标路由器的距离估计值</li>
<li>如果度量值为传播延迟，则路由器很容易测量出链路的传播延迟。它只要直接发送<code>一个特殊的 ECHO 数据包</code>给邻居，邻居收到后盖上时间戳，尽可能快地发回来即可。</li>
</ul>
</li>
<li>每个路由器向与它<code>相邻的站点</code>发送一个包含它到所有其他路由器的距离的向量（最短路径或最小代价）</li>
<li>路由器根据邻居发送的距离—矢量的动态信息启动算法，更新路由表</li>
<li>距离矢量路由的计算举例:<br />
<img src="https://s2.loli.net/2022/01/06/p4alwOdeSCxBfW9.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>距离矢量路由建立路由表的初始过程:<br />
<img src="https://s2.loli.net/2022/01/09/olscdy6UIfZ7EVH.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>距离矢量路由网络发现过程:<br />
<img src="https://s2.loli.net/2022/01/09/7DdFxbjoqgWJraK.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" />
<ul>
<li>如果网络中的最长路径为N，则算法经过N次迭代计算后收敛。即第N步之后，网上的所有路由器都获得到达信宿40.0.0.0的路由信息。</li>
</ul>
</li>
</ul>
<hr />
<h4 id="距离矢量路由的收敛性问题"><a class="markdownIt-Anchor" href="#距离矢量路由的收敛性问题"></a> 距离矢量路由的收敛性问题</h4>
<ul>
<li>问题:
<ul>
<li>逐站传递更新信息，算法的收敛速度慢
<ul>
<li>整个网络最佳路径的寻找过程称为收敛 (convergence )</li>
<li>对于好消息的反应非常迅速，而对于坏消息的反应异常迟缓</li>
</ul>
</li>
<li>有可能出现各站路由信息不一致</li>
<li>有可能传播错误的路由信息</li>
</ul>
</li>
<li>后果
<ul>
<li>在站点间构成更新路由的路径环(Routing Loops)</li>
<li>计数至无穷大(Count to Infinity)<br />
<img src="https://s2.loli.net/2022/01/06/MSQbunK2ypxzr3E.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>解决办法：定义路径代价的<code>最大值</code>（Maximum）</li>
</ul>
</li>
<li>提高收敛速度：
<ul>
<li>水平分割（Split Horizon）</li>
<li>毒性逆转（Poison Reverse）</li>
<li>保持计时（Hold-Down Timers）</li>
<li>触发更新（Triggered Updates）</li>
</ul>
</li>
</ul>
<hr />
<h4 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h4>
<ul>
<li>采用最短路径准则，计算D信宿(距离，下站)；</li>
<li>每个站点只知道自己和邻居的局部信息，在自己的刷新周期到来时，根据邻居的路由变化重新启动算法；</li>
<li>算法的收敛速度慢（特别是对网络崩溃）造成全网信息的不一致，导致产生路径环，使计数至无穷大；</li>
<li>当路径环产生时，定义距离的最大值可防止算法进入死循环，解决计数至无穷大问题</li>
</ul>
<hr />
<h3 id="链路状态路由link-state-routing"><a class="markdownIt-Anchor" href="#链路状态路由link-state-routing"></a> 链路状态路由(Link State Routing)</h3>
<ul>
<li>当网络拓扑结构发生变化后距离矢量路由算法需要太长时间才能收敛到稳定状态（由于无穷计数问题）。因此，距离矢量路由算法被一个全新的算法所替代，该算法称为<code>链路状态路由算法（ link state routing ）</code></li>
<li>今天，链路状态路由算法的变种算法－－一IS-IS 或者 OSPF 己经成为大型网络或 Internet 应用最为<code>广泛的路由算法</code>。</li>
<li>每一个路由器必须完成以下的事情，算法才能正常工作：
<ol>
<li>发现它的邻居节点，并了解其网络地址。</li>
<li>设置到每个邻居节点的距离或者成本度量值。</li>
<li>构造一个包含所有刚刚获知的链路信息包。</li>
<li>将这个包发送给所有其他的路由器，并接收来自所有其他路由器的信息包。</li>
<li>计算出到每个其他路由器的最短路径。</li>
<li>实际上，算法<code>将完整的拓扑结构分发给了每一个路由器</code>。然后每个路由器运行 Dijkstra算法就可以找出从本地到每一个其他路由器的最短路径。</li>
</ol>
</li>
</ul>
<hr />
<ul>
<li>发现邻居:
<ul>
<li>当一个路由器启动时，它的第一个任务是找出哪些路由器是它的邻居。
<ul>
<li>为了实现这个目标，它只需在每一条点到点线路上发送一个<code>特殊的 HELLO 数据包</code>。</li>
<li>线路另一端的路由器应该返回一个应答说明自己是谁。<br />
<img src="https://s2.loli.net/2022/01/06/7yKJTDMckjhNpx9.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" />
<ul>
<li>模拟局域网的一个更好方法来是把它看作一个节点</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>设置链路成本
<ul>
<li>如果网络在地理上分散，链路的延迟可以作为成本的组成部分</li>
<li>确定这种延迟的最直接方法是通过线路给另一边发送一个<code>特殊的ECHO 数据包</code>，要求对方立即发回。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>构造链路状态包(Building Link State Packets)
<ul>
<li>一旦收集到了所需要的交换信息，每个路由器的下一步工作是构建一个包含所有这些信息的数据包。
<ul>
<li>该数据包的内容首先是发送方的标识符，接着是一个序号（ Seq ）和年龄，以及一个邻居列表</li>
<li>对于每个邻居，同时要给出到这个邻居的延迟。<br />
<img src="https://s2.loli.net/2022/01/06/uwhZOAEdCbWJTyG.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>分发链路状态包
<ul>
<li><code>序号随着每一个新数据包发出而逐一递增</code>。路由器记录下它所看到的所有（源路由器、序号）对。当一个新的链路状态数据包到达时，路由器检查这个新来的数据包是否己经出现在上述观察到的列表中。
<ul>
<li>如果这是一个新数据包，则把它转发到除入境线路之外的所有其他线路上。如果这是一个重复数据包，则将它丢弃。</li>
<li>如果一个路由器崩溃了，那么它将丢失所有的序号记录表。如果它再从 0 开始，那么，下一个数据包将被作为重复数据包而拒绝。</li>
</ul>
</li>
<li>为了解决序号重启或出错的问题，在每个数据包的序号之后包含一个<code>年龄（ age ）字段</code>
<ul>
<li>每秒钟将年龄减 1，<code>当年龄字段的值被减到 0 时，来自路由器的该信息将被丢弃</code>。<br />
<img src="https://s2.loli.net/2022/01/06/Sg3pzhCb2uHoTsD.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li>这里的每一行对应于一个刚刚到达的，但是还没有完全处理完毕的链路状态数据包。</li>
<li>发送标志表明该数据包必须在所指示的线路上发送。确认标志表明它必须在这条线路上得到确认。</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>计算新路由
<ul>
<li>一旦路由器己经积累了全部的链路状态数据包之后，它就可以构造出完整的网络图</li>
<li>可以在路由器本地运行 Dijkstra 算法，以便构建出从本地出发到所有可能目标的最短路径</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>距离矢量路由和链路状态路由的比较：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">距离矢量路由</th>
<th style="text-align:center">链路状态路由</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">通过与邻居的信息交换获得网络拓扑知识</td>
<td style="text-align:center">全网获得共同的全局性网络拓扑知识</td>
</tr>
<tr>
<td style="text-align:center">路由计算是增加路由器之间的站点数（hops）</td>
<td style="text-align:center">计算到达其他站点的最短路径</td>
</tr>
<tr>
<td style="text-align:center">定期刷新路由：收敛慢</td>
<td style="text-align:center">触发刷新：收敛快</td>
</tr>
<tr>
<td style="text-align:center">向相邻站点传送路由表的副本</td>
<td style="text-align:center">向其他站点发送链路状态的动态变化</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="层次路由hierarchical-routing"><a class="markdownIt-Anchor" href="#层次路由hierarchical-routing"></a> 层次路由(Hierarchical Routing)</h3>
<ul>
<li>在采用了分层路由之后，<code>路由器被划分成区域（region）</code>。每个路由器知道如何将数据包路由到自己所在区域内的目标地址，但是对于其他区域的内部结构毫不知情。<br />
<img src="https://s2.loli.net/2022/01/06/Ag18bpsaLne4KMx.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" />
<ul>
<li>如果采用分级路由，则路由表如图 5-14 © 所示，所有针对本区域内的路由器表项都跟原先一样</li>
<li>但是，所有<code>到其他区域的路由都被压缩到了单个路由器</code>中．</li>
</ul>
</li>
<li>优点：节省路由器空间</li>
<li>缺点：可能增加路径长度</li>
</ul>
<hr />
<h3 id="广播路由broadcast-routing"><a class="markdownIt-Anchor" href="#广播路由broadcast-routing"></a> 广播路由(Broadcast Routing)</h3>
<ul>
<li><code>同时给全部目标地址发送一个数据包称为广播（broadcasting）</code></li>
<li>为了实现广播，人们己经提出了各种各样的方法：
<ul>
<li>让源机器简单地给每一个目标单独发送一个数据包
<ul>
<li>非常浪费带宽，并要具有所有路由器的完整列表</li>
</ul>
</li>
<li>泛洪路由
<ul>
<li>比较浪费带宽</li>
</ul>
</li>
<li><code>多目标路由（multidestination routing）</code>，每个数据包包含一组目标地址，或者一个位图，由该位图指定所期望到达的目标。
<ul>
<li>必须知道所有目标路由器地址</li>
</ul>
</li>
<li>逆向路径转发（reverse path forwarding）</li>
</ul>
</li>
</ul>
<hr />
<h3 id="逆向路径转发reverse-path-forwarding"><a class="markdownIt-Anchor" href="#逆向路径转发reverse-path-forwarding"></a> 逆向路径转发(reverse path forwarding)</h3>
<ul>
<li>当一个广播分组到达一个路由器的时候，该路由器对它进行检查，看它到来的那条线路是否是<code>通常用来给广播源发送分组的那条线路</code></li>
<li>如果是，则很可能该分组是沿着最佳路径被转发过来的，因而是到达当前路由器的第一个副本，那么路由器将该分组转发到除了到来线路之外的所有其他线路上。</li>
<li>否则，该分组被当作一个可能的重复分组而丢弃。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/M7JObcuhz8rWKwE.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h2 id="拥塞控制算法congestion-control-algorithms"><a class="markdownIt-Anchor" href="#拥塞控制算法congestion-control-algorithms"></a> 拥塞控制算法(Congestion Control Algorithms)</h2>
<h3 id="拥塞控制的一般原则"><a class="markdownIt-Anchor" href="#拥塞控制的一般原则"></a> 拥塞控制的一般原则</h3>
<ul>
<li><code>拥塞 (congestion )</code>：（一部分）网络中存在太多的数据包导致数据包被延迟延迟和丢失，从而降低了传输性能</li>
<li>流量控制和拥塞控制
<ul>
<li>拥塞控制：确保网络能够承载所有到达的流量</li>
<li>流量控制：确保一个快速的发送方不会持续地以超过接收方接收能力的速率传输数据。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/W9svXgASr21KFql.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>随着负载接近承载能力，偶尔突发的流量填满了路由器内部的缓冲区，因而某些数据包会被丢失。</li>
<li><code>拥塞崩溃( congestion collapse )</code>：随着注入负载的增加到超出网络的容量，网络性能骤降</li>
<li>开环和闭环
<ul>
<li>开环通过良好的设计解决问题，不考虑网络的当前状态做出决策。</li>
<li>闭环基于反馈环。
<ul>
<li>监控系统。
<ul>
<li>检测何时何地发生拥塞。</li>
</ul>
</li>
<li>将信息传递到可以采取行动的地方。</li>
<li>调整系统操作以纠正问题。</li>
</ul>
</li>
</ul>
</li>
<li>解决方案：<code>增加资源</code>（开环系统）或<code>减少负载</code>（闭环系统）</li>
<li>拥塞预防策略：<br />
<img src="https://s2.loli.net/2022/01/09/hDwjvQSZEoFIb96.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
<hr />
<h3 id="拥塞控制的途径"><a class="markdownIt-Anchor" href="#拥塞控制的途径"></a> 拥塞控制的途径</h3>
<p><img src="https://s2.loli.net/2022/01/06/aJpcy5uswnIKzoS.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h4 id="虚电路子网中的拥塞控制"><a class="markdownIt-Anchor" href="#虚电路子网中的拥塞控制"></a> 虚电路子网中的拥塞控制</h4>
<ul>
<li>在一个虚电路网络中，如果新的连接将导致网络变得拥挤不堪，那么就应该拒绝这种新连接的建立。这种控制称为<code>准入控制(admission control)</code></li>
<li>准入控制还可以和流量感知路由相结合，在虚电路建立过程中，考虑<code>绕开流量热点区域</code>的路由</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/tAD5oWMlHRI6ErF.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h4 id="数据报子网中的拥塞控制"><a class="markdownIt-Anchor" href="#数据报子网中的拥塞控制"></a> 数据报子网中的拥塞控制</h4>
<ul>
<li>首先，路由器必须确定何时快要接近拥塞，最好在拥塞发生之前能确定。为此，每个路由器可连续监测它正在使用的资源。
<ul>
<li>三种可能的资源分别是：
<ul>
<li>输出线路的利用率</li>
<li>在路由器内缓冲的排队数据包</li>
<li>由于没有足够的缓冲而丢失的数据包数量</li>
</ul>
</li>
</ul>
</li>
<li>监控其输出线的利用率：
<ul>
<li>U，该线路的最近利用率 或 排队延迟估计</li>
<li>f，瞬时线路利用率，（0 或 1） 或 瞬时队列长度的样值</li>
<li>a,（常数）决定路由器忘记最近历史的速度，<code>这就是所谓的指数加权移动平均</code></li>
<li>$ U_{new} = a * U_{old} + (1-a) * f $</li>
</ul>
</li>
<li>当 U 移动到阈值以上时，路由器就要注意开始拥塞了（<code>警告状态</code>）</li>
</ul>
<hr />
<blockquote>
<p>路由器必须及时把反馈信息传递给造成拥塞的发送方。拥塞是网络的一种体验，但缓解拥塞则需要使用网络的发送方采取行动。为了传递反馈信息，路由器必须标识适当的发送方</p>
</blockquote>
<ul>
<li><strong>抑制包</strong>
<ul>
<li>通知拥塞发送方的最直接方式是直接告诉发送方。</li>
<li>在这种方法中，路由器选择一个被拥塞的数据包，给该数据包的源主机返回一个<code>抑制包 (choke packet)</code></li>
<li>同时，在原来的拥塞数据包上添加一个<code>标记</code>（设置头部中的一位），因而它在前行的路径上不会产生更多的抑制包。</li>
<li>除此以外，数据包的转发过程如同平常一样。</li>
<li>当源主机收到了抑制包，按照要求它必须减少发送给指定目标的流量</li>
<li>很可能多个抑制包被发送到了一个给定的主机和目的地。主机应该<code>忽略掉在固定时间间隔</code>内到达的这些额外抑制包，直至其减缓流量的行为产生了效果。</li>
<li>超过这个固定的时间间隔，从路由器进一步反馈来的抑制包则指出网络仍然处于拥塞状态。</li>
</ul>
</li>
<li><strong>显式拥塞通知</strong>
<ul>
<li>除了生成额外的包发出拥塞警告外，路由器可以在<code>它转发的任何数据包上打上标记</code>（设置数据包头的某一个标志位）发出信号，表明它正在经历着拥塞。</li>
<li>网络传递数据包时，接收方可以注意到有个拥塞己经发生，<code>在它发送应答包时顺便告知发送方</code>。</li>
<li>然后发送方降低传输速率。<br />
<img src="https://s2.loli.net/2022/01/06/8Lx6BcvmSj2uU5k.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li><strong>逐跳后压</strong>
<ul>
<li>当网络速度很高或者距离很远时，由于传播延迟的缘故，拥塞信号发出后到它产生作用这期间又有许多新的数据包己经被注入到网络。</li>
<li>办法是让抑制包在沿途的每一跳都发挥作用<br />
<img src="https://s2.loli.net/2022/01/06/7K8utUhYWafTNIH.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>这种逐跳方案的实际效果是拥塞点上的拥塞现象很快得到了缓解，但是其代价是上游路径需要消耗更多的缓冲区空间。</li>
</ul>
</li>
</ul>
<hr />
<h4 id="负载脱离load-shedding"><a class="markdownIt-Anchor" href="#负载脱离load-shedding"></a> 负载脱离(Load Shedding)</h4>
<ul>
<li>负载脱落 (load shedding) 是指当路由器因为来不及处理数据包而面临被这些数据包淹没的危险时，就<code>将它们丢弃</code>。</li>
<li>关键的问题是选择丢弃哪个数据包：
<ul>
<li>首选的方案可能取决于使用<code>网络的应用程序类型</code>。
<ul>
<li>对于文件传输，旧的数据包价值要高于新的数据包</li>
<li>对于实时媒体流，新的数据包价值超过老的数据包</li>
</ul>
</li>
<li>随即脱落</li>
<li>某些数据包比其他数据包更重要，为数据包设置<code>优先级</code>，按优先级高低脱落</li>
<li>允许主机超出限制，但所有<code>超出的流量都被标记为低优先级</code></li>
</ul>
</li>
</ul>
<hr />
<h2 id="服务质量"><a class="markdownIt-Anchor" href="#服务质量"></a> 服务质量</h2>
<p><img src="https://s2.loli.net/2022/01/06/OJHPWYhzoXkG59g.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h2 id="网络互联"><a class="markdownIt-Anchor" href="#网络互联"></a> 网络互联</h2>
<h3 id="互联"><a class="markdownIt-Anchor" href="#互联"></a> 互联</h3>
<ul>
<li>网络的不同可体现在不同方面。比如不同的调制解调技术或帧格式这样的差异属于物理层和数据链路层内部<br />
<img src="https://s2.loli.net/2022/01/09/Y2bVB7QZEu84GpO.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>互连网络的基本概念
<ul>
<li>互连网络是指将分布在不同地理位置的网络、设备连接起来，以构成更大规模的网络，最大程度地实现网络资源的共享。
<ul>
<li>网络连接</li>
<li>网络互连</li>
<li>网络互通</li>
</ul>
</li>
</ul>
</li>
<li>网络互连的类型
<ul>
<li>网络互连的类型分以下几种：
<ul>
<li>局域网—局域网互连
<ul>
<li>同构网互连：具有相同协议的局域网互连</li>
<li>异构网互连：不同协议的局域网互连</li>
</ul>
</li>
<li>局域网—广域网互连</li>
<li>广域网—广域网互连</li>
</ul>
</li>
<li>网络互连需解决的问题
<ul>
<li>处理互连网络的帧、分组、报文和协议的差异问题</li>
</ul>
</li>
<li>网络互连从通信协议的角度来看可以分成四个层次：<br />
<img src="https://s2.loli.net/2022/01/09/i36PmuxYvfEWT8D.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<p>物理层的互连</p>
<ul>
<li>在不同的<code>电缆段之间复制位信号</code>是物理层互连的基本要求。</li>
<li>物理层的连接设备主要是<code>中继器</code>。中继器是最低层的物理设备，用于在局域网中<code>连接几个网段</code>，只起简单的信号放大作用，用于延伸局域网的长度。</li>
<li>严格地说，中继器是网段连接设备而不是网络互连设备。<br />
<img src="https://s2.loli.net/2022/01/06/bJtd9CNzIcAHwmx.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li>
<p>数据链路层互连</p>
<ul>
<li>数据链路层互连要解决的问题是在网络之间存储转发数据帧。</li>
<li>互连的主要设备是交换机。
<ul>
<li>交换机在网络互连中起到数据接收、地址过滤与数据转发的作用，它用来实现多个网络系统之间的数据交换。</li>
<li>用交换机实现数据链路层互连时，允许互连网络的数据链路层与物理层协议是相同的，也可以是不同的。<br />
<img src="https://s2.loli.net/2022/01/06/Vel3sf5vGZDFmRw.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
</li>
<li>
<p>网络层互连</p>
<ul>
<li>网络层互连要解决的问题是在<code>不同的网络之间存储转发分组</code></li>
<li>互连的主要设备是路由器</li>
<li>网络层互连包括<code>路由选择、拥塞控制、差错处理与分段技术</code>等
<ul>
<li>如果网络层协议相同，则互连主要是解决路由选择问题</li>
<li>如果网络层协议不同，则需使用多协议路由器</li>
</ul>
</li>
<li>用路由器实现网络层互连时，允许互连网络的网络层及以下各层协议是相同的，也可以是不同的<br />
<img src="https://s2.loli.net/2022/01/06/cQNBLprKuZM15xm.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li>
<p>高层互连</p>
<ul>
<li>传输层及以上各层协议不同的网络之间的互连属于高层互连</li>
<li>实现高层互连的设备是网关</li>
<li>高层互连使用的网关很多是应用层网关，通常简称为<code>应用网关</code>。如果使用应用网关来实现两个网络高层互连，那么允许两个网络的应用层及以下各层网络协议是不同的</li>
<li>网关一般用于<code>不同类型、差别较大</code>的网络系统之间的互连。又可用于同一个物理网而在逻辑上不同的网络之间互连，还可用于不同大型主机之间和不同数据库之间的互连<br />
<img src="https://s2.loli.net/2022/01/09/ztyS8ValE6bwxr2.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>互联网如何连接
<ul>
<li>第一，可以制造这样的设备，它能将每种网络的数据包翻译或转换成每个其他类别网络的数据包</li>
<li>第二，在不同网络的上面增加一个间接层， 并且构造一个公共层来解决这个问题<br />
<img src="https://s2.loli.net/2022/01/06/LvA9zW4OGNcXpf5.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>在路由器上，数据包被从帧中提取出来，数据包中的网络地址被用来决定把它转发到哪里</li>
<li>而在交换机（或网桥）上，整个帧是根据其 MAC 地址传送的。交换机不必了解正在被交换的数据包所采用的网络层协议，同样路由器也不必了解交换机所采用的链路层协议。</li>
<li>路由器是在网络层运行的数据包交换机。 路由器比网桥更灵活
<ul>
<li>在不同网络之间转换地址</li>
<li>对大数据包进行<code>分段</code>，以便跨网络传输的最大数据包长度很小</li>
<li>选择通过子网的适当路径</li>
<li>强制执行策略（例如，不要从该网络转发任何本地数据包）</li>
</ul>
</li>
<li>因为路由器比网桥做更多的工作，所以它们的运行速度通常比网桥慢。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="隧道"><a class="markdownIt-Anchor" href="#隧道"></a> 隧道</h3>
<ul>
<li><code>隧道技术</code>是一种通过使用互联网络的基础设施在网络之间传递数据的方式。
<ul>
<li>使用隧道传递的数据可以是不同协议的数据包，<code>隧道协议将其它协议的数据包重新封装然后通过隧道发送。新的帧头提供路由信息</code>，以便通过互联网传递被封装的负载数据。<br />
<img src="https://s2.loli.net/2022/01/06/6gQzZG3SLdKvMlY.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /><br />
<img src="https://s2.loli.net/2022/01/06/FovR4LdCrPubzVx.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<h3 id="数据包分段fragmentation"><a class="markdownIt-Anchor" href="#数据包分段fragmentation"></a> 数据包分段(Fragmentation)</h3>
<ul>
<li>如果源子网的<code>信息包太长，目的子网无法接受</code>，路由器就把它分成更小的包，TCP/IP协议中把这个过程叫“分段”</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/9BzAdgsK4Ca5nc2.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p>一个完整的设计要求分段以可以重新构建原有数据流的方式编号。</p>
<ul>
<li>IP 采用的设计思想是：给每个段一个<code>数据包序号〈所有的数据包都携带〉</code>、一个数据包内的<code>绝对字节偏移量</code>和一个指明<code>是否到达数据包末尾的标志位</code><br />
<img src="https://s2.loli.net/2022/01/06/haRtnNo8MEBy1Pi.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li>
<p>这样的设计有问题</p>
<ul>
<li>现在某些链路上运载的段的头或许是没必要的</li>
<li>还因为段的存在，因此开销可能比透明分段高。分段不利于性能，因为除了增加头开销，数据包的丢失概率也增加了</li>
<li>任何个段的丢失都将导致整个数据包的丢失</li>
<li>在网络中避免分段操作，这个过程称为路径 <code>MTU 发现(path MTU discovery)</code><br />
<img src="https://s2.loli.net/2022/01/06/8MhQGwelZqxRr43.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" />
<ul>
<li>每个 IP 数据包发出时在它的头设置一个比特，指示不允许对该数据包实施分段操作。</li>
<li>如果一个路由器接收的数据包太大，它就生成一个报错数据包并发送给源端，然后丢弃该数据包</li>
<li>路径 MTU 发现的优点是源端现在知道应该发送多长的数据包了。</li>
<li>路径 MTU 发现方法的缺点是有可能增加发送数据包的启动延迟。</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h2 id="internet-的网络层"><a class="markdownIt-Anchor" href="#internet-的网络层"></a> Internet 的网络层</h2>
<ul>
<li>
<p>Internet 的设计原则</p>
<ol>
<li>Make sure it works.（能够工作）</li>
<li>Keep it simple.（简单）</li>
<li>Make clear choices.（明确的选择）</li>
<li>Exploit modularity.（模块化）</li>
<li>Expect heterogeneity.（具备异构性）</li>
<li>Avoid static options and parameters.（灵活的选择和参数）</li>
<li>Look for a good design; it need not be perfect.（好的设计，而不是完美的）</li>
<li>Be strict when sending and tolerant when receiving.（发送操作要严格，接收操作要有容忍度）</li>
<li>Think about scalability.（伸缩性）</li>
<li>Consider performance and cost.（性能和代价）</li>
</ol>
</li>
<li>
<p>在网络层，可以把Internet 看作是一种相互关联的网络或自治域（自治系统）集合。没有真正的结构，但存在几个主要骨干网。这些都是由高带宽线路和快速路由器组成。<br />
<img src="https://s2.loli.net/2022/01/06/KX738xHiIJQDZ5O.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
</li>
</ul>
<hr />
<h3 id="ipv4-协议"><a class="markdownIt-Anchor" href="#ipv4-协议"></a> IPv4 协议</h3>
<ul>
<li>每个 IP 数据报包含两部分，一个头和一个正文
<ul>
<li>正文部分也称之为有效净荷</li>
<li>头由一个 20 字节的定长部分和一个可选的变长部分组成。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/VFUfvomg1jQut9Z.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>IP 数据报头的传输<code>从左到右并从上到下</code>， Version 字段的高序字节最先被传送出去</li>
<li>版本 (Version) 字段记录了数据报属于协议哪个版本（IPv4版本对应的值是 0100）</li>
<li>IHL 字段指明了头到底有多长（<code>以 32 位字长度为单位</code>）。 IHL 的最小值为 5，这表明头没有可选项。该4位字段的最大值为 15 ，把头的长度限制为最大 60 字节，因此选项（ Options ）字段最多为 40 字节。</li>
<li>区分服务 (Differentiated services) 字段用来区分不同的服务种类。<code>可靠性和速度</code>的各种组合都是可能的选择。占8比特，包括一个3比特长度的优先级，3个标志位D、T、R，2位保留未用。
<ul>
<li>过程字段(Routine) ：3位，设置了数据包的重要性，取值越大数据越重要，取值范围为：0（正常）~ 7（网络控制）</li>
<li>延迟字段(Delay) ：1位，取值：0（正常）、1（期待低的延迟）</li>
<li>流量字段(Throughput) ：1位，取值：0（正常）、1（期待高的流量）</li>
<li>可靠性字段(Reliability) ：1位，取值：0（正常）、1（期待高的可靠性）</li>
</ul>
</li>
<li>总长度 (Total length)字段包含了<code>该数据报中的所有内容</code>，即头和数据。</li>
<li>标识 (ldentification) 字段的用途是让目标主机确定一个新到达的分段属于哪一个数据报。<code>同一个数据报的所有段包含同样的标识值</code>。</li>
<li>DF 代表“不分段” ( Don’t Fragment )标志位。这是针对路由器的一条命令，它不允许路由器分割该数据报</li>
<li>MF 代表“更多的段” ( More Fragment )标志位。<code>除了最后一个段以外，其他所有的段都必须设置这一位。</code></li>
<li>分段偏移量 (Fragment offset )字段指明了该段在当前数据报中的位置。除了数据报的最后一个段以外，其他所有段的<code>长度必须是 8 字节的倍数</code>。<br />
<img src="https://s2.loli.net/2022/01/06/sNEVyLeP9JHZTRM.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>生存期( Time to live )字段是一个用于限制数据包生存期的计数器。<code>在每一跳上该计数器必须被递减</code>，当它递减到 时，数据包就被丢弃</li>
<li>协议(Protocol) 字段指明了该将它交给哪个传输进程。指该分组所使用的网络协议类型，如ICMP、DNS等，占8位。各协议对应的值如下表所示。<br />
<img src="https://s2.loli.net/2022/01/06/vZ6EDWla1zSHbOP.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>头校验和 (Header checksum) 字段仅验证头</li>
<li>源地址 (Source address) 字段和目标地址 (Destination address) 字段表示源网络接口和目标网络接口的 IP 地址</li>
<li>选项 (Options) 字段
<ul>
<li>IP数据报选项字段是可选的，主要用于网络测试和调试。</li>
<li>选项的长度取决于选项的类型，并且每个选项的格式都不相同。</li>
<li>选项格式：代码（1个字节），长度（1个字节），数据部分。<br />
<img src="https://s2.loli.net/2022/01/06/ONkHrwItcCbZud2.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<h3 id="ip-地址"><a class="markdownIt-Anchor" href="#ip-地址"></a> IP 地址</h3>
<ul>
<li>一个 IP 地址并不真正指向一台主机，而是指向一个网络接口，所以如果一台主机在两个网络上，它必须有两个 IP 地址。</li>
<li>IP 地址具有层次性。每个 32 位地址由高位的可变长网络和低位的主机两部分数据组成。
<ul>
<li>同一网络上〈比如以太局域网〉的所有主机，其地址的网络值是相同的。</li>
</ul>
</li>
<li>IP 地址的书写方式是点分十进制表示法。按此格式，4 个字节中的每个写成十进制，取值范围从 0 到 255</li>
<li>前缀长度相当于网络部分中的二进制掩码。以这种格式书写时称为子网掩码( subnet mask )，它可以与一个 IP 地址进 AND 操作，以便提取出该 IP 地址的网络部分。<br />
<img src="https://s2.loli.net/2022/01/06/zhstVvGiYxnwaCJ.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
<hr />
<h4 id="分类的ip地址"><a class="markdownIt-Anchor" href="#分类的ip地址"></a> 分类的IP地址</h4>
<p><img src="https://s2.loli.net/2022/01/06/S7zl5OqtunjQ4pa.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p><strong>A类地址</strong></p>
<ul>
<li>A类地址用来支持<code>超大型网络</code>。A类IP地址仅使用第一个8位组标识地址的网络部分。其余的3个8位组用来标识地址的主机部分。用二进制数表示时，A类地址的第1位（最左边）总是0。</li>
<li>第1个8位组的最小值为00000000（十进制数为0），最大值为01111111（十进制数为127），但是<code>0和127两个数保留使用</code>，不能用做网络地址。</li>
<li>任何IP地址第1个8位组的取值范围在1到126之间时都是A类地址。</li>
<li>A类地址的网络掩码为：255.0.0.0</li>
<li>127是一个特殊的网络ID，又称本机网络，可用来检查TCP／IP协议工作状态。</li>
</ul>
</li>
<li>
<p><strong>B类地址</strong></p>
<ul>
<li>B类地址用来支持<code>中大型网络</code>。B类IP地址使用4个8位组的前2个8位组标识地址的网络部分，其余的2个8位组用来标识地址的主机部分。</li>
<li>用二进制数表示时，B类地址的前2位（最左边）总是10。因此，第1个8位组的最小值为10000000（十进制数为128），最大值为10111111（十进制数为191）。</li>
<li>任何IP地址第1个8位组的取值范围在128到191之间时都是B类地址。</li>
<li>B类地址的网络掩码为：255.255.0.0</li>
</ul>
</li>
<li>
<p><strong>C类地址</strong></p>
<ul>
<li>C类地址用来支持<code>小型网络</code>。C类IP地址使用4个8位组的前3个8位组标识地址的网络部分，其余的1个8位组用来标识地址的主机部分。</li>
<li>用二进制数表示时，C类地址的前3位（最左边）总是110。因此，第1个8位组的最小值为11000000（十进制数为192），最大值为11011111（十进制数为223）。</li>
<li>任何IP地址第1个8位组的取值范围在192到223之间时都是C类地址。</li>
<li>每个C类网络号有254台主机。</li>
<li>C类地址的网络掩码为：255.255.255.0</li>
</ul>
</li>
<li>
<p><strong>D类地址</strong></p>
<ul>
<li>D类地址用来支持<code>组播</code>。组播地址是唯一的，用来转发目的地址为<code>预先定义的一组IP地址</code>的分组。因此，一台工作站可以将单一的数据流传输给多个接收者。</li>
<li>用二进制数表示时，D类地址的前4位（最左边）总是1110。D类IP地址的第1个8位组的范围是从11100000到11101111，即从224到239。</li>
<li>任何IP地址第1个8位组的取值范围在224到239之间时都是D类地址。</li>
<li>在多播（/组播）操作中<code>没有网络或主机位</code>，数据包将传送到网络中选定的主机子集中。</li>
</ul>
</li>
<li>
<p><strong>E类地址</strong></p>
<ul>
<li>Internet工程任务组保留E类地址作为研究使用，因此Internet上没有发布E类地址使用。</li>
<li>用二进制数表示时，E类地址的前4位（最左边）总是1111。E类IP地址的第1个8位组的范围是从11110000到11111111，即240到255。</li>
<li>任何IP地址第1个8位组的取值范围在240到255之间时都是E类地址</li>
</ul>
</li>
<li>
<p>特殊的IP地址<br />
<img src="https://s2.loli.net/2022/01/06/vIDOFA4Q6qTCRYK.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /><br />
<img src="https://s2.loli.net/2022/01/06/kc8KVXhLxAw3WPl.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>网络地址
<ul>
<li>用于表示网络本身，具有正常的网络号部分，<code>主机号部分为全“0”的IP地址代表一个特定的网络</code>，即作为网络标识之用，如102.0.0.0、138.1.0.0和198.10.1.0分别代表了一个A类、B类和C类网络。</li>
</ul>
</li>
<li>广播地址
<ul>
<li>用于向网络中的所有设备广播分组。具有正常的网络号部分，<code>主机号部分为全“1”的IP地址代表一个在指定网络中的广播</code>，被称为广播地址，如102.255.255.255、138.1.255.255和198.10.1.255分别代表在一个A类、B类和C类网络中的广播。</li>
</ul>
</li>
<li>私有地址（不能在Internet上使用）
<ul>
<li>10.0.0.0~10.255.255.255</li>
<li>172.16.0.0~172.31.255.255</li>
<li>192.168.0.0~192.168.255.255</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<h4 id="子网"><a class="markdownIt-Anchor" href="#子网"></a> 子网</h4>
<ul>
<li>子网（Sub Networking）是指由网络管理员将一个给定的网络分为若干个更小的部分，这些更小的部分被称为子网（Subnet）</li>
<li>子网划分的优越性
<ul>
<li>引入子网划分技术可以有效提高IP地址的利用率，从而可节省宝贵的IP地址资源。</li>
</ul>
</li>
<li>子网掩码</li>
<li>子网掩码（Subnet mask）通常与IP地址配对出现，其功能是告知主机或路由设备，IP地址的哪一部分代表网络号部分，哪一部分代表主机号部分。
<ul>
<li>子网掩码使用与IP地址相同的编址格式，即32位长度的二进制比特位，也可分为4个8位组并采用点十进制来表示。但在子网掩码中，<code>与IP地址中的网络位部分对应的位取值为“1”，而与IP地址主机部分对应的位取值为“0”。</code></li>
<li>通过将子网掩码与相应的IP地址进行<code>求“与”操作</code>，就可决定给定的IP地址所属的网络号（包括子网络信息）</li>
<li>例如，102.2.3.3/255.0.0.0表示该地址中的前8位为网络标识部分，后24位表示主机部分，从而网络号为102.0.0.0<br />
<img src="https://s2.loli.net/2022/01/06/i4FvJylOQYhTjxq.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /><br />
<img src="https://s2.loli.net/2022/01/09/pdP4Tax5RDtqMJE.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<h4 id="cidr一无类域间路由"><a class="markdownIt-Anchor" href="#cidr一无类域间路由"></a> CIDR一无类域间路由</h4>
<ul>
<li>消除了传统的A、B、C类地址以及划分子网的概念，融合子网地址和子网掩码，方便子网划分</li>
<li>记法：IP地址后加上 “/”，然后写上网络前缀的位数<br />
<img src="https://s2.loli.net/2022/01/09/lEHgt4rs9o7RUMS.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>把多个小前缀的地址块合并成一个大前缀的地址块的过程称为路由聚合（route aggregation ），由此产生的较大前缀地址块有时称为超网（supernet ），以便有别于地址块的分割。</li>
<li>前缀允许重叠。规则是数据包按最具体路由的方向发送，即具有最少 IP地址的<code>最长匹配前缀（longest matching prefix ）</code></li>
<li>CIDR 的工作原理如下
<ul>
<li>当一个数据包到达时，路由器扫描路由表以便确定目的地是否在前缀的地址块内。</li>
<li>有可能多个具有不同前缀的表项得到匹配，在这种情况下，使用具有<code>最长前缀的表项</code></li>
</ul>
</li>
</ul>
<hr />
<h4 id="nat-网络地址转换"><a class="markdownIt-Anchor" href="#nat-网络地址转换"></a> NAT－网络地址转换</h4>
<ul>
<li>公用地址和私有地址
<ul>
<li>公有IP地址是唯一的，因为公有IP地址是全局的和标准的，所以没有任何两台连到公共网络的主机拥有相同的IP地址。</li>
<li>私有地址（Private Address）的地址资源供内部实现IP网络时使用。<code>根据规定，所有以私有地址为目的地址的IP数据报都不能被路由至Internet上</code>，这些以私有地址作为逻辑标识的主机若要访问外面的Internet，必须采用网络地址翻译（Network Address Translation，简称NAT）或应用代理（proxy）方式。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/k9ThqVA8RnULFQy.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p>NAT的类型</p>
<ul>
<li>静态NAT
<ul>
<li>静态NAT在地址映射表中为每一个需要转换的内部本地地址创建了一个固定的地址映射关系，<code>映射了唯一的内部全局地址</code>，本地地址与全局地址一一对应</li>
<li>也就是说，在静态NAT中，内部网络中的每一个主机都被永久映射了可以访问外部网络的某个合法地址，当内部主机访问外部网络时，内部本地地址就会转换为相应的全局地址。</li>
</ul>
</li>
<li>动态NAT
<ul>
<li>动态NAT是将可用的内部全局地址的地址集定义为<code>NAT池（NAT Pool）</code>，对于要与外界进行通信的内部主机，如果还没有建立映射关系，NAT设备将会动态的从NAT池中选择一个全局地址与内部主机的本地地址进行转换。</li>
<li>该映射关系在<code>连接建立时动态创建，而在连接终止时将被回收</code>。动态NAT增强了网络的灵活性，减少了所需的全局地址的数量。</li>
<li>如<code>果NAT池中的全局地址被全部占用，则此后的地址转换申请将被拒绝</code>，这样会造成网络连通性的问题。另外由于每次的地址转换都是动态的，所以同一主机在不同连接中的全局地址是不同的，这会增加网络管理的难度</li>
</ul>
</li>
<li>地址端口转换（NAPT）
<ul>
<li>地址端口转换是动态转换的一种变形，它可以<code>使多个内部主机共享一个内部全局地址</code>，而通过源地址和目的地址的<code>TCP/UDP端口号来区分</code>地址映射表中的映射关系和本地地址，这样就更加减少了所需的全局地址的数量。</li>
</ul>
<blockquote>
<p>例如，假设内部主机192.168.1.2和192.168.1.3都使用源端口1723向外发送数据包，NAPT路由器把这两个内部本地地址都转换为全局地址202.10.50.2，而使用不同的端口号1492和1723。当接收方收到源端口为1492的报文时，则返回的报文在到达NAPT路由器后，其目的地址和端口将被转换为192.168.1.2:1723。当接收方收到源端口为1723的报文时，则返回的报文在到达NAPT路由器后，其目的地址和端口将被转换为192.168.1.3:1723。</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>配置NAT<br />
<img src="https://s2.loli.net/2022/01/09/YgfS3APRMKLZ4dJ.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
</li>
</ul>
<hr />
<h3 id="internet-控制协议"><a class="markdownIt-Anchor" href="#internet-控制协议"></a> Internet 控制协议</h3>
<h4 id="icmpinternet-control-message-protocolinternet-控制消息协议"><a class="markdownIt-Anchor" href="#icmpinternet-control-message-protocolinternet-控制消息协议"></a> ICMP(Internet Control Message Protocol)：Internet 控制消息协议</h4>
<ul>
<li>在网络层提供了Internet控制消息协议（Internet control message protocol，简称ICMP）来检测网络，包括路由、拥塞、服务质量等问题。</li>
<li>ICMP是在RFC792中定义的，其中给出了多种形式的ICMP消息类型，每个ICMP消息类型都被封装于IP分组中。网络测试工具“Ping”和“Tracert”就都是基于ICMP实现的。</li>
<li>例如，若在主机1上输入一个“Ping 192.168.1.1”命令，则相当于向目的主机192.168.1.1发出了一个以<code>回应请求（Echo Request）</code>为消息类型的ICMP包，若目的主机存在，则其会向主机1发送一个以回应应答（Echo Reply）为消息类型的ICMP包；若目的主机不存在，则主机1会得到一个以不可达目的地（Unreachable Destination）为消息类型的ICMP错误消息包。</li>
<li>ICMP报文是封装在IP数据报内部的。<br />
<img src="https://s2.loli.net/2022/01/09/9mQpxb8jvPnqyNh.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /><br />
<img src="https://s2.loli.net/2022/01/09/LrZzwIAfEFWRBHg.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>ICMP网络错误通告的数据报包括目的端不可达通告、超时通告、参数错误通告等。
<ol>
<li>目的端不可达通告</li>
</ol>
<ul>
<li>路由器主要的功能是对IP数据报进行路由和转发，但在操作过程中存在着失败的可能。失败的原因是多种多样的，如目的端硬件故障、路由器没有到达目的端的路径、目的端不存在等。</li>
</ul>
<ol start="2">
<li>超时通告</li>
</ol>
<ul>
<li>路由器选择如果出现错误，会导致路由环路的产生，从而引起TTL值递减为0和定时器超时。若定时器到时，路由器或目的主机会将IP数据报丢弃，并向源端发送超时通告。</li>
</ul>
<ol start="3">
<li>参数错误通告</li>
</ol>
<ul>
<li>如果IP数据报中某些字段出现错误，且错误非常严重，路由器会将其抛弃，并向源端发送参数错误通告。</li>
</ul>
</li>
</ul>
<hr />
<h4 id="arpthe-address-resolution-protocol地址解析协议"><a class="markdownIt-Anchor" href="#arpthe-address-resolution-protocol地址解析协议"></a> ARP(The Address Resolution Protocol)：地址解析协议</h4>
<ul>
<li>为使设备之间能够互相通信，<code>源设备需要目的设备的IP地址和MAC地址</code>。当一台设备试图与另一台已知IP地址的设备通信时，它必须确定对方的MAC地址。使用TCP/IP协议集中的地址解析协议（Address Resolution Protocol，简称ARP）可以自动获得MAC地址。<code>ARP协议允许主机根据IP地址查找MAC地址。</code></li>
<li>每一个主机都设有一个<code>ARP高速缓存</code>，里面有所在的局域网上的各主机和路由器的IP地址到硬件地址的映射表。</li>
<li><code>代理ARP（proxy ARP）</code>：即所有目的主机不与源主机在同一网络中的数据报均会被发给源主机的默认网关，由默认网关来完成下一步的数据传输工作。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/iolMF1xwkvuQKyW.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p><code>子网内</code>ARP解析</p>
<ul>
<li>一台计算机能够解析另一台计算机地址的<code>条件是这两台计算机都连在同一物理网络中</code>，如主机1向主机2发送数据报。
<ul>
<li>主机1以主机2的IP地址为目的IP地址，以自己的IP地址为源IP地址封装了一个IP数据报；在数据报发送以前，<code>主机1通过将子网掩码和源IP地址及目的IP地址进行求“与”操作判断源和目的在同一网络中</code></li>
</ul>
</li>
<li>于是主机1转向查找本地的<code>ARP缓存</code>，以确定在缓存中是否有关于主机2的IP地址与MAC地址的映射信息</li>
<li>若在缓存中<code>存在主机2的MAC地址信息</code>，则主机1的网卡立即以主机2的MAC地址为目的MAC地址、以自己的MAC地址为源MAC地址进行帧的封装并启动帧的发送
<ul>
<li>主机2收到该帧后，确认是给自己的帧，进行帧的拆封并取出其中的IP分组交给网络层去处理</li>
</ul>
</li>
<li>若在缓存中<code>不存在</code>关于主机2的MAC地址映射信息，则主机1以广播帧形式向同一网络中的所有结点发送一个<code>ARP请求（ARP request）</code>
<ul>
<li>在该广播帧中48位的<code>目的MAC地址以全“1”即“ffffffffffff”表示</code>，并在数据部分发出关于“谁的IP地址是192.31.65.5”的询问，这里192.31.65.5代表主机2的IP地址。</li>
</ul>
</li>
<li>网络CS中的所有主机都会收到该广播帧，并且所有收到该广播帧的主机都会检查一下自己的IP地址，但只有主机2会以自己的MAC地址信息为内容给主机1发出一个<code>ARP回应（ARP reply）</code>。</li>
<li>主机1收到该回应后，首先将其中的MAC地址信息加入到本地ARP缓存中，然后启动相应帧的封装和发送过程<br />
<img src="https://s2.loli.net/2022/01/06/rkX3gsD7whWztJl.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li>
<p>子网间ARP解析</p>
<ul>
<li>源主机和目的主机<code>不在同一网络</code>中
<ul>
<li>例如主机1向主机4发送数据报，假定主机4的IP地址为192.31.63.8。这时若继续采用ARP广播方式请求主机4的MAC地址是不会成功的，因为<code>第2层广播（在此为以太网帧的广播）是不可能被第3层设备路由器转发的</code>。</li>
</ul>
</li>
<li>需要采用一种被称为<code>代理ARP（proxy ARP）</code>的方案，即所有目的主机不与源主机在同一网络中的数据报均会被<code>发给源主机的默认网关，由默认网关来完成下一步的数据传输工作</code>。注意，所谓默认网关是<code>指与源主机位于同一网段中的某个路由器接口的IP地址</code>
<ul>
<li>在此例中相当于路由器的以太网接口F1/E3的IP地址，即192.31.65.1。</li>
<li>也就是说在该例中，<code>主机1以默认网关的MAC地址为目的MAC地址</code>，而以主机1的MAC地址为源MAC地址，将发往主机4的分组封装成以太网帧后发送给默认网关，然后交由路由器来进一步完成后续的数据传输。</li>
</ul>
</li>
<li>实施代理ARP时需要在<code>主机1上缓存关于默认网关的MAC地址映射信息</code>，若不存在该信息，则同样可以采用前面所介绍的ARP广播方式得知，因为默认网关与主机1是位于同一网段中的<br />
<img src="https://s2.loli.net/2022/01/09/I75PatgenY4o1xC.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<ul>
<li><strong>RARP(The Reverse Address Resolution Protocol)：反向地址解析协议</strong>
<ul>
<li>反向地址解析协议（RARP）<code>把MAC地址绑定到IP地址上</code>。这种绑定允许一些网络设备在把数据发送到网络之前对数据进行封装。</li>
<li>一个网络设备或工作站可能知道自己的MAC地址，但是不知道自己的IP地址。<code>设备发送RARP请求，网络中的一个RARP服务器出面来应答RARP请求</code>，RARP服务器有一个事先做好的从工作站硬件地址到IP地址的映射表，当收到RARP请求分组后，RARP服务器就从这张映射表中查出该工作站的IP地址，然后写入RARP响应分组，发回给工作站。</li>
</ul>
</li>
</ul>
<hr />
<h4 id="dhcp-dynamic-host-configuration-protocol动态主机配置协议"><a class="markdownIt-Anchor" href="#dhcp-dynamic-host-configuration-protocol动态主机配置协议"></a> DHCP (Dynamic Host Configuration Protocol)：动态主机配置协议</h4>
<ul>
<li>动态主机配置协议 （DHCP） 是一种使网络管理员能够集中管理和自动分配 IP 网络地址的通信协议。在 IP 网络中，每个连接 Internet 的设备都需要分配唯一的 IP 地址。 DHCP 使网络管理员能从中心结点监控和分配 IP 地址。当某台计算机移到网络中的其它位置时，能自动收到新的IP 地址。</li>
<li>DHCP 使用了租约的概念，或称为计算机 IP 地址的有效期。租用时间是不定的，主要取决于用户在某地联接 Internet 需要多久，这对于教育行业和其它用户频繁改变的环境是很实用的。通过较短的租期， DHCP 能够在一个计算机比可用 IP 地址多的环境中动态地重新配置网络。</li>
<li>DHCP 支持为计算机分配静态地址，如需要永久性 IP 地址的 Web 服务器。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/npJ61zeOKYGAk3j.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>Server-DHCP服务器，IP地址池，为客户端分配：IP地址、子网掩码、网关、DNS服务器。</li>
<li>DHCP客户，向服务器提出申请，从服务器自动获取：IP地址、子网掩码、网关、DNS服务器的IP地址</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/OUCdoghne1uNZxJ.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/09/xAXHJhGcjlqtRr4.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h4 id="内部网关协议和外部网关协议"><a class="markdownIt-Anchor" href="#内部网关协议和外部网关协议"></a> 内部网关协议和外部网关协议</h4>
<ul>
<li>按照作用范围和目标的不同，路由协议还可被分为内部网关协议和外部网关协议。</li>
<li><strong>内部网关协议</strong>（IGP，Interior Gateway Protocols）是指作用于自治系统以内的路由协议。 <strong>RIP</strong>（ Routing Information Protocol ,属于距离矢量路由）、<strong>OSPF</strong> (Open Shortest Path First，属于链路状态路由)等都属于内部网关协议。</li>
<li><strong>外部网关协议</strong>（EGP，Exterior Gateway Protocols）则是作用于不同自治系统之间的路由协议。在Internet广为使用的边界网关协议（Border Gateway Protocol，简称<strong>BGP</strong>，属于距离矢量路由）则是外部网关协议的典型例子。</li>
<li>所谓自治系统（Autonomous System，简称AS）是指网络中那些由相同机构操纵或管理，对外表现出相同的路由视图的路由器所组成的系统。</li>
</ul>
<hr />
<h4 id="ospf一一内部网关路由协议"><a class="markdownIt-Anchor" href="#ospf一一内部网关路由协议"></a> OSPF一一内部网关路由协议</h4>
<ul>
<li>OSPF是一种链路状态路由协议的典型例子。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/bB7KLAafiGhYuyc.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/09/gembHFkKoYX2LPZ.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="ipv6"><a class="markdownIt-Anchor" href="#ipv6"></a> IPv6</h3>
<ul>
<li><strong>IPv6的定义</strong>
<ul>
<li>IPv6采用128位地址长度，几乎可以不受限制地提供地址。如果按保守方法估算IPv6实际可分配的地址，那么整个地球的每平方米面积上可分配1000多个地址。</li>
<li>在IPv6的设计过程中除了解决了地址短缺问题以外，还考虑了在IPv4中解决不好的其他问题，主要有端到端IP连接、服务质量（QoS）、安全性、多播、移动性、即插即用等。</li>
<li>IPv6与IPv4相比，有以下特点和优点：
<ul>
<li>更大的地址空间。IPv4中规定IP地址长度为32，即有2<sup>32−1个地址；而IPv6中IP地址的长度为128，即有2</sup>128−1个地址。</li>
<li>更小的路由表。IPv6的地址分配一开始就遵循聚类（Aggregation）的原则，这使得路由器能在路由表中用一条记录（Entry）表示一片子网，大大减小了路由器中路由表的长度，提高了路由器转发数据报的速度。</li>
<li>增强的组播（Multicast）支持以及对流的支持（Flow-control）。这使得网络上的多媒体应用有了长足发展的机会，为服务质量（QoS）控制提供了良好的网络平台。</li>
<li>加入了对自动配置（Auto-configuration）的支持。这是对DHCP协议的改进和扩展，使得网络（尤其是局域网）的管理更加方便和快捷。</li>
<li>更高的安全性。在使用IPv6网络时用户可以对网络层的数据进行加密并对IP报文进行校验，这极大地增强了网络安全。</li>
</ul>
</li>
</ul>
</li>
<li><strong>IPv6数据报格式</strong>
<ul>
<li>IPv6数据报头</li>
<li>扩展（下一个报头）</li>
<li>有效载荷</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/ZtSPwy4RQDKsaBi.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p><strong>Version (版本号)</strong> ：二进制0110</p>
</li>
<li>
<p><strong>Traffic Class(业务量等级)</strong>：在IPv6优先级域中首先要区分二大业务量（traffic）：</p>
<ol>
<li>受拥塞控制（congestion-controlled）业务量；</li>
<li>不受拥塞控制的（noncongestion-controlled）业务量。</li>
</ol>
<ul>
<li>在IPv6规范中0～7级的优先级为受拥塞控制的业务量保留，这种业务量的最低优先级为1，Internet控制用的业务量优先级为7。</li>
<li>不受拥塞控制的业务量是指当网络拥塞时不能进行速率调整的业务量。对时延要求很严的实时话音即是这类业务量的一个示例。在IPv6中将其值为8～15的优先级分配给这种类型的业务量。</li>
</ul>
</li>
<li>
<p><strong>流标识</strong>：一个流由其源地址、目的地址和流序号来命名。在IPv6规范中规定“流”是从某个源点向（单点或组播的）信宿发送的分组群中，源点要求中间路由器进行特殊处理的那些分组。也就是说，流是指源点、信宿和流标记三者分别相同的分组的集合。</p>
</li>
<li>
<p><strong>有效载荷长度</strong>：有效载荷长度域指示IP基本头标以后的IP数据报剩余部分的长度，单位是字节。此域占16位，因而IP数据报通常应在65535字节以内。</p>
</li>
<li>
<p><strong>下一报头</strong>：下一报头用来标识数据报中的基本IP报头的下一报头，在此报头中，指示选项的IP报头和上层协议。<br />
<img src="https://s2.loli.net/2022/01/09/zUKJuGNeLgMXsvR.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
</li>
<li>
<p>站段限制：站段限制决定了能够将分组传输到多远。主机在生成数据报时，在站段限制域中设置某一初值，然后将数据报送到网上的路由器。各路由器从该值起逐次减1。如数据报到达信宿之前其站段限制变为0，该数据报就被抛弃掉。</p>
</li>
<li>
<p>源地址和目的地址：基本IP头标中最后2个域是源地址和目的地址，它们各占128位。在此域中置入数据报最初的源地址和最后的目的地址</p>
</li>
</ul>
<hr />
<ul>
<li><strong>IPv6扩展头</strong>
<ul>
<li>IPv6规范定义了6个扩展报头</li>
<li>每个扩展报头由前面报头的Next Header字段标识</li>
<li>每个扩展报头的字节长为8的整数倍</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/8iJTO3Vt45xyMYh.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li><strong>Hop-by-Hop Options Extension Header</strong>
<ul>
<li>Hop-by-Hop Options扩展报头携带着必须由数据包经过路径上的每个节点进行检查的可选信息。它必须紧跟在IPv6 报头后，并由Next Header 值0 表示。</li>
<li>在IPv4 中，路由器判断是否需要检查数据报的惟一方法是解析所有数据报中的上层数据，至少是部分解析。这极大地降低了路由处理速度。</li>
<li>在IPv6 中，如果没有Hop-by-Hop Options 扩展报头，则路由器知道无须处理路由器相关的信息，因此可以立即把数据包路由到最终目的地。</li>
<li>若存在Hop-by-Hop Options 扩展报头，则路由器只需检查报头，而无须深入查看数据包。<br />
<img src="https://s2.loli.net/2022/01/06/BKAt7HQDslVGNRd.png" srcset="/img/loading.gif" lazyload alt="pic" title="pic" /></li>
<li>Options（选项，长度不定）：这可能是一个或多个选项。该选项的长度是不定的，由Header Extension Length 字段决定。</li>
<li>Option Type（选项类型）字段是Options 字段的第一个字节，包含了在执行处理的节点不能识别该选项时如何处理选项的信息。该值的前两位值指定了要执行的操作。</li>
</ul>
</li>
<li><strong>Routing Extension Header</strong>
<ul>
<li>Routing报头用来给出一个或多个数据包在到达目的地的路径上应该经过的中间节点。在IPv4 中，这叫做Loose Source 和Record Route 选项。Routing 报头由其前一个报头的Next Header 值43 标识<br />
<img src="https://s2.loli.net/2022/01/06/j63vDW2RklCZdYA.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<h1 id="传输层-2"><a class="markdownIt-Anchor" href="#传输层-2"></a> 传输层</h1>
<h2 id="传输服务"><a class="markdownIt-Anchor" href="#传输服务"></a> 传输服务</h2>
<h3 id="提供给上层的服务"><a class="markdownIt-Anchor" href="#提供给上层的服务"></a> 提供给上层的服务</h3>
<p><img src="https://s2.loli.net/2022/01/09/XyEewlgI415HaQb.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="传输服务原语"><a class="markdownIt-Anchor" href="#传输服务原语"></a> 传输服务原语</h3>
<p><img src="https://s2.loli.net/2022/01/09/HWXSMl21xzIURhy.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/09/uno5dIgtFXh6MEb.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>段（传输层之间交换的单元）被包裹在数据包（网络层之间交换的单元）中，而数据包则被包含在帧（数据链路层之间交换的单元）中。</li>
<li>当一帧到达时，数据链路层对帧头进行处理，如果帧目标地址与本地传递地址匹配，则把帧的有效载荷字段中的内容传递给网络实体。</li>
<li>网络实体对数据包头进行类似处理，然后把数据包的有效载荷字段内容向上传递给传输实体。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/DQ4jxwOIWiHdlAG.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>斜体标记的状态转移是由到达的包引起的。实线表示客户的状态序列，虚线表示服务器的状态序列</li>
</ul>
<hr />
<h3 id="berkeley-套接字"><a class="markdownIt-Anchor" href="#berkeley-套接字"></a> Berkeley 套接字</h3>
<p><img src="https://s2.loli.net/2022/01/09/8KDhHUJV4vX5Sys.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h2 id="传输协议的要素"><a class="markdownIt-Anchor" href="#传输协议的要素"></a> 传输协议的要素</h2>
<p><img src="https://s2.loli.net/2022/01/09/MtVir3hR9lL1pXO.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="寻址"><a class="markdownIt-Anchor" href="#寻址"></a> 寻址</h3>
<p><img src="https://s2.loli.net/2022/01/09/uPByKRM738DW4qh.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>使用通用术语传输服务访问点( TSAP, Transport Service Access Point )来表示传输层的一个特殊端点。</li>
<li>网络层上的类似端点（即网络层地址）称为网络服务访问点 (CNSAP. Network Service Access Point )。
<ul>
<li>IP 地址是 NSAP 的实例。</li>
</ul>
</li>
<li>应用进程（包括客户和服务器）可以将自己<code>关联到一个本地 TSAP 上</code>，以便与一个远程 TSAP 建立连接。这些连接运行在每台主机的 NSAP 之上。在有些网络中，每台计算机只有一个 NSAP ，但是可能有多个传输端点共享此 NSAP ，因此需要某种方法来区分这些传输端点。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/yWD8GLgZUOlVEdw.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="连接建立"><a class="markdownIt-Anchor" href="#连接建立"></a> 连接建立</h3>
<ul>
<li>
<p>关键问题是确保可靠性，即使数据包可能丢失、损坏、延迟和重复</p>
<ul>
<li>不能将旧的或重复的数据包视为新数据包</li>
<li>对于丢失/损坏的包，使用 ARQ 和校验和</li>
</ul>
</li>
<li>
<p>三次握手</p>
<ul>
<li>它要求一方检查<code>连接请求是否的确是当前的</code><br />
<img src="https://s2.loli.net/2022/01/09/lFgupj3wzST4HLI.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<h3 id="连接释放"><a class="markdownIt-Anchor" href="#连接释放"></a> 连接释放</h3>
<ul>
<li>终止连接的方式有两种：非对称释放和对称释放
<ul>
<li>非对称释放连接是电话系统的工作方式：当一方挂机后，连接就被中断了。</li>
<li>对称释放连接是把连接看成两个<code>独立的单向连接</code>，要求单独释放每一个单向连接．</li>
</ul>
</li>
<li>非对称释放方法太冒失，可能导致数据的丢失。<br />
<img src="https://s2.loli.net/2022/01/09/NtdyRblzrZWcDa5.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
<li>使用对称释放方式，每个方向被单独释放，两个方向的连接释放相互独立。因而，即使当主机发送了 DISCONNECT 段以后，它仍然可以接收数据。<br />
<img src="https://s2.loli.net/2022/01/09/m8tMIhs947gXcEZ.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
<hr />
<h3 id="流量控制和缓冲"><a class="markdownIt-Anchor" href="#流量控制和缓冲"></a> 流量控制和缓冲</h3>
<ul>
<li>解决缓冲区大小问题的另一个方法是为每个连接使用一个大的循环缓冲区<br />
<img src="https://s2.loli.net/2022/01/09/lciNAMPjfdLSuyX.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" />
<ul>
<li>这个系统古朴典雅，并且不依赖于段的大小，但只有当连接重载时，内存的使用情况才很好。</li>
</ul>
</li>
<li>流量控制示例：A 的数据受 B 的缓冲区限制<br />
<img src="https://s2.loli.net/2022/01/09/z8vZlctqyaTFprK.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
<hr />
<h2 id="internet-传输协议-udp"><a class="markdownIt-Anchor" href="#internet-传输协议-udp"></a> Internet 传输协议： UDP</h2>
<h3 id="udp-概述"><a class="markdownIt-Anchor" href="#udp-概述"></a> UDP 概述</h3>
<ul>
<li>Internet 协议集支持一个<code>无连接</code>的传输协议，该协议称为用户数据报协议(<code>UDP, User Datagram Protocol</code>)。 UDP 为应用程序提供了一种无需建立连接就可发送封装的 IP 数据报的方法。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/09/dbvK8OoeLEnjDuU.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>
<p>UDP建立在IP协议之上，它封装在IP数据区中，同IP协议一样提供无连接数据报传输。相对于IP协议，它<code>唯一增加的能力是提供协议端口</code>，以保证进程通信。</p>
</li>
<li>
<p>UDP目标端口：一个UDP端口是一个可读写的软件结构，内部有一个接收报文缓冲区。接收数据时，UDP软件要判断此目标端口是否与当前使用的端口匹配，如是，则将数据报放入相应的接收队列，否则，抛弃该数据并向源端口发送“端口不可达”的差错消息报文。</p>
</li>
<li>
<p>长度：以字节计的整个报文长度，<code>最小为8，只有报头；最大65515</code>。</p>
</li>
<li>
<p>校验和：它是一个可选项，以提高效率</p>
</li>
<li>
<p>在利用IP传送语音和视频的时候，要利用UDP协议</p>
</li>
<li>
<p>IPv4 的伪头部如图所示<br />
<img src="https://s2.loli.net/2022/01/06/e9YaopGS8iuhzUK.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>它包含源机器和目标机器的 32 地址、 UDP 的协议号（17), 以及 UDP 段〈包括头〉的字节计数。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="远程过程调用"><a class="markdownIt-Anchor" href="#远程过程调用"></a> 远程过程调用</h3>
<ul>
<li><strong>远程过程调用(RPC, Remote Procedure Call)</strong>：允许本地程序调用远程主机上的过程。当机器 1 上的进程调用机器 2 的一个过程时，机器 1 上的调用进程被挂起，而机器 2 上的被调用过程则开始执行。信息以参数的形式从调用方传输到被调用方，而过程的执行结果则从反方向传递回来</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/CwXuyr2AT73QO18.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>客户端（Client）： 服务的调用方。</li>
<li>服务端（Server）：真正的服务提供者。</li>
<li>客户端存根（Client stub）：存放服务端的地址消息，再将客户端的请求参数打包成网络消息，然后通过网络远程发送给服务方。</li>
<li>服务端存根（Server stub）：接收客户端发送过来的消息，将消息解包，并调用本地的方法。</li>
</ul>
<hr />
<h3 id="实时传输协议rtp-real-time-transport-protocol"><a class="markdownIt-Anchor" href="#实时传输协议rtp-real-time-transport-protocol"></a> 实时传输协议(RTP, Real-time Transport Protocol)</h3>
<ul>
<li>RTP 由 RFC 3550 描述，目前已经广泛应用于<code>多媒体应用程序</code>。<br />
<img src="https://s2.loli.net/2022/01/06/gp3MVRGEx8tdWKi.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/TxoykWZw2VpgOtv.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>Ver：RTP协议的版本号，占2位，当前协议版本号为2。</li>
<li>P：填充标志，占1位，如果P=1，则在该报文的尾部填充一个或多个额外的八位组(满足4字节的倍数)，它们不是有效载荷的一部分。</li>
<li>X：扩展标志，占1位，如果X=1，则在RTP报头后跟有一个扩展报头。</li>
<li>CC：CSRC计数器，占4位，指示CSRC 标识符的个数。</li>
<li>M: 标记，占1位，不同的有效载荷有不同的含义，对于视频，标记一帧的结束；对于音频，标记会话的开始。</li>
<li>PT: 有效载荷类型，占7位，用于说明RTP报文中有效载荷的类型，如GSM音频、JPEG图像等,在流媒体中大部分是用来区分音频流和视频流的，这样便于客户端进行解析。</li>
<li>序列号：占16位，用于标识发送者所发送的RTP报文的序列号，每发送一个报文，序列号增1。这个字段当下层的承载协议用UDP的时候，网络状况不好的时候可以用来检查丢包。同时出现网络抖动的情况可以用来对数据进行重新排序，在linux服务器中这个字段是从0开始的，同时音频包和视频包的sequence是分别计数的。</li>
<li>时间戳(Timestamp)：占32位，时间戳反映了该RTP报文的第一个八位组的采样时刻。接收者使用时间戳来计算延迟和延迟抖动，并进行同步控制。</li>
<li>同步信源(SSRC)标识符：占32位，用于标识同步信源。该标识符是随机选择的，参加同一视频会议的两个同步信源不能有相同的SSRC。</li>
<li>特约信源(CSRC)标识符：每个CSRC标识符占32位，可以有0～15个。每个CSRC标识了包含在该RTP报文有效载荷中的所有特约信源。</li>
</ul>
<hr />
<h2 id="internet-传输协议-tcp"><a class="markdownIt-Anchor" href="#internet-传输协议-tcp"></a> Internet 传输协议： TCP</h2>
<h3 id="tcp-概述"><a class="markdownIt-Anchor" href="#tcp-概述"></a> TCP 概述</h3>
<ul>
<li>在RFC793中定义，具有以下功能：
<ul>
<li>数据传输</li>
<li>多路复用</li>
<li>可靠传输</li>
<li>流量控制</li>
<li>连接</li>
</ul>
</li>
<li>TCP是建立在IP协议之上，封装在IP数据区中，但它是在基于无连接的IP协议之上提供<code>面向连接</code>的<code>高可靠性</code>数据传输和与进程通信的能力。它利用<code>确认与超时重传</code>、<code>滑动窗口机制</code>进行流控和拥塞控制来保证高可靠性的，同时，为了保证可靠性，它以牺牲效率为代价，在高实时要求场合不合适。</li>
</ul>
<hr />
<h3 id="tcp-服务模型"><a class="markdownIt-Anchor" href="#tcp-服务模型"></a> TCP 服务模型</h3>
<ul>
<li>
<p>TCP 服务由发送端和接收端创建一种称为**套接字（ socket ）**的端点来获得。每个套接字有一个套接字编号（地址），该编号由主机的 IP址以及一个本地主机的 16 位数值组成的。</p>
<ul>
<li>这个 16 位数值称为<strong>端口（port ）</strong>，端口是 TCP的TSAP 名字。</li>
<li>为了获得 TCP 服务，必须显式地在一台机器的套接字和另一台机器的套接字之间建立一个连接<br />
<img src="https://s2.loli.net/2022/01/06/Ar2LeynZD57zJlB.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
<li>
<p>一个 TCP 连接就是一个字节流，而不是消息流。端到端之间不保留消息的边界。</p>
<ul>
<li>如果发送进程将 512 字节的数据块写到一个 TCP 流中，那么这些数据有可能按 512 字节块、 1024 字节块、 2048 字节块或者其他的方式被递交给接收进程。</li>
<li>接收端不管多么努力尝试，都无法获知这些数据被写入字节流时的单元大小。<br />
<img src="https://s2.loli.net/2022/01/06/tuEHVByGqobNDI5.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></li>
</ul>
</li>
</ul>
<hr />
<h3 id="tcp-协议"><a class="markdownIt-Anchor" href="#tcp-协议"></a> TCP 协议</h3>
<ul>
<li>发送端和接收端的 TCP 实体以段的形式交换数据。 TCP 段（ TCP segment ）由一个固定的 20 字节的头（加上可选的部分）以及随后0个或者多个数据字节构成。</li>
<li>TCP 软件决定了段的大小。它可以将多次写操作中的数据累积起来，放到一个段中发送，也可以将一次写操作中的数据分割到多个段中发送。
<ul>
<li>有两个因素限制了段的长度。首先，包括 TCP 头在内的每个段，必须适合 IP 的 65 515 个字节有效载荷</li>
<li>其次，每个网络都有一个最大传输单元（MTU, maximum transfer unit ）。发送端和接收端的每个段必须适合 ，才能以单个不分段的数据包发送和接收。实际上， <code>MTU 通常是 1500 字节</code>（以太网的有效载荷大小）</li>
</ul>
</li>
</ul>
<hr />
<h3 id="tcp-段的头"><a class="markdownIt-Anchor" href="#tcp-段的头"></a> TCP 段的头</h3>
<p><img src="https://s2.loli.net/2022/01/06/VoMFTADq5pI2Sma.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li><strong>序号</strong>：指出段中数据在发送端数据流中的位置。</li>
<li><strong>确认号</strong>：指出本机希望下一个接收的字节的序号。</li>
<li><strong>头长</strong>：指出以32比特为单位的段头长度。它是针对变长的“选项”域设计的。</li>
<li><strong>码位</strong>：有些报文段是用于传输数据的，但有些报文段仅仅携带了确认信息，另一些报文段携带的是建立和关闭连接的请求。它使用“码位”来指出段的目的与内容。这8个比特各位的意义如表：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">码位</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">CWR, 拥塞控制信号</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">ECE, 显式拥塞通知</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">URG, 紧急指针字段可用</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">ACK, 确认字段可用</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">PSH, 本报文段请求急迫(PUSH)操作</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">RST, 连接复位</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">SYN, 序号同步，用于建立连接中的同步</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">FIN, 发送方字节流结束</td>
</tr>
</tbody>
</table>
<ul>
<li>由于有时<code>发送方希望终止操作，不想接收方接收完所有的比特</code>。如远程主机上的程序错误时就需要这种信号。TCP将数据指定为**“紧急”型**，<code>接收方收到这种数据后，会不必排队而尽快通知应用程序</code>。URG比特为1时，表明它是紧急的，其中的“紧急指针”指出了紧急数据在报文段中的结束位置。</li>
<li>当所有的紧急数据消失之后，TCP软件会告诉应用程序恢复正常的操作状态。<code>PUSH位提供了数据强迫传输机制，以强迫传输当前流中的数据</code>，而不必等待缓冲区满。远程登录中，终端的击键信号就是用PUSH作来提供的</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/lkKinphrNt5cxmI.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>校验和（ Checksum ）提供了额外的可靠性。它校验的范围包括头、数据，以及与 UDP一样的概念性伪头。除了伪头的协议号为 TCP (6)，并且校验和必需强制执行。</li>
</ul>
<hr />
<h3 id="tcp-连接建立"><a class="markdownIt-Anchor" href="#tcp-连接建立"></a> TCP 连接建立</h3>
<ul>
<li>TCP 使用了三次握手法来建立连接</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/zE6tMHgaTskv2Ax.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>第一次：客户机向服务器发送链接请求。<code>（服务器是死循环监听状态）</code>。那么首部中的<code>SYN=1，seq是序号</code>。TCP规定了SYN报文段不能携带数据，但是要消耗一个序号。表明我们连接发送的第一个编号是x。</li>
<li>第二次：服务器收到了客户机的请求（SYN是一个标示）。于是自己也发送一个<code>同意连接SYN和一个确认收到ACK</code>，seq是y.说明我这边第一次发送的编号是y。<code>Ack是收到了x+1之前的所有帧</code>。</li>
<li>第三次：客户端收到确认之后也发送一个确认过去</li>
</ul>
<hr />
<h3 id="tcp-连接释放"><a class="markdownIt-Anchor" href="#tcp-连接释放"></a> TCP 连接释放</h3>
<ul>
<li>TCP 使用了四次挥手法来释放连接</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/G6OWTsRXeQ3H9U5.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>第一挥：由客户机主动发送释放报文，并且单方面停止发送数据。</li>
<li>第二挥：服务器收到发送确认。其实<code>这个时候客户机-&gt;服务器已经关闭</code>了。</li>
<li>第三挥：因为服务器数据还没传完。这个时候服务器发送，客户端还是要收。传完了就发送关闭请求。</li>
<li>第四挥：客户端发送确认请求，等2MSL后超时关闭。</li>
<li>虽然 TCP 连接是全双工的，但是，为了理解 TCP 连接是如何释放的，最好将 TCP接看成<code>一对单工连接</code>。
<ul>
<li>每个单工连接的释放彼此独立。为了释放一个连接，任何一方都可以发送一个<code>设置了 FIN 标志位</code>的 TCP 段，这表示它己经没有数据要发送了。</li>
<li>当 FIN 段被另一方确认后，这个方向上的连接就被关闭，不再发送任何数据。</li>
<li>通常情况下，释放一个连接需要 4 个TCP 段：每个方向上一个 FIN 和一个 ACK。然而，第一个 ACK 和第二个 FIN 有可能被组合在同一个段中，从而将所需段总数降低到 3 个。</li>
</ul>
</li>
</ul>
<hr />
<h3 id="tcp-连接管理模型"><a class="markdownIt-Anchor" href="#tcp-连接管理模型"></a> TCP 连接管理模型</h3>
<ul>
<li>
<p>建立连接和释放连接所需要的步骤可以用一个有限状态机来表示，在每一种状态中，都存在特定的合法事件。当一个合法事件发生时，可能需要采取某个动作。当发生其他事件时，则报告一个错误。<br />
<img src="https://s2.loli.net/2022/01/06/YiXhVKetkp5NGaW.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
</li>
<li>
<p>有限状态机本身如图所示。在图中用粗线表示客户主动连接到一个被动服务器上的一般情形，其中客户部分用的是实线，服务器部分用的是虚线。细线表示了不常用的事件序列。<br />
<img src="https://s2.loli.net/2022/01/06/lYLoqy4WjZIsExe.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
</li>
</ul>
<hr />
<h3 id="tcp-滑动窗口"><a class="markdownIt-Anchor" href="#tcp-滑动窗口"></a> TCP 滑动窗口</h3>
<p><img src="https://s2.loli.net/2022/01/06/RD9KnpriQhcP3bL.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<p><img src="https://s2.loli.net/2022/01/06/87oxXgfvntFJMa4.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<hr />
<h3 id="tcp-计时器管理"><a class="markdownIt-Anchor" href="#tcp-计时器管理"></a> TCP 计时器管理</h3>
<ul>
<li>TCP 使用多个计时器（至少从概念上讲是计时器）来完成它的工作。其中最重要的是重传计时器 （RTO, Retransmission Timeout ）
<ul>
<li>当 TCP 实体发出一个段时，它同时启动一个重传计时器。如果在该计时器超时前该段被确认，则计时器被停止。</li>
<li>另一方面，如果在确认到来之前计时器超时，则段被重传（并且该计时器被重新启动）。</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/WNZVSjx3eHc6pIm.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>如果超时间隔设置得太短，则会发生大量<code>不必要的重传</code>，这么多无用数据包反而堵塞 Internet;</li>
<li>如果超时间隔被设置得太长，则一旦数据包丢失之后，由于<code>太长的重传延迟</code>，所以性能会受到影响。</li>
<li>解决方案是使用一个动态算法，它根据网络性能的连续测量’情况，不断地调整超时间隔。</li>
</ul>
<hr />
<h3 id="tcp-拥塞控制"><a class="markdownIt-Anchor" href="#tcp-拥塞控制"></a> TCP 拥塞控制</h3>
<ul>
<li>TCP使用带有丢失信号的 <strong>AIMD</strong> 来控制拥塞
<ul>
<li>实现为网络中可能存在的段数的拥塞窗口 (cwnd)</li>
<li>使用多种协同工作的机制</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/gLdhT2GucCk1iHb.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>确认返回到发送端的速率恰好是数据包通过路径上最慢链路时的速率。这正是发送端应该使用的精确发送速率。</li>
<li>如果发送端以这个速率往网络注入新的数据包，这些数据包就能以慢速链路允许的速率一样快的速度被转发出去，但它们不会再排队和堵塞沿途上的任何一个路由器。</li>
<li>这个时序就是<strong>确认时钟（ack clock）</strong>。这是 TCP 的基本组成部分。通过使用一个确认时钟，  TCP 平滑输出流量和避免不必要的路由器队列。</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/sAiPUX9VFBnaMTf.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>阈值是<code>之前损失 cwn</code>的一半</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/06/P5CXZVgMHFQ6A2r.png" srcset="/img/loading.gif" lazyload alt="example" title="pic" /></p>
<ul>
<li>在 3 个重复的 ACK 后重新传输丢失的数据包</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/">专业课</a>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>
                    
                      <a class="hover-with-bg" href="/tags/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/">期末复习</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/compile-1/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">编译原理｜概述</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os-thread/">
                        <span class="hidden-mobile">操作系统｜线程</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"ju71pT7Kr10EISdANOvPh7gC-gzGzoHsz","appKey":"FoQggxB4tHGzYQQoLrF0qKux","path":"window.location.pathname","placeholder":"吐槽","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>





  

  
    <!-- KaTeX -->
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css" />
  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
